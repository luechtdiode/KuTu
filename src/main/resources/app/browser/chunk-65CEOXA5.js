import{B as s,Ba as se,Bb as Te,C as r,D as u,E as b,Ea as ae,Fa as le,G as _,H as g,Ha as ce,Ja as ge,Ka as de,Ma as me,N as R,Na as pe,O as p,Oa as ue,P as q,Pa as _e,Q as y,Qa as fe,R as G,Ra as he,S as K,T as L,Ta as w,U as T,V as E,Va as Ie,Wa as be,Xa as Ce,Y as j,Ya as J,Z as Y,Za as ve,_ as X,a as O,ab as M,b as B,ba as S,c as N,ca as k,d as V,da as Z,db as xe,e as P,ea as ee,eb as Re,f as D,fb as ye,g as W,ga as te,gb as Se,h as Q,hb as ke,i as U,j as $,k as z,kb as we,lb as Je,m as C,ma as ie,nb as Me,o as f,p as h,q as H,qa as A,rb as Pe,sa as ne,t as a,u as I,ub as Le,v,va as oe,w as x,x as m,z as c,za as re}from"./chunk-KMY4ZES7.js";import"./chunk-6IQPZO6F.js";import"./chunk-JSAAGAZE.js";import"./chunk-5XVA5RR2.js";import"./chunk-LOHYXAXQ.js";import"./chunk-P5VFIEEE.js";import"./chunk-HC6MZPB3.js";import"./chunk-J5OMF6R4.js";import"./chunk-KWW2H4SN.js";import"./chunk-7HA5TF5T.js";import"./chunk-ZOBGMWXG.js";import"./chunk-426OJ4HC.js";import"./chunk-RPQZFOYD.js";import"./chunk-GIGBYVJT.js";import"./chunk-MM5QLNJM.js";import"./chunk-H3GX5QFY.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-G2DZN4YG.js";import"./chunk-MCRJI3T3.js";import"./chunk-TI7J2N3O.js";import"./chunk-TTFYQ64X.js";import"./chunk-2R6CW7ES.js";function Be(i,d){if(i&1&&(s(0,"span"),p(1),u(2,"br"),r()),i&2){let e=d.$implicit;a(),q(e)}}function Ne(i,d){if(i&1&&(s(0,"ion-note",4),m(1,Be,3,1,"span",5),r()),i&2){let e=g();a(),c("ngForOf",e.getCommentLines())}}var Ee=(()=>{class i{judgeregistration;status;selectedDisciplinlist;selected=new H;ngOnInit(){}getProgramList(){var e=[];return this.selectedDisciplinlist===void 0&&(this.selectedDisciplinlist=[]),this.selectedDisciplinlist.forEach(t=>{e.find(n=>n.program==t.program)===void 0&&e.push(t)}),e}getProgrammDisciplinText(e){return e.program+"/"+e.disziplin}getProgrammText(e){return e.program}getCommentLines(){return this.judgeregistration.comment.split(`
`)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-reg-judge-item"]],inputs:{judgeregistration:"judgeregistration",status:"status",selectedDisciplinlist:"selectedDisciplinlist"},outputs:{selected:"selected"},standalone:!1,decls:9,vars:6,consts:[[3,"click"],["slot","start"],["src","assets/imgs/chief.png"],["slot","end",4,"ngIf"],["slot","end"],[4,"ngFor","ngForOf"]],template:function(t,n){t&1&&(s(0,"ion-item",0),_("click",function(){return n.selected?n.selected.emit(n.judgeregistration):{}}),s(1,"ion-avatar",1),u(2,"img",2),r(),s(3,"ion-label"),p(4),u(5,"br"),s(6,"small"),p(7),r()(),m(8,Ne,2,1,"ion-note",3),r()),t&2&&(a(4),K("",n.judgeregistration.name,", ",n.judgeregistration.vorname," (",n.judgeregistration.geschlecht,")"),a(3),G("",n.judgeregistration.mobilephone,", ",n.judgeregistration.mail,""),a(),c("ngIf",n.judgeregistration.comment))},dependencies:[S,k,ce,w,J,M],encapsulation:2})}return i})();function De(i,d){if(i&1&&(s(0,"ion-select-option",11),p(1),j(2,"date"),r()),i&2){let e=d.$implicit;c("value",e.uuid),a(),y(" ",e.titel+" "+X(2,2,e.datum,"dd-MM-yy"),"")}}function We(i,d){if(i&1){let e=b();s(0,"ion-select",9),E("ngModelChange",function(n){f(e);let o=g(2);return T(o.competition,n)||(o.competition=n),h(n)}),m(1,De,3,5,"ion-select-option",10),r()}if(i&2){let e=g(2);L("ngModel",e.competition),a(),c("ngForOf",e.getCompetitions())}}function Qe(i,d){if(i&1&&(s(0,"ion-col")(1,"ion-item")(2,"ion-label"),p(3,"Wettkampf"),r(),m(4,We,2,2,"ion-select",8),r()()),i&2){let e=g();a(4),c("ngIf",e.getCompetitions().length>0)}}function Ue(i,d){if(i&1&&(s(0,"ion-note",12),p(1),r()),i&2){let e=g();a(),y(" ",e.competitionName()," ")}}function $e(i,d){i&1&&(s(0,"ion-item")(1,"ion-label"),p(2,"loading ..."),r(),u(3,"ion-spinner"),r())}function ze(i,d){if(i&1){let e=b();s(0,"ion-item-option",19),_("click",function(){f(e);let n=g().$implicit,o=R(1),l=g(2);return h(l.delete(n,o))}),u(1,"ion-icon",17),p(2," L\xF6schen "),r()}}function He(i,d){if(i&1){let e=b();s(0,"ion-item-sliding",null,0)(2,"app-reg-judge-item",14),_("click",function(){let n=f(e).$implicit,o=R(1),l=g(2);return h(l.itemTapped(n,o))}),r(),s(3,"ion-item-options",15)(4,"ion-item-option",16),_("click",function(){let n=f(e).$implicit,o=R(1),l=g(2);return h(l.edit(n,o))}),u(5,"ion-icon",17),p(6),r(),m(7,ze,3,0,"ion-item-option",18),r()()}if(i&2){let e=d.$implicit,t=g(2);a(2),c("judgeregistration",e)("selectedDisciplinlist",t.wkPgms),a(4),y(" ",t.isLoggedInAsClub()?"Bearbeiten":t.isLoggedIn()?"Best\xE4tigen":"Anzeigen"," "),a(),c("ngIf",t.isLoggedInAsClub())}}function qe(i,d){if(i&1&&(s(0,"ion-content")(1,"ion-list"),m(2,$e,4,0,"ion-item",4),j(3,"async"),m(4,He,8,4,"ion-item-sliding",13),r()()),i&2){let e=g();a(2),c("ngIf",Y(3,2,e.busy)||!(e.competition&&e.currentRegistration&&e.sJudgeRegistrationList)),a(2),c("ngForOf",e.filteredStartList)}}function Ge(i,d){if(i&1){let e=b();s(0,"ion-button",20),_("click",function(){f(e);let n=g();return h(n.createRegistration())}),u(1,"ion-icon",21),p(2," Neue Anmeldung... "),r()}}var je=(()=>{class i{navCtrl;route;backendService;alertCtrl;busy=new B(!1);currentRegistration;currentRegId;wkPgms;tMyQueryStream=new O;sFilterTask=void 0;sFilteredRegistrationList;sJudgeRegistrationList;sMyQuery;sSyncActions=[];constructor(e,t,n,o){this.navCtrl=e,this.route=t,this.backendService=n,this.alertCtrl=o,this.backendService.competitions||this.backendService.getCompetitions()}ngOnInit(){this.busy.next(!0);let e=this.route.snapshot.paramMap.get("wkId");this.currentRegId=parseInt(this.route.snapshot.paramMap.get("regId")),e?this.competition=e:this.backendService.competition&&(this.competition=this.backendService.competition)}ionViewWillEnter(){this.refreshList()}refreshList(){this.busy.next(!0),this.currentRegistration=void 0,this.backendService.getClubRegistrations(this.competition).pipe(P(e=>!!e.find(t=>t.id===this.currentRegId)),W(1)).subscribe(e=>{this.currentRegistration=e.find(t=>t.id===this.currentRegId),console.log("ask Judgees-list for registration"),this.backendService.loadJudgeRegistrations(this.competition,this.currentRegId).subscribe(t=>{this.busy.next(!1),this.judgeregistrations=t,this.tMyQueryStream.pipe(P(o=>!!o&&!!o.target),V(o=>o.target.value||"*"),D(300),Q(),z(o=>this.busy.next(!0)),$(this.runQuery(t)),U()).subscribe(o=>{this.sFilteredRegistrationList=o,this.busy.next(!1)})})})}set competition(e){(!this.currentRegistration||e!==this.backendService.competition)&&this.backendService.loadJudgeProgramDisziplinList(this.competition).subscribe(t=>{this.wkPgms=t})}get competition(){return this.backendService.competition||""}getCompetitions(){return this.backendService.competitions||[]}competitionName(){return this.backendService.competitionName}runQuery(e){return t=>{let n=t.trim(),o=[];return n&&e&&e.forEach(l=>{this.filter(n)(l)&&o.push(l)}),N(o)}}set judgeregistrations(e){this.sJudgeRegistrationList=e,this.reloadList(this.sMyQuery)}get judgeregistrations(){return this.sJudgeRegistrationList}get filteredStartList(){return this.sFilteredRegistrationList||this.sJudgeRegistrationList||[]}reloadList(e){this.tMyQueryStream.next(e)}itemTapped(e,t){t.getOpenAmount().then(n=>{n>0?t.close():t.open("end")})}isLoggedInAsClub(){return this.backendService.loggedIn&&this.backendService.authenticatedClubId===this.currentRegId+""}isLoggedInAsAdmin(){return this.backendService.loggedIn&&!!this.backendService.authenticatedClubId}isLoggedIn(){return this.backendService.loggedIn}filter(e){let t=e.toUpperCase().split(" ");return n=>e.trim()==="*"||t.filter(o=>{if(n.name.toUpperCase().indexOf(o)>-1||n.vorname.toUpperCase().indexOf(o)>-1||n.mobilephone.toUpperCase().indexOf(o)>-1||n.mail.toUpperCase().indexOf(o)>-1||n.comment.toUpperCase().indexOf(o)>-1)return!0}).length===t.length}createRegistration(){this.navCtrl.navigateForward(`reg-judgelist/${this.backendService.competition}/${this.currentRegId}/0`)}edit(e,t){this.navCtrl.navigateForward(`reg-judgelist/${this.backendService.competition}/${this.currentRegId}/${e.id}`),t.close()}delete(e,t){t.close(),this.alertCtrl.create({header:"Achtung",subHeader:"L\xF6schen der Wertungsrichter-Anmeldung am Wettkampf",message:"Hiermit wird die Anmeldung von "+e.name+", "+e.vorname+" am Wettkampf gel\xF6scht.",buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{this.backendService.deleteJudgeRegistration(this.backendService.competition,this.currentRegId,e).subscribe(()=>{this.refreshList(),this.navCtrl.pop()})}}]}).then(o=>o.present())}static \u0275fac=function(t){return new(t||i)(I(se),I(ie),I(Te),I(Pe))};static \u0275cmp=v({type:i,selectors:[["app-reg-judgelist"]],standalone:!1,decls:18,vars:5,consts:[["slidingJudgeRegistrationItem",""],["slot","start"],["defaultHref","/"],["no-padding",""],[4,"ngIf"],["slot","end",4,"ngIf"],["placeholder","Search","showCancelButton","never",3,"ngModelChange","ionInput","ionCancel","ngModel"],["size","large","expand","block","color","success",3,"click",4,"ngIf"],["label","Wettkampf","placeholder","Bitte ausw\xE4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["label","Wettkampf","placeholder","Bitte ausw\xE4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["slot","end"],[4,"ngFor","ngForOf"],[3,"click","judgeregistration","selectedDisciplinlist"],["side","end"],["color","primary",3,"click"],["name","arrow-forward-circle-outline","ios","md-arrow-forward-circle-outline"],["color","danger",3,"click",4,"ngIf"],["color","danger",3,"click"],["size","large","expand","block","color","success",3,"click"],["slot","start","name","add"]],template:function(t,n){t&1&&(s(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),u(3,"ion-back-button",2),r(),s(4,"ion-title")(5,"ion-grid",3)(6,"ion-row")(7,"ion-col")(8,"ion-label"),p(9,"Wertungsrichter-Anmeldungen"),r()(),m(10,Qe,5,1,"ion-col",4),r()()(),m(11,Ue,2,1,"ion-note",5),r(),s(12,"ion-searchbar",6),E("ngModelChange",function(l){return T(n.sMyQuery,l)||(n.sMyQuery=l),l}),_("ionInput",function(l){return n.reloadList(l)})("ionCancel",function(l){return n.reloadList(l)}),r()(),m(13,qe,5,4,"ion-content",4),s(14,"ion-footer")(15,"ion-toolbar")(16,"ion-list"),m(17,Ge,3,0,"ion-button",7),r()()()),t&2&&(a(10),c("ngIf",!n.competition),a(),c("ngIf",n.competition),a(),L("ngModel",n.sMyQuery),a(),c("ngIf",n.wkPgms&&n.wkPgms.length>0),a(4),c("ngIf",n.isLoggedInAsClub()))},dependencies:[S,k,ne,oe,ge,de,me,pe,ue,_e,fe,he,w,Ie,be,Ce,J,ve,M,xe,Re,ye,Se,ke,we,Je,ae,le,Me,Ee,Z,ee],encapsulation:2})}return i})();var Ke=[{path:"",component:je}],Ae=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=x({type:i});static \u0275inj=C({imports:[A.forChild(Ke),A]})}return i})();var bt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=x({type:i});static \u0275inj=C({imports:[te,re,Le,Ae]})}return i})();export{bt as RegJudgelistPageModule};
