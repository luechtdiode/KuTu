import{$a as ie,Ab as w,B as r,Ba as z,Bb as ge,C as a,D as h,E as f,Ea as G,G as u,H as s,Ja as j,Ka as K,N as x,Na as U,O as p,Oa as Y,P as S,Q as k,Qa as q,R as V,Ra as J,T as v,Ta as Q,U as C,V as I,Va as X,Wa as Z,Xa as $,Y as M,Ya as ee,Za as te,_ as A,ab as ne,ba as N,ca as O,d as T,ea as B,fb as oe,ga as R,gb as re,kb as ae,lb as ce,m as E,o as m,p as _,qa as L,rb as le,sa as D,t as o,u as b,ub as se,v as H,va as W,w as P,x as d,z as l,za as F}from"./chunk-KMY4ZES7.js";import"./chunk-6IQPZO6F.js";import"./chunk-JSAAGAZE.js";import"./chunk-5XVA5RR2.js";import"./chunk-LOHYXAXQ.js";import"./chunk-P5VFIEEE.js";import"./chunk-HC6MZPB3.js";import"./chunk-J5OMF6R4.js";import"./chunk-KWW2H4SN.js";import"./chunk-7HA5TF5T.js";import"./chunk-ZOBGMWXG.js";import"./chunk-426OJ4HC.js";import"./chunk-RPQZFOYD.js";import"./chunk-GIGBYVJT.js";import"./chunk-MM5QLNJM.js";import"./chunk-H3GX5QFY.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-G2DZN4YG.js";import"./chunk-MCRJI3T3.js";import"./chunk-TI7J2N3O.js";import"./chunk-TTFYQ64X.js";import"./chunk-2R6CW7ES.js";function _e(t,g){if(t&1&&(r(0,"ion-label"),p(1),a()),t&2){let e=s(2);o(),V(" ",e.durchgang,", ",e.geraetName()," ")}}function de(t,g){if(t&1&&(r(0,"ion-note",15),p(1),a()),t&2){let e=s(2);o(),k(" ","Riege "+e.step," ")}}function ue(t,g){t&1&&h(0,"ion-icon",16)}function he(t,g){if(t&1){let e=f();r(0,"ion-list")(1,"ion-item")(2,"ion-label"),p(3),a()(),r(4,"ion-item"),d(5,_e,2,2,"ion-label",5),a(),r(6,"ion-item-sliding",null,0)(8,"ion-item",7),u("click",function(){m(e);let i=x(7),c=s();return _(c.itemTapped(i))}),r(9,"ion-label"),p(10),a(),d(11,de,2,1,"ion-note",8)(12,ue,1,0,"ion-icon",9),a(),r(13,"ion-item-options",10)(14,"ion-item-option",11),u("click",function(){m(e);let i=x(7),c=s();return _(c.prevStep(i))}),h(15,"ion-icon",12),p(16," Vorherige Riege "),a()(),r(17,"ion-item-options",13)(18,"ion-item-option",11),u("click",function(){m(e);let i=x(7),c=s();return _(c.nextStep(i))}),h(19,"ion-icon",14),p(20," N\xE4chste Riege "),a()()()()}if(t&2){let e=s();o(3),S(e.competitionName()),o(2),l("ngIf",e.durchgang&&e.geraet),o(5),S(e.geraet&&e.getSteps()?"Riege ("+e.getSteps()[0]+" bis "+e.getSteps()[e.getSteps().length-1]+")":"Keine Daten"),o(),l("ngIf",e.geraet&&e.getSteps()&&e.getSteps().length>0),o(),l("ngIf",e.geraet&&e.getSteps()),o(2),l("disabled",!e.geraet||!e.getSteps()),o(4),l("disabled",!e.geraet||!e.getSteps())}}function fe(t,g){if(t&1&&(r(0,"ion-select-option",22),p(1),M(2,"date"),a()),t&2){let e=g.$implicit;l("value",e.uuid),o(),k(" ",e.titel+" "+A(2,2,e.datum,"dd-MM-yy"),"")}}function xe(t,g){if(t&1){let e=f();r(0,"ion-select",20),I("ngModelChange",function(i){m(e);let c=s(2);return C(c.competition,i)||(c.competition=i),_(i)}),d(1,fe,3,5,"ion-select-option",21),a()}if(t&2){let e=s(2);v("ngModel",e.competition),o(),l("ngForOf",e.getCompetitions())}}function Se(t,g){if(t&1&&(r(0,"ion-select-option",22),p(1),a()),t&2){let e=g.$implicit;l("value",e),o(),S(e)}}function be(t,g){if(t&1){let e=f();r(0,"ion-select",23),I("ngModelChange",function(i){m(e);let c=s(2);return C(c.durchgang,i)||(c.durchgang=i),_(i)}),d(1,Se,2,2,"ion-select-option",21),a()}if(t&2){let e=s(2);v("ngModel",e.durchgang),o(),l("ngForOf",e.getDurchgaenge())}}function ke(t,g){if(t&1&&(r(0,"ion-select-option",22),p(1),a()),t&2){let e=g.$implicit;l("value",e.id),o(),S(e.name)}}function ve(t,g){if(t&1){let e=f();r(0,"ion-select",24),I("ngModelChange",function(i){m(e);let c=s(2);return C(c.geraet,i)||(c.geraet=i),_(i)}),d(1,ke,2,2,"ion-select-option",21),a()}if(t&2){let e=s(2);v("ngModel",e.geraet),o(),l("ngForOf",e.getGeraete())}}function Ce(t,g){if(t&1&&(r(0,"ion-note",15),p(1),a()),t&2){let e=s(2);o(),k(" ","Riege "+e.step," ")}}function Ie(t,g){t&1&&h(0,"ion-icon",16)}function we(t,g){if(t&1){let e=f();r(0,"ion-list")(1,"ion-item"),d(2,xe,2,2,"ion-select",17),a(),r(3,"ion-item"),d(4,be,2,2,"ion-select",18),a(),r(5,"ion-item"),d(6,ve,2,2,"ion-select",19),a(),r(7,"ion-item-sliding",null,0)(9,"ion-item",7),u("click",function(){m(e);let i=x(8),c=s();return _(c.itemTapped(i))}),r(10,"ion-label"),p(11),a(),d(12,Ce,2,1,"ion-note",8)(13,Ie,1,0,"ion-icon",9),a(),r(14,"ion-item-options",10)(15,"ion-item-option",11),u("click",function(){m(e);let i=x(8),c=s();return _(c.prevStep(i))}),p(16," Vorherige Riege "),a()(),r(17,"ion-item-options",13)(18,"ion-item-option",11),u("click",function(){m(e);let i=x(8),c=s();return _(c.nextStep(i))}),p(19," N\xE4chste Riege "),a()()()()}if(t&2){let e=s();o(2),l("ngIf",e.getCompetitions()),o(2),l("ngIf",e.competition&&e.getDurchgaenge()&&e.getDurchgaenge().length>0),o(2),l("ngIf",e.durchgang&&e.getGeraete()&&e.getGeraete().length>0),o(5),S(e.geraet&&e.getSteps()?"Riege ("+e.getSteps()[0]+" bis "+e.getSteps()[e.getSteps().length-1]+")":"Keine Daten"),o(),l("ngIf",e.geraet&&e.getSteps()&&e.getSteps().length>0),o(),l("ngIf",e.geraet&&e.getSteps()),o(2),l("disabled",!e.geraet||!e.getSteps()),o(3),l("disabled",!e.geraet||!e.getSteps())}}function ye(t,g){if(t&1){let e=f();r(0,"ion-button",25),u("click",function(){m(e);let i=s();return _(i.navToStation())}),h(1,"ion-icon",26),p(2," Resultate "),a()}if(t&2){let e=s();l("disabled",!(e.geraet&&e.getSteps()))}}function Te(t,g){if(t&1){let e=f();r(0,"ion-button",25),u("click",function(){m(e);let i=s();return _(i.navToStation())}),h(1,"ion-icon",27),p(2," Resultate "),a()}if(t&2){let e=s();l("disabled",!(e.geraet&&e.getSteps()))}}function Ee(t,g){if(t&1){let e=f();r(0,"ion-list")(1,"ion-button",28),u("click",function(){m(e);let i=s();return _(i.unlock())}),h(2,"ion-icon",29),p(3,"Einstellung zur\xFCcksetzen "),a()()}}function He(t,g){if(t&1){let e=f();r(0,"ion-list")(1,"ion-button",30),u("click",function(){m(e);let i=s();return _(i.logout())}),h(2,"ion-icon",31),p(3,"Abmelden "),a()()}}var pe=(()=>{class t{navCtrl;backendService;alertCtrl;durchgangstate;durchgangopen=!1;constructor(e,n,i){this.navCtrl=e,this.backendService=n,this.alertCtrl=i,this.backendService.getCompetitions(),this.backendService.durchgangStarted.pipe(T(c=>c.filter(y=>w(y.durchgang)===w(this.backendService.durchgang)&&y.wettkampfUUID===this.backendService.competition).length>0)).subscribe(c=>{this.durchgangstate=c?"gestartet":"gesperrt",this.durchgangopen=c})}ngOnInit(){this.backendService.competition&&this.backendService.getDurchgaenge(this.backendService.competition)}get isLocked(){return this.backendService.stationFreezed}get isOpenAndActive(){return this.durchgangopen&&this.backendService.isWebsocketConnected()}get isLoggedIn(){return this.backendService.loggedIn}set competition(e){this.isLocked||this.backendService.getDurchgaenge(e)}get competition(){return this.backendService.competition||""}set durchgang(e){this.isLocked||this.backendService.getGeraete(this.competition,e)}get durchgang(){return this.backendService.durchgang||""}set geraet(e){this.isLocked||this.backendService.getSteps(this.competition,this.durchgang,e)}get geraet(){return this.backendService.geraet||-1}set step(e){this.backendService.getWertungen(this.competition,this.durchgang,this.geraet,e)}get step(){return this.backendService.step||-1}itemTapped(e){e.getOpenAmount().then(n=>{n>10||n<-10?e.close():e.open("end")})}nextStep(e){this.step=this.backendService.nextStep(),e.close()}prevStep(e){this.step=this.backendService.prevStep(),e.close()}getCompetitions(){return this.backendService.competitions}competitionName(){if(!this.backendService.competitions)return"";let e=this.backendService.competitions.filter(n=>n.uuid===this.backendService.competition).map(n=>n.titel+", am "+(n.datum+"T").split("T")[0].split("-").reverse().join("-"));return e.length===1?e[0]:""}geraetName(){if(!this.backendService.geraete)return"";let e=this.backendService.geraete.filter(n=>n.id===this.backendService.geraet).map(n=>n.name);return e.length===1?e[0]:""}getDurchgaenge(){return this.backendService.durchgaenge}getGeraete(){return this.backendService.geraete}getSteps(){return!this.backendService.steps&&this.backendService.geraet&&this.backendService.getSteps(this.competition,this.durchgang,this.geraet),this.backendService.steps}navToStation(){this.navCtrl.navigateForward("station")}unlock(){let e=this.competitionName()+"/"+this.durchgang+"/"+this.geraetName();this.alertCtrl.create({header:"Info",message:'Die Fixierung auf die Station "'+e+'" wird aufgehoben.<br>Du kannst dann die Station frei einstellen.',buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{this.backendService.unlock()}}]}).then(i=>i.present())}logout(){this.alertCtrl.create({header:"Achtung",subHeader:"Nach dem Abmelden k\xF6nnen keine weiteren Resultate mehr erfasst werden.",message:"F\xFCr die Erfassung weiterer Resultate wird eine Neuanmeldung erforderlich.",buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{this.backendService.logout()}}]}).then(n=>n.present())}finish(){let e=this.geraetName()+"/Riege #"+this.step,n=this.alertCtrl.create({header:"Achtung",message:'Nach dem Abschliessen der Station "'+e+'" k\xF6nnen die erfassten Wertungen nur noch im Wettkampf-B\xFCro korrigiert werden.',buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{let i=n.then(c=>c.dismiss());return this.backendService.finishStation(this.competition,this.durchgang,this.geraet,this.step).subscribe(c=>{c.length===0&&i.then(()=>{this.navCtrl.pop()})}),!1}}]});n.then(i=>i.present())}static \u0275fac=function(n){return new(n||t)(b(z),b(ge),b(le))};static \u0275cmp=H({type:t,selectors:[["app-page-home"]],standalone:!1,decls:18,vars:8,consts:[["slidingStepItem",""],[3,"translucent"],["slot","start"],["slot","icon-only","name","menu"],[3,"fullscreen"],[4,"ngIf"],["size","large","expand","block","color","primary",3,"disabled","click",4,"ngIf"],[3,"click"],["slot","end",4,"ngIf"],["slot","end","name","arrow-forward-circle-outline",4,"ngIf"],["side","start"],["color","secondary",3,"click","disabled"],["name","arrow-back-circle-outline"],["side","end"],["name","arrow-forward-circle-outline"],["slot","end"],["slot","end","name","arrow-forward-circle-outline"],["label","Wettkampf","placeholder","Bitte ausw\xE4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["label","Durchgang","placeholder","Bitte ausw\xE4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["label","Ger\xE4t","placeholder","Bitte ausw\xE4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["label","Wettkampf","placeholder","Bitte ausw\xE4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["label","Durchgang","placeholder","Bitte ausw\xE4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModelChange","ngModel"],["label","Ger\xE4t","placeholder","Bitte ausw\xE4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModelChange","ngModel"],["size","large","expand","block","color","primary",3,"click","disabled"],["slot","start","name","list"],["slot","start","name","create"],["size","large","expand","block","color","warning",3,"click"],["slot","start","name","unlock"],["size","large","expand","block","color","danger",3,"click"],["slot","start","name","log-out"]],template:function(n,i){n&1&&(r(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2)(3,"ion-menu-toggle")(4,"ion-button"),h(5,"ion-icon",3),a()()(),r(6,"ion-title"),p(7,"Wettkampf App"),a()()(),r(8,"ion-content",4),d(9,he,21,7,"ion-list",5)(10,we,20,8,"ion-list",5),r(11,"ion-list"),d(12,ye,3,1,"ion-button",6)(13,Te,3,1,"ion-button",6),a()(),r(14,"ion-footer")(15,"ion-toolbar"),d(16,Ee,4,0,"ion-list",5)(17,He,4,0,"ion-list",5),a()()),n&2&&(l("translucent",!0),o(8),l("fullscreen",!0),o(),l("ngIf",i.isLocked),o(),l("ngIf",!i.isLocked),o(2),l("ngIf",!i.isLoggedIn),o(),l("ngIf",i.isLoggedIn),o(3),l("ngIf",i.isLocked),o(),l("ngIf",i.isLoggedIn))},dependencies:[N,O,D,W,j,K,U,Y,q,J,Q,X,Z,$,ee,te,ie,ne,oe,re,ae,ce,G,B],encapsulation:2})}return t})();var ze=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=P({type:t});static \u0275inj=E({imports:[R,F,se,L.forChild([{path:"",component:pe}])]})}return t})();export{ze as HomePageModule};
