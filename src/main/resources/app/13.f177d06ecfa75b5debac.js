(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{k6xi:function(t,e,n){"use strict";n.r(e),n.d(e,"LastTopResultsPageModule",(function(){return k}));var i=n("ofXK"),o=n("3Pt+"),r=n("tyNb"),c=n("TEn/"),a=n("cygB"),s=n("pLZG"),b=n("fXoL"),l=n("H2Ii");function p(t,e){if(1&t&&(b.Kb(0,"ion-select-option",9),b.kc(1),b.Vb(2,"date"),b.Jb()),2&t){var n=e.$implicit;b.ac("value",n.uuid),b.xb(1),b.mc(" ",n.titel+" "+b.Xb(2,2,n.datum,"dd-MM-yy"),"")}}function u(t,e){if(1&t){var n=b.Lb();b.Kb(0,"ion-select",7),b.Sb("ngModelChange",(function(t){return b.ec(n),b.Ub(2).competition=t})),b.jc(1,p,3,5,"ion-select-option",8),b.Jb()}if(2&t){var i=b.Ub(2);b.ac("ngModel",i.competition),b.xb(1),b.ac("ngForOf",i.getCompetitions())}}function f(t,e){if(1&t&&(b.Kb(0,"ion-col"),b.Kb(1,"ion-item"),b.Kb(2,"ion-label"),b.kc(3,"Wettkampf"),b.Jb(),b.jc(4,u,2,2,"ion-select",6),b.Jb(),b.Jb()),2&t){var n=b.Ub();b.xb(4),b.ac("ngIf",n.getCompetitions().length>0)}}function g(t,e){if(1&t&&(b.Kb(0,"ion-note",10),b.kc(1),b.Jb()),2&t){var n=b.Ub();b.xb(1),b.mc(" ",n.competitionName()," ")}}function m(t,e){if(1&t){var n=b.Lb();b.Kb(0,"ion-col",11),b.Sb("click",(function(t){b.ec(n);var i=e.$implicit;return b.Ub().itemTapped(t,i)})),b.Ib(1,"result-display",12),b.Jb()}if(2&t){var i=e.$implicit,o=b.Ub();b.xb(1),b.ac("item",i)("title",o.getTitle(i))}}var d=function(){function t(t){this.backendService=t,this.items=[],this.toptop={},this.geraete=[],this.backendService.competitions||this.backendService.getCompetitions()}return t.prototype.ngOnInit=function(){var t=this;this.backendService.activateNonCaptionMode(this.backendService.competition).subscribe((function(e){t.geraete=e||[],t.sortItems()})),this.backendService.newLastResults.pipe(Object(s.a)((function(t){return!!t&&!!t.lastTopResults}))).subscribe((function(e){t.items=[],t.toptop={},Object.keys(e.lastTopResults).forEach((function(n){var i=e.lastTopResults[n],o=t.toptop[i.wertung.wettkampfdisziplinId];o?o.wertung.endnote<i.wertung.endnote&&(t.toptop[i.wertung.wettkampfdisziplinId]=i):t.toptop[i.wertung.wettkampfdisziplinId]=i})),Object.keys(t.toptop).forEach((function(e){t.items.push(t.toptop[e])})),t.sortItems()}))},t.prototype.sortItems=function(){var t=this;this.items=this.items.sort((function(e,n){var i=e.programm.localeCompare(n.programm);return 0===i&&(i=t.geraetOrder(e.geraet)-t.geraetOrder(n.geraet)),i}))},Object.defineProperty(t.prototype,"stationFreezed",{get:function(){return this.backendService.stationFreezed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"competition",{get:function(){return this.backendService.competition||""},set:function(t){var e=this;this.stationFreezed||(this.backendService.getDurchgaenge(t),this.backendService.activateNonCaptionMode(this.backendService.competition).subscribe((function(t){e.geraete=t||[],e.sortItems()})))},enumerable:!1,configurable:!0}),t.prototype.getCompetitions=function(){return this.backendService.competitions||[]},t.prototype.competitionName=function(){var t=this;if(!this.backendService.competitions)return"";var e=this.backendService.competitions.filter((function(e){return e.uuid===t.backendService.competition})).map((function(t){return t.titel+", am "+(t.datum+"T").split("T")[0].split("-").reverse().join("-")}));return 1===e.length?e[0]:""},t.prototype.geraetOrder=function(t){return this.geraete?this.geraete.findIndex((function(e){return e.id===t})):0},t.prototype.geraetText=function(t){if(!this.geraete)return"";var e=this.geraete.filter((function(e){return e.id===t})).map((function(t){return t.name}));return 1===e.length?e[0]:""},t.prototype.getTitle=function(t){return t.programm+" - "+this.geraetText(t.geraet)},t.\u0275fac=function(e){return new(e||t)(b.Hb(a.a))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-last-top-results"]],decls:18,vars:3,consts:[["slot","start"],["slot","icon-only","name","menu"],["no-padding",""],[4,"ngIf"],["slot","end",4,"ngIf"],["class","align-self-start","size-xs","12","size-md","6","size-lg","4","size-xl","2","col-12","","col-sm-6","","col-lg-4","","col-xl-2","",3,"click",4,"ngFor","ngForOf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["slot","end"],["size-xs","12","size-md","6","size-lg","4","size-xl","2","col-12","","col-sm-6","","col-lg-4","","col-xl-2","",1,"align-self-start",3,"click"],[3,"item","title"]],template:function(t,e){1&t&&(b.Kb(0,"ion-header"),b.Kb(1,"ion-toolbar"),b.Kb(2,"ion-buttons",0),b.Kb(3,"ion-menu-toggle"),b.Kb(4,"ion-button"),b.Ib(5,"ion-icon",1),b.Jb(),b.Jb(),b.Jb(),b.Kb(6,"ion-title"),b.Kb(7,"ion-grid",2),b.Kb(8,"ion-row"),b.Kb(9,"ion-col"),b.Kb(10,"ion-label"),b.kc(11,"Top Resultate"),b.Jb(),b.Jb(),b.jc(12,f,5,1,"ion-col",3),b.Jb(),b.Jb(),b.Jb(),b.jc(13,g,2,1,"ion-note",4),b.Jb(),b.Jb(),b.Kb(14,"ion-content"),b.Kb(15,"ion-grid",2),b.Kb(16,"ion-row"),b.jc(17,m,2,2,"ion-col",5),b.Jb(),b.Jb(),b.Jb()),2&t&&(b.xb(12),b.ac("ngIf",!e.competition),b.xb(1),b.ac("ngIf",e.competition),b.xb(4),b.ac("ngForOf",e.items))},directives:[c.m,c.H,c.g,c.x,c.f,c.n,c.G,c.l,c.A,c.i,c.u,i.m,c.j,i.l,c.p,c.C,c.O,o.d,o.g,c.D,c.y,l.a],pipes:[i.e],styles:[""]}),t}(),h=n("bDjW"),v=[{path:"",component:d}],k=function(){function t(){}return t.\u0275mod=b.Fb({type:t}),t.\u0275inj=b.Eb({factory:function(e){return new(e||t)},imports:[[i.c,o.a,c.I,r.i.forChild(v),h.a]]}),t}()}}]);