(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{k6xi:function(t,e,n){"use strict";n.r(e),n.d(e,"LastTopResultsPageModule",function(){return k});var i=n("ofXK"),o=n("3Pt+"),r=n("tyNb"),c=n("TEn/"),s=n("cygB"),a=n("pLZG"),b=n("fXoL"),l=n("H2Ii");function p(t,e){if(1&t&&(b.Lb(0,"ion-select-option",9),b.lc(1),b.Wb(2,"date"),b.Kb()),2&t){var n=e.$implicit;b.bc("value",n.uuid),b.yb(1),b.nc(" ",n.titel+" "+b.Yb(2,2,n.datum,"dd-MM-yy"),"")}}function u(t,e){if(1&t){var n=b.Mb();b.Lb(0,"ion-select",7),b.Tb("ngModelChange",function(t){return b.fc(n),b.Vb(2).competition=t}),b.kc(1,p,3,5,"ion-select-option",8),b.Kb()}if(2&t){var i=b.Vb(2);b.bc("ngModel",i.competition),b.yb(1),b.bc("ngForOf",i.getCompetitions())}}function f(t,e){if(1&t&&(b.Lb(0,"ion-col"),b.Lb(1,"ion-item"),b.Lb(2,"ion-label"),b.lc(3,"Wettkampf"),b.Kb(),b.kc(4,u,2,2,"ion-select",6),b.Kb(),b.Kb()),2&t){var n=b.Vb();b.yb(4),b.bc("ngIf",n.getCompetitions().length>0)}}function g(t,e){if(1&t&&(b.Lb(0,"ion-note",10),b.lc(1),b.Kb()),2&t){var n=b.Vb();b.yb(1),b.nc(" ",n.competitionName()," ")}}function d(t,e){if(1&t){var n=b.Mb();b.Lb(0,"ion-col",11),b.Tb("click",function(t){b.fc(n);var i=e.$implicit;return b.Vb().itemTapped(t,i)}),b.Jb(1,"result-display",12),b.Kb()}if(2&t){var i=e.$implicit,o=b.Vb();b.yb(1),b.bc("item",i)("title",o.getTitle(i))}}var m=function(){function t(t){this.backendService=t,this.items=[],this.toptop={},this.geraete=[],this.backendService.competitions||this.backendService.getCompetitions()}return t.prototype.ngOnInit=function(){var t=this;this.backendService.activateNonCaptionMode(this.backendService.competition).subscribe(function(e){t.geraete=e||[],t.sortItems()}),this.backendService.newLastResults.pipe(Object(a.a)(function(t){return!!t&&!!t.lastTopResults})).subscribe(function(e){t.items=[],t.toptop={},Object.keys(e.lastTopResults).forEach(function(n){var i=e.lastTopResults[n],o=t.toptop[i.wertung.wettkampfdisziplinId];o?o.wertung.endnote<i.wertung.endnote&&(t.toptop[i.wertung.wettkampfdisziplinId]=i):t.toptop[i.wertung.wettkampfdisziplinId]=i}),Object.keys(t.toptop).forEach(function(e){t.items.push(t.toptop[e])}),t.sortItems()})},t.prototype.sortItems=function(){var t=this;this.items=this.items.sort(function(e,n){var i=e.programm.localeCompare(n.programm);return 0===i&&(i=t.geraetOrder(e.geraet)-t.geraetOrder(n.geraet)),i})},Object.defineProperty(t.prototype,"stationFreezed",{get:function(){return this.backendService.stationFreezed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"competition",{get:function(){return this.backendService.competition||""},set:function(t){var e=this;this.stationFreezed||(this.backendService.getDurchgaenge(t),this.backendService.activateNonCaptionMode(this.backendService.competition).subscribe(function(t){e.geraete=t||[],e.sortItems()}))},enumerable:!1,configurable:!0}),t.prototype.getCompetitions=function(){return this.backendService.competitions||[]},t.prototype.competitionName=function(){var t=this;if(!this.backendService.competitions)return"";var e=this.backendService.competitions.filter(function(e){return e.uuid===t.backendService.competition}).map(function(t){return t.titel+", am "+(t.datum+"T").split("T")[0].split("-").reverse().join("-")});return 1===e.length?e[0]:""},t.prototype.geraetOrder=function(t){return this.geraete?this.geraete.findIndex(function(e){return e.id===t}):0},t.prototype.geraetText=function(t){if(!this.geraete)return"";var e=this.geraete.filter(function(e){return e.id===t}).map(function(t){return t.name});return 1===e.length?e[0]:""},t.prototype.getTitle=function(t){return t.programm+" - "+this.geraetText(t.geraet)},t.\u0275fac=function(e){return new(e||t)(b.Ib(s.a))},t.\u0275cmp=b.Cb({type:t,selectors:[["app-last-top-results"]],decls:18,vars:3,consts:[["slot","start"],["slot","icon-only","name","menu"],["no-padding",""],[4,"ngIf"],["slot","end",4,"ngIf"],["class","align-self-start","size-xs","12","size-md","6","size-lg","4","size-xl","2","col-12","","col-sm-6","","col-lg-4","","col-xl-2","",3,"click",4,"ngFor","ngForOf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["slot","end"],["size-xs","12","size-md","6","size-lg","4","size-xl","2","col-12","","col-sm-6","","col-lg-4","","col-xl-2","",1,"align-self-start",3,"click"],[3,"item","title"]],template:function(t,e){1&t&&(b.Lb(0,"ion-header"),b.Lb(1,"ion-toolbar"),b.Lb(2,"ion-buttons",0),b.Lb(3,"ion-menu-toggle"),b.Lb(4,"ion-button"),b.Jb(5,"ion-icon",1),b.Kb(),b.Kb(),b.Kb(),b.Lb(6,"ion-title"),b.Lb(7,"ion-grid",2),b.Lb(8,"ion-row"),b.Lb(9,"ion-col"),b.Lb(10,"ion-label"),b.lc(11,"Top Resultate"),b.Kb(),b.Kb(),b.kc(12,f,5,1,"ion-col",3),b.Kb(),b.Kb(),b.Kb(),b.kc(13,g,2,1,"ion-note",4),b.Kb(),b.Kb(),b.Lb(14,"ion-content"),b.Lb(15,"ion-grid",2),b.Lb(16,"ion-row"),b.kc(17,d,2,2,"ion-col",5),b.Kb(),b.Kb(),b.Kb()),2&t&&(b.yb(12),b.bc("ngIf",!e.competition),b.yb(1),b.bc("ngIf",e.competition),b.yb(4),b.bc("ngForOf",e.items))},directives:[c.n,c.J,c.h,c.y,c.g,c.o,c.I,c.m,c.B,c.j,c.v,i.m,c.k,i.l,c.q,c.D,c.Q,o.d,o.g,c.E,c.z,l.a],pipes:[i.e],styles:[""]}),t}(),h=n("bDjW"),v=[{path:"",component:m}],k=function(){function t(){}return t.\u0275mod=b.Gb({type:t}),t.\u0275inj=b.Fb({factory:function(e){return new(e||t)},imports:[[i.c,o.a,c.K,r.i.forChild(v),h.a]]}),t}()}}]);