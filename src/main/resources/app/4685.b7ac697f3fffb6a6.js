"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4685],{4685:(J,R,c)=>{c.r(R),c.d(R,{RegJudgelistPageModule:()=>U});var d=c(177),h=c(4341),s=c(4742),f=c(305),b=c(4412),_=c(1413),C=c(7673),u=c(5964),g=c(6697),p=c(6354),I=c(152),k=c(3294),j=c(8141),m=c(5558),v=c(7647),e=c(4438),F=c(2872),T=c(2350);function E(n,l){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nrm(2,"br"),e.k0s()),2&n){const t=l.$implicit;e.R7$(),e.JRh(t)}}function S(n,l){if(1&n&&(e.j41(0,"ion-note",4),e.DNE(1,E,3,1,"span",5),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.getCommentLines())}}let y=(()=>{class n{judgeregistration;status;selectedDisciplinlist;selected=new e.bkB;ngOnInit(){}getProgramList(){var t=[];return void 0===this.selectedDisciplinlist&&(this.selectedDisciplinlist=[]),this.selectedDisciplinlist.forEach(i=>{void 0===t.find(o=>o.program==i.program)&&t.push(i)}),t}getProgrammDisciplinText(t){return t.program+"/"+t.disziplin}getProgrammText(t){return t.program}getCommentLines(){return this.judgeregistration.comment.split("\n")}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=e.VBU({type:n,selectors:[["app-reg-judge-item"]],inputs:{judgeregistration:"judgeregistration",status:"status",selectedDisciplinlist:"selectedDisciplinlist"},outputs:{selected:"selected"},standalone:!1,decls:9,vars:6,consts:[[3,"click"],["slot","start"],["src","assets/imgs/chief.png"],["slot","end",4,"ngIf"],["slot","end"],[4,"ngFor","ngForOf"]],template:function(i,o){1&i&&(e.j41(0,"ion-item",0),e.bIt("click",function(){return o.selected?o.selected.emit(o.judgeregistration):{}}),e.j41(1,"ion-avatar",1),e.nrm(2,"img",2),e.k0s(),e.j41(3,"ion-label"),e.EFF(4),e.nrm(5,"br"),e.j41(6,"small"),e.EFF(7),e.k0s()(),e.DNE(8,S,2,1,"ion-note",3),e.k0s()),2&i&&(e.R7$(4),e.E5c("",o.judgeregistration.name,", ",o.judgeregistration.vorname," (",o.judgeregistration.geschlecht,")"),e.R7$(3),e.Lme("",o.judgeregistration.mobilephone,", ",o.judgeregistration.mail,""),e.R7$(),e.Y8G("ngIf",o.judgeregistration.comment))},dependencies:[d.Sq,d.bT,s.mC,s.uz,s.he,s.JI],encapsulation:2})}return n})();function M(n,l){if(1&n&&(e.j41(0,"ion-select-option",11),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const t=l.$implicit;e.Y8G("value",t.uuid),e.R7$(),e.SpI(" ",t.titel+" "+e.i5U(2,2,t.datum,"dd-MM-yy"),"")}}function P(n,l){if(1&n){const t=e.RV6();e.j41(0,"ion-select",9),e.mxI("ngModelChange",function(o){e.eBV(t);const r=e.XpG(2);return e.DH7(r.competition,o)||(r.competition=o),e.Njj(o)}),e.DNE(1,M,3,5,"ion-select-option",10),e.k0s()}if(2&n){const t=e.XpG(2);e.R50("ngModel",t.competition),e.R7$(),e.Y8G("ngForOf",t.getCompetitions())}}function L(n,l){if(1&n&&(e.j41(0,"ion-col")(1,"ion-item")(2,"ion-label"),e.EFF(3,"Wettkampf"),e.k0s(),e.DNE(4,P,2,2,"ion-select",8),e.k0s()()),2&n){const t=e.XpG();e.R7$(4),e.Y8G("ngIf",t.getCompetitions().length>0)}}function D(n,l){if(1&n&&(e.j41(0,"ion-note",12),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.competitionName()," ")}}function G(n,l){1&n&&(e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2,"loading ..."),e.k0s(),e.nrm(3,"ion-spinner"),e.k0s())}function $(n,l){if(1&n){const t=e.RV6();e.j41(0,"ion-item-option",19),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,r=e.sdS(1),a=e.XpG(2);return e.Njj(a.delete(o,r))}),e.nrm(1,"ion-icon",17),e.EFF(2," L\xf6schen "),e.k0s()}}function B(n,l){if(1&n){const t=e.RV6();e.j41(0,"ion-item-sliding",null,0)(2,"app-reg-judge-item",14),e.bIt("click",function(){const o=e.eBV(t).$implicit,r=e.sdS(1),a=e.XpG(2);return e.Njj(a.itemTapped(o,r))}),e.k0s(),e.j41(3,"ion-item-options",15)(4,"ion-item-option",16),e.bIt("click",function(){const o=e.eBV(t).$implicit,r=e.sdS(1),a=e.XpG(2);return e.Njj(a.edit(o,r))}),e.nrm(5,"ion-icon",17),e.EFF(6),e.k0s(),e.DNE(7,$,3,0,"ion-item-option",18),e.k0s()()}if(2&n){const t=l.$implicit,i=e.XpG(2);e.R7$(2),e.Y8G("judgeregistration",t)("selectedDisciplinlist",i.wkPgms),e.R7$(4),e.SpI(" ",i.isLoggedInAsClub()?"Bearbeiten":i.isLoggedIn()?"Best\xe4tigen":"Anzeigen"," "),e.R7$(),e.Y8G("ngIf",i.isLoggedInAsClub())}}function x(n,l){if(1&n&&(e.j41(0,"ion-content")(1,"ion-list"),e.DNE(2,G,4,0,"ion-item",4),e.nI1(3,"async"),e.DNE(4,B,8,4,"ion-item-sliding",13),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",e.bMT(3,2,t.busy)||!(t.competition&&t.currentRegistration&&t.sJudgeRegistrationList)),e.R7$(2),e.Y8G("ngForOf",t.filteredStartList)}}function O(n,l){if(1&n){const t=e.RV6();e.j41(0,"ion-button",20),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.createRegistration())}),e.nrm(1,"ion-icon",21),e.EFF(2," Neue Anmeldung... "),e.k0s()}}const A=[{path:"",component:(()=>{class n{navCtrl;route;backendService;alertCtrl;busy=new b.t(!1);currentRegistration;currentRegId;wkPgms;tMyQueryStream=new _.B;sFilterTask=void 0;sFilteredRegistrationList;sJudgeRegistrationList;sMyQuery;sSyncActions=[];constructor(t,i,o,r){this.navCtrl=t,this.route=i,this.backendService=o,this.alertCtrl=r,this.backendService.competitions||this.backendService.getCompetitions()}ngOnInit(){this.busy.next(!0);const t=this.route.snapshot.paramMap.get("wkId");this.currentRegId=parseInt(this.route.snapshot.paramMap.get("regId")),t?this.competition=t:this.backendService.competition&&(this.competition=this.backendService.competition)}ionViewWillEnter(){this.refreshList()}refreshList(){this.busy.next(!0),this.currentRegistration=void 0,this.backendService.getClubRegistrations(this.competition).pipe((0,u.p)(t=>!!t.find(i=>i.id===this.currentRegId)),(0,g.s)(1)).subscribe(t=>{this.currentRegistration=t.find(i=>i.id===this.currentRegId),console.log("ask Judgees-list for registration"),this.backendService.loadJudgeRegistrations(this.competition,this.currentRegId).subscribe(i=>{this.busy.next(!1),this.judgeregistrations=i,this.tMyQueryStream.pipe((0,u.p)(r=>!!r&&!!r.target),(0,p.T)(r=>r.target.value||"*"),(0,I.B)(300),(0,k.F)(),(0,j.M)(r=>this.busy.next(!0)),(0,m.n)(this.runQuery(i)),(0,v.u)()).subscribe(r=>{this.sFilteredRegistrationList=r,this.busy.next(!1)})})})}set competition(t){(!this.currentRegistration||t!==this.backendService.competition)&&this.backendService.loadJudgeProgramDisziplinList(this.competition).subscribe(i=>{this.wkPgms=i})}get competition(){return this.backendService.competition||""}getCompetitions(){return this.backendService.competitions||[]}competitionName(){return this.backendService.competitionName}runQuery(t){return i=>{const o=i.trim(),r=[];return o&&t&&t.forEach(a=>{this.filter(o)(a)&&r.push(a)}),(0,C.of)(r)}}set judgeregistrations(t){this.sJudgeRegistrationList=t,this.reloadList(this.sMyQuery)}get judgeregistrations(){return this.sJudgeRegistrationList}get filteredStartList(){return this.sFilteredRegistrationList||this.sJudgeRegistrationList||[]}reloadList(t){this.tMyQueryStream.next(t)}itemTapped(t,i){i.getOpenAmount().then(o=>{o>0?i.close():i.open("end")})}isLoggedInAsClub(){return this.backendService.loggedIn&&this.backendService.authenticatedClubId===this.currentRegId+""}isLoggedInAsAdmin(){return this.backendService.loggedIn&&!!this.backendService.authenticatedClubId}isLoggedIn(){return this.backendService.loggedIn}filter(t){const i=t.toUpperCase().split(" ");return o=>"*"===t.trim()||i.filter(r=>{if(o.name.toUpperCase().indexOf(r)>-1||o.vorname.toUpperCase().indexOf(r)>-1||o.mobilephone.toUpperCase().indexOf(r)>-1||o.mail.toUpperCase().indexOf(r)>-1||o.comment.toUpperCase().indexOf(r)>-1)return!0}).length===i.length}createRegistration(){this.navCtrl.navigateForward(`reg-judgelist/${this.backendService.competition}/${this.currentRegId}/0`)}edit(t,i){this.navCtrl.navigateForward(`reg-judgelist/${this.backendService.competition}/${this.currentRegId}/${t.id}`),i.close()}delete(t,i){i.close(),this.alertCtrl.create({header:"Achtung",subHeader:"L\xf6schen der Wertungsrichter-Anmeldung am Wettkampf",message:"Hiermit wird die Anmeldung von "+t.name+", "+t.vorname+" am Wettkampf gel\xf6scht.",buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{this.backendService.deleteJudgeRegistration(this.backendService.competition,this.currentRegId,t).subscribe(()=>{this.refreshList(),this.navCtrl.pop()})}}]}).then(r=>r.present())}static \u0275fac=function(i){return new(i||n)(e.rXU(F.q9),e.rXU(f.nX),e.rXU(T.m),e.rXU(s.hG))};static \u0275cmp=e.VBU({type:n,selectors:[["app-reg-judgelist"]],standalone:!1,decls:18,vars:5,consts:[["slidingJudgeRegistrationItem",""],["slot","start"],["defaultHref","/"],["no-padding",""],[4,"ngIf"],["slot","end",4,"ngIf"],["placeholder","Search","showCancelButton","never",3,"ngModelChange","ionInput","ionCancel","ngModel"],["size","large","expand","block","color","success",3,"click",4,"ngIf"],["label","Wettkampf","placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["label","Wettkampf","placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["slot","end"],[4,"ngFor","ngForOf"],[3,"click","judgeregistration","selectedDisciplinlist"],["side","end"],["color","primary",3,"click"],["name","arrow-forward-circle-outline","ios","md-arrow-forward-circle-outline"],["color","danger",3,"click",4,"ngIf"],["color","danger",3,"click"],["size","large","expand","block","color","success",3,"click"],["slot","start","name","add"]],template:function(i,o){1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title")(5,"ion-grid",3)(6,"ion-row")(7,"ion-col")(8,"ion-label"),e.EFF(9,"Wertungsrichter-Anmeldungen"),e.k0s()(),e.DNE(10,L,5,1,"ion-col",4),e.k0s()()(),e.DNE(11,D,2,1,"ion-note",5),e.k0s(),e.j41(12,"ion-searchbar",6),e.mxI("ngModelChange",function(a){return e.DH7(o.sMyQuery,a)||(o.sMyQuery=a),a}),e.bIt("ionInput",function(a){return o.reloadList(a)})("ionCancel",function(a){return o.reloadList(a)}),e.k0s()(),e.DNE(13,x,5,4,"ion-content",4),e.j41(14,"ion-footer")(15,"ion-toolbar")(16,"ion-list"),e.DNE(17,O,3,0,"ion-button",7),e.k0s()()()),2&i&&(e.R7$(10),e.Y8G("ngIf",!o.competition),e.R7$(),e.Y8G("ngIf",o.competition),e.R7$(),e.R50("ngModel",o.sMyQuery),e.R7$(),e.Y8G("ngIf",o.wkPgms&&o.wkPgms.length>0),e.R7$(4),e.Y8G("ngIf",o.isLoggedInAsClub()))},dependencies:[d.Sq,d.bT,h.BC,h.vS,s.Jm,s.QW,s.hU,s.W9,s.M0,s.lO,s.eU,s.iq,s.uz,s.LU,s.CE,s.A7,s.he,s.nf,s.JI,s.ln,s.S1,s.Nm,s.Ip,s.w2,s.BC,s.ai,s.Je,s.Gw,s.el,y,d.Jj,d.vh],encapsulation:2})}return n})()}];let N=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({imports:[f.iI.forChild(A),f.iI]})}return n})(),U=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({imports:[d.MD,h.YN,s.bv,N]})}return n})()},152:(J,R,c)=>{c.d(R,{B:()=>f});var d=c(3888),h=c(9974),s=c(4360);function f(b,_=d.E){return(0,h.N)((C,u)=>{let g=null,p=null,I=null;const k=()=>{if(g){g.unsubscribe(),g=null;const m=p;p=null,u.next(m)}};function j(){const m=I+b,v=_.now();if(v<m)return g=this.schedule(void 0,m-v),void u.add(g);k()}C.subscribe((0,s._)(u,m=>{p=m,I=_.now(),g||(g=_.schedule(j,b),u.add(g))},()=>{k(),u.complete()},void 0,()=>{p=g=null}))})}}}]);