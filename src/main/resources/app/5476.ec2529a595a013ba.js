"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5476],{5476:(Y,_,r)=>{r.r(_),r.d(_,{HomePageModule:()=>I});var l=r(6814),g=r(95),s=r(3582),m=r(335),p=r(5612),h=r(7398),e=r(2029),u=r(4414),f=r(9253);function x(n,a){if(1&n&&(e.TgZ(0,"ion-label"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE(" ",t.durchgang,", ",t.geraetName()," ")}}function b(n,a){if(1&n&&(e.TgZ(0,"ion-note",15),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ","Riege "+t.step," ")}}function k(n,a){1&n&&e._UZ(0,"ion-icon",16)}function S(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label"),e._uU(3),e.qZA()(),e.TgZ(4,"ion-item"),e.YNc(5,x,2,2,"ion-label",4),e.qZA(),e.TgZ(6,"ion-item-sliding",null,6)(8,"ion-item",7),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(7),c=e.oxw();return e.KtG(c.itemTapped(i))}),e.TgZ(9,"ion-label"),e._uU(10),e.qZA(),e.YNc(11,b,2,1,"ion-note",8),e.YNc(12,k,1,0,"ion-icon",9),e.qZA(),e.TgZ(13,"ion-item-options",10)(14,"ion-item-option",11),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(7),c=e.oxw();return e.KtG(c.prevStep(i))}),e._UZ(15,"ion-icon",12),e._uU(16," Vorherige Riege "),e.qZA()(),e.TgZ(17,"ion-item-options",13)(18,"ion-item-option",11),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(7),c=e.oxw();return e.KtG(c.nextStep(i))}),e._UZ(19,"ion-icon",14),e._uU(20," N\xe4chste Riege "),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.competitionName()),e.xp6(2),e.Q6J("ngIf",t.durchgang&&t.geraet),e.xp6(5),e.Oqu(t.geraet&&t.getSteps()?"Riege ("+t.getSteps()[0]+" bis "+t.getSteps()[t.getSteps().length-1]+")":"Keine Daten"),e.xp6(1),e.Q6J("ngIf",t.geraet&&t.getSteps()&&t.getSteps().length>0),e.xp6(1),e.Q6J("ngIf",t.geraet&&t.getSteps()),e.xp6(2),e.Q6J("disabled",!t.geraet||!t.getSteps()),e.xp6(4),e.Q6J("disabled",!t.geraet||!t.getSteps())}}function T(n,a){if(1&n&&(e.TgZ(0,"ion-select-option",20),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.uuid),e.xp6(1),e.hij(" ",t.titel+" "+e.xi3(2,2,t.datum,"dd-MM-yy"),"")}}function Z(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-select",18),e.NdJ("ngModelChange",function(i){e.CHM(t);const c=e.oxw(2);return e.KtG(c.competition=i)}),e.YNc(1,T,3,5,"ion-select-option",19),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngModel",t.competition),e.xp6(1),e.Q6J("ngForOf",t.getCompetitions())}}function v(n,a){if(1&n&&(e.TgZ(0,"ion-select-option",20),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function A(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-select",18),e.NdJ("ngModelChange",function(i){e.CHM(t);const c=e.oxw(2);return e.KtG(c.durchgang=i)}),e.YNc(1,v,2,2,"ion-select-option",19),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngModel",t.durchgang),e.xp6(1),e.Q6J("ngForOf",t.getDurchgaenge())}}function H(n,a){if(1&n&&(e.TgZ(0,"ion-select-option",20),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function J(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-select",18),e.NdJ("ngModelChange",function(i){e.CHM(t);const c=e.oxw(2);return e.KtG(c.geraet=i)}),e.YNc(1,H,2,2,"ion-select-option",19),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngModel",t.geraet),e.xp6(1),e.Q6J("ngForOf",t.getGeraete())}}function N(n,a){if(1&n&&(e.TgZ(0,"ion-note",15),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ","Riege "+t.step," ")}}function C(n,a){1&n&&e._UZ(0,"ion-icon",16)}function w(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label"),e._uU(3,"Wettkampf"),e.qZA(),e.YNc(4,Z,2,2,"ion-select",17),e.qZA(),e.TgZ(5,"ion-item")(6,"ion-label"),e._uU(7,"Durchgang"),e.qZA(),e.YNc(8,A,2,2,"ion-select",17),e.qZA(),e.TgZ(9,"ion-item")(10,"ion-label"),e._uU(11,"Ger\xe4t"),e.qZA(),e.YNc(12,J,2,2,"ion-select",17),e.qZA(),e.TgZ(13,"ion-item-sliding",null,6)(15,"ion-item",7),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(14),c=e.oxw();return e.KtG(c.itemTapped(i))}),e.TgZ(16,"ion-label"),e._uU(17),e.qZA(),e.YNc(18,N,2,1,"ion-note",8),e.YNc(19,C,1,0,"ion-icon",9),e.qZA(),e.TgZ(20,"ion-item-options",10)(21,"ion-item-option",11),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(14),c=e.oxw();return e.KtG(c.prevStep(i))}),e._uU(22," Vorherige Riege "),e.qZA()(),e.TgZ(23,"ion-item-options",13)(24,"ion-item-option",11),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(14),c=e.oxw();return e.KtG(c.nextStep(i))}),e._uU(25," N\xe4chste Riege "),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.getCompetitions()),e.xp6(4),e.Q6J("ngIf",t.competition&&t.getDurchgaenge()&&t.getDurchgaenge().length>0),e.xp6(4),e.Q6J("ngIf",t.durchgang&&t.getGeraete()&&t.getGeraete().length>0),e.xp6(5),e.Oqu(t.geraet&&t.getSteps()?"Riege ("+t.getSteps()[0]+" bis "+t.getSteps()[t.getSteps().length-1]+")":"Keine Daten"),e.xp6(1),e.Q6J("ngIf",t.geraet&&t.getSteps()&&t.getSteps().length>0),e.xp6(1),e.Q6J("ngIf",t.geraet&&t.getSteps()),e.xp6(2),e.Q6J("disabled",!t.geraet||!t.getSteps()),e.xp6(3),e.Q6J("disabled",!t.geraet||!t.getSteps())}}function M(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.navToStation())}),e._UZ(1,"ion-icon",22),e._uU(2," Resultate "),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",!(t.geraet&&t.getSteps()))}}function P(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",21),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.navToStation())}),e._UZ(1,"ion-icon",23),e._uU(2," Resultate "),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",!(t.geraet&&t.getSteps()))}}function U(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-list")(1,"ion-button",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.unlock())}),e._UZ(2,"ion-icon",25),e._uU(3,"Einstellung zur\xfccksetzen "),e.qZA()()}}function Q(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-list")(1,"ion-button",26),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.logout())}),e._UZ(2,"ion-icon",27),e._uU(3,"Abmelden "),e.qZA()()}}let q=(()=>{class n{constructor(t,o,i){this.navCtrl=t,this.backendService=o,this.alertCtrl=i,this.durchgangopen=!1,this.backendService.getCompetitions(),this.backendService.durchgangStarted.pipe((0,h.U)(c=>c.filter(d=>(0,p.gT)(d.durchgang)===(0,p.gT)(this.backendService.durchgang)&&d.wettkampfUUID===this.backendService.competition).length>0)).subscribe(c=>{this.durchgangstate=c?"gestartet":"gesperrt",this.durchgangopen=c})}ngOnInit(){this.backendService.competition&&this.backendService.getDurchgaenge(this.backendService.competition)}get isLocked(){return this.backendService.stationFreezed}get isOpenAndActive(){return this.durchgangopen&&this.backendService.isWebsocketConnected()}get isLoggedIn(){return this.backendService.loggedIn}set competition(t){this.isLocked||this.backendService.getDurchgaenge(t)}get competition(){return this.backendService.competition||""}set durchgang(t){this.isLocked||this.backendService.getGeraete(this.competition,t)}get durchgang(){return this.backendService.durchgang||""}set geraet(t){this.isLocked||this.backendService.getSteps(this.competition,this.durchgang,t)}get geraet(){return this.backendService.geraet||-1}set step(t){this.backendService.getWertungen(this.competition,this.durchgang,this.geraet,t)}get step(){return this.backendService.step||-1}itemTapped(t){t.getOpenAmount().then(o=>{o>10||o<-10?t.close():t.open("end")})}nextStep(t){this.step=this.backendService.nextStep(),t.close()}prevStep(t){this.step=this.backendService.prevStep(),t.close()}getCompetitions(){return this.backendService.competitions}competitionName(){if(!this.backendService.competitions)return"";const t=this.backendService.competitions.filter(o=>o.uuid===this.backendService.competition).map(o=>o.titel+", am "+(o.datum+"T").split("T")[0].split("-").reverse().join("-"));return 1===t.length?t[0]:""}geraetName(){if(!this.backendService.geraete)return"";const t=this.backendService.geraete.filter(o=>o.id===this.backendService.geraet).map(o=>o.name);return 1===t.length?t[0]:""}getDurchgaenge(){return this.backendService.durchgaenge}getGeraete(){return this.backendService.geraete}getSteps(){return!this.backendService.steps&&this.backendService.geraet&&this.backendService.getSteps(this.competition,this.durchgang,this.geraet),this.backendService.steps}navToStation(){this.navCtrl.navigateForward("station")}unlock(){const t=this.competitionName()+"/"+this.durchgang+"/"+this.geraetName();this.alertCtrl.create({header:"Info",message:'Die Fixierung auf die Station "'+t+'" wird aufgehoben.<br>Du kannst dann die Station frei einstellen.',buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{this.backendService.unlock()}}]}).then(i=>i.present())}logout(){this.alertCtrl.create({header:"Achtung",subHeader:"Nach dem Abmelden k\xf6nnen keine weiteren Resultate mehr erfasst werden.",message:"F\xfcr die Erfassung weiterer Resultate wird eine Neuanmeldung erforderlich.",buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{this.backendService.logout()}}]}).then(o=>o.present())}finish(){const t=this.geraetName()+"/Riege #"+this.step,o=this.alertCtrl.create({header:"Achtung",message:'Nach dem Abschliessen der Station "'+t+'" k\xf6nnen die erfassten Wertungen nur noch im Wettkampf-B\xfcro korrigiert werden.',buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{const i=o.then(c=>c.dismiss());return this.backendService.finishStation(this.competition,this.durchgang,this.geraet,this.step).subscribe(c=>{0===c.length&&i.then(()=>{this.navCtrl.pop()})}),!1}}]});o.then(i=>i.present())}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(u.SH),e.Y36(f.v),e.Y36(u.Br))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-page-home"]],decls:18,vars:8,consts:[[3,"translucent"],["slot","start"],["slot","icon-only","name","menu"],[3,"fullscreen"],[4,"ngIf"],["size","large","expand","block","color","primary",3,"disabled","click",4,"ngIf"],["slidingStepItem",""],[3,"click"],["slot","end",4,"ngIf"],["slot","end","name","arrow-forward-circle-outline",4,"ngIf"],["side","start"],["color","secondary",3,"disabled","click"],["name","arrow-back-circle-outline"],["side","end"],["name","arrow-forward-circle-outline"],["slot","end"],["slot","end","name","arrow-forward-circle-outline"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["size","large","expand","block","color","primary",3,"disabled","click"],["slot","start","name","list"],["slot","start","name","create"],["size","large","expand","block","color","warning",3,"click"],["slot","start","name","unlock"],["size","large","expand","block","color","danger",3,"click"],["slot","start","name","log-out"]],template:function(o,i){1&o&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-menu-toggle")(4,"ion-button"),e._UZ(5,"ion-icon",2),e.qZA()()(),e.TgZ(6,"ion-title"),e._uU(7,"Wettkampf App"),e.qZA()()(),e.TgZ(8,"ion-content",3),e.YNc(9,S,21,7,"ion-list",4),e.YNc(10,w,26,8,"ion-list",4),e.TgZ(11,"ion-list"),e.YNc(12,M,3,1,"ion-button",5),e.YNc(13,P,3,1,"ion-button",5),e.qZA()(),e.TgZ(14,"ion-footer")(15,"ion-toolbar"),e.YNc(16,U,4,0,"ion-list",4),e.YNc(17,Q,4,0,"ion-list",4),e.qZA()()),2&o&&(e.Q6J("translucent",!0),e.xp6(8),e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("ngIf",i.isLocked),e.xp6(1),e.Q6J("ngIf",!i.isLocked),e.xp6(2),e.Q6J("ngIf",!i.isLoggedIn),e.xp6(1),e.Q6J("ngIf",i.isLoggedIn),e.xp6(3),e.Q6J("ngIf",i.isLocked),e.xp6(1),e.Q6J("ngIf",i.isLoggedIn))},dependencies:[l.sg,l.O5,g.JJ,g.On,s.YG,s.Sm,s.W2,s.fr,s.Gu,s.gu,s.Ie,s.u8,s.IK,s.td,s.Q$,s.q_,s.zc,s.uN,s.t9,s.n0,s.wd,s.sr,s.QI,l.uU],encapsulation:2})}return n})(),I=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[l.ez,g.u5,s.Pc,m.Bz.forChild([{path:"",component:q}])]})}return n})()}}]);