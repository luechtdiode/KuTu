"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4902],{4902:(I,_,a)=>{a.r(_),a.d(_,{HomePageModule:()=>q});var l=a(6895),g=a(4719),r=a(9928),d=a(229),p=a(8204),m=a(4850),e=a(5675),h=a(600);function f(n,s){if(1&n&&(e.TgZ(0,"ion-label"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE(" ",t.durchgang,", ",t.geraetName()," ")}}function x(n,s){if(1&n&&(e.TgZ(0,"ion-note",15),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ","Riege "+t.step," ")}}function b(n,s){1&n&&e._UZ(0,"ion-icon",16)}function k(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label"),e._uU(3),e.qZA()(),e.TgZ(4,"ion-item"),e.YNc(5,f,2,2,"ion-label",4),e.qZA(),e.TgZ(6,"ion-item-sliding",null,6)(8,"ion-item",7),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(7),c=e.oxw();return e.KtG(c.itemTapped(o))}),e.TgZ(9,"ion-label"),e._uU(10),e.qZA(),e.YNc(11,x,2,1,"ion-note",8),e.YNc(12,b,1,0,"ion-icon",9),e.qZA(),e.TgZ(13,"ion-item-options",10)(14,"ion-item-option",11),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(7),c=e.oxw();return e.KtG(c.prevStep(o))}),e._UZ(15,"ion-icon",12),e._uU(16," Vorherige Riege "),e.qZA()(),e.TgZ(17,"ion-item-options",13)(18,"ion-item-option",11),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(7),c=e.oxw();return e.KtG(c.nextStep(o))}),e._UZ(19,"ion-icon",14),e._uU(20," N\xe4chste Riege "),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.competitionName()),e.xp6(2),e.Q6J("ngIf",t.durchgang&&t.geraet),e.xp6(5),e.Oqu(t.geraet&&t.getSteps()?"Riege ("+t.getSteps()[0]+" bis "+t.getSteps()[t.getSteps().length-1]+")":"Keine Daten"),e.xp6(1),e.Q6J("ngIf",t.geraet&&t.getSteps()&&t.getSteps().length>0),e.xp6(1),e.Q6J("ngIf",t.geraet&&t.getSteps()),e.xp6(2),e.Q6J("disabled",!t.geraet||!t.getSteps()),e.xp6(4),e.Q6J("disabled",!t.geraet||!t.getSteps())}}function S(n,s){if(1&n&&(e.TgZ(0,"ion-select-option",20),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.uuid),e.xp6(1),e.hij(" ",t.titel+" "+e.xi3(2,2,t.datum,"dd-MM-yy"),"")}}function T(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"ion-select",18),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw(2);return e.KtG(c.competition=o)}),e.YNc(1,S,3,5,"ion-select-option",19),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngModel",t.competition),e.xp6(1),e.Q6J("ngForOf",t.getCompetitions())}}function Z(n,s){if(1&n&&(e.TgZ(0,"ion-select-option",20),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function v(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"ion-select",18),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw(2);return e.KtG(c.durchgang=o)}),e.YNc(1,Z,2,2,"ion-select-option",19),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngModel",t.durchgang),e.xp6(1),e.Q6J("ngForOf",t.getDurchgaenge())}}function A(n,s){if(1&n&&(e.TgZ(0,"ion-select-option",20),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function H(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"ion-select",18),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw(2);return e.KtG(c.geraet=o)}),e.YNc(1,A,2,2,"ion-select-option",19),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngModel",t.geraet),e.xp6(1),e.Q6J("ngForOf",t.getGeraete())}}function J(n,s){if(1&n&&(e.TgZ(0,"ion-note",15),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ","Riege "+t.step," ")}}function N(n,s){1&n&&e._UZ(0,"ion-icon",16)}function C(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label"),e._uU(3,"Wettkampf"),e.qZA(),e.YNc(4,T,2,2,"ion-select",17),e.qZA(),e.TgZ(5,"ion-item")(6,"ion-label"),e._uU(7,"Durchgang"),e.qZA(),e.YNc(8,v,2,2,"ion-select",17),e.qZA(),e.TgZ(9,"ion-item")(10,"ion-label"),e._uU(11,"Ger\xe4t"),e.qZA(),e.YNc(12,H,2,2,"ion-select",17),e.qZA(),e.TgZ(13,"ion-item-sliding",null,6)(15,"ion-item",7),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(14),c=e.oxw();return e.KtG(c.itemTapped(o))}),e.TgZ(16,"ion-label"),e._uU(17),e.qZA(),e.YNc(18,J,2,1,"ion-note",8),e.YNc(19,N,1,0,"ion-icon",9),e.qZA(),e.TgZ(20,"ion-item-options",10)(21,"ion-item-option",11),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(14),c=e.oxw();return e.KtG(c.prevStep(o))}),e._UZ(22,"ion-icon",12),e._uU(23," Vorherige Riege "),e.qZA()(),e.TgZ(24,"ion-item-options",13)(25,"ion-item-option",11),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(14),c=e.oxw();return e.KtG(c.nextStep(o))}),e._UZ(26,"ion-icon",14),e._uU(27," N\xe4chste Riege "),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.getCompetitions()),e.xp6(4),e.Q6J("ngIf",t.competition&&t.getDurchgaenge()&&t.getDurchgaenge().length>0),e.xp6(4),e.Q6J("ngIf",t.durchgang&&t.getGeraete()&&t.getGeraete().length>0),e.xp6(5),e.Oqu(t.geraet&&t.getSteps()?"Riege ("+t.getSteps()[0]+" bis "+t.getSteps()[t.getSteps().length-1]+")":"Keine Daten"),e.xp6(1),e.Q6J("ngIf",t.geraet&&t.getSteps()&&t.getSteps().length>0),e.xp6(1),e.Q6J("ngIf",t.geraet&&t.getSteps()),e.xp6(2),e.Q6J("disabled",!t.geraet||!t.getSteps()),e.xp6(4),e.Q6J("disabled",!t.geraet||!t.getSteps())}}function P(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.navToStation())}),e._UZ(1,"ion-icon",22),e._uU(2," Resultate "),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",!(t.geraet&&t.getSteps()))}}function M(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.navToStation())}),e._UZ(1,"ion-icon",23),e._uU(2," Resultate "),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",!(t.geraet&&t.getSteps()))}}function w(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"ion-list")(1,"ion-button",24),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.unlock())}),e._UZ(2,"ion-icon",25),e._uU(3,"Einstellung zur\xfccksetzen "),e.qZA()()}}function U(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"ion-list")(1,"ion-button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.logout())}),e._UZ(2,"ion-icon",27),e._uU(3,"Abmelden "),e.qZA()()}}let Q=(()=>{class n{constructor(t,i,o){this.navCtrl=t,this.backendService=i,this.alertCtrl=o,this.durchgangopen=!1,this.backendService.getCompetitions(),this.backendService.durchgangStarted.pipe((0,m.U)(c=>c.filter(u=>(0,p.gT)(u.durchgang)===(0,p.gT)(this.backendService.durchgang)&&u.wettkampfUUID===this.backendService.competition).length>0)).subscribe(c=>{this.durchgangstate=c?"gestartet":"gesperrt",this.durchgangopen=c})}ngOnInit(){this.backendService.competition&&this.backendService.getDurchgaenge(this.backendService.competition)}get isLocked(){return this.backendService.stationFreezed}get isOpenAndActive(){return this.durchgangopen&&this.backendService.isWebsocketConnected()}get isLoggedIn(){return this.backendService.loggedIn}set competition(t){this.isLocked||this.backendService.getDurchgaenge(t)}get competition(){return this.backendService.competition||""}set durchgang(t){this.isLocked||this.backendService.getGeraete(this.competition,t)}get durchgang(){return this.backendService.durchgang||""}set geraet(t){this.isLocked||this.backendService.getSteps(this.competition,this.durchgang,t)}get geraet(){return this.backendService.geraet||-1}set step(t){this.backendService.getWertungen(this.competition,this.durchgang,this.geraet,t)}get step(){return this.backendService.step||-1}itemTapped(t){t.getOpenAmount().then(i=>{i>10||i<-10?t.close():t.open("end")})}nextStep(t){this.step=this.backendService.nextStep(),t.close()}prevStep(t){this.step=this.backendService.prevStep(),t.close()}getCompetitions(){return this.backendService.competitions}competitionName(){if(!this.backendService.competitions)return"";const t=this.backendService.competitions.filter(i=>i.uuid===this.backendService.competition).map(i=>i.titel+", am "+(i.datum+"T").split("T")[0].split("-").reverse().join("-"));return 1===t.length?t[0]:""}geraetName(){if(!this.backendService.geraete)return"";const t=this.backendService.geraete.filter(i=>i.id===this.backendService.geraet).map(i=>i.name);return 1===t.length?t[0]:""}getDurchgaenge(){return this.backendService.durchgaenge}getGeraete(){return this.backendService.geraete}getSteps(){return!this.backendService.steps&&this.backendService.geraet&&this.backendService.getSteps(this.competition,this.durchgang,this.geraet),this.backendService.steps}navToStation(){this.navCtrl.navigateForward("station")}unlock(){const t=this.competitionName()+"/"+this.durchgang+"/"+this.geraetName();this.alertCtrl.create({header:"Info",message:'Die Fixierung auf die Station "'+t+'" wird aufgehoben.<br>Du kannst dann die Station frei einstellen.',buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{this.backendService.unlock()}}]}).then(o=>o.present())}logout(){this.alertCtrl.create({header:"Achtung",subHeader:"Nach dem Abmelden k\xf6nnen keine weiteren Resultate mehr erfasst werden.",message:"F\xfcr die Erfassung weiterer Resultate wird eine Neuanmeldung erforderlich.",buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{this.backendService.logout()}}]}).then(i=>i.present())}finish(){const t=this.geraetName()+"/Riege #"+this.step,i=this.alertCtrl.create({header:"Achtung",message:'Nach dem Abschliessen der Station "'+t+'" k\xf6nnen die erfassten Wertungen nur noch im Wettkampf-B\xfcro korrigiert werden.',buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{const o=i.then(c=>c.dismiss());return this.backendService.finishStation(this.competition,this.durchgang,this.geraet,this.step).subscribe(c=>{0===c.length&&o.then(()=>{this.navCtrl.pop()})}),!1}}]});i.then(o=>o.present())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.SH),e.Y36(h.v),e.Y36(r.Br))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-page-home"]],decls:18,vars:8,consts:[[3,"translucent"],["slot","start"],["slot","icon-only","name","menu"],[3,"fullscreen"],[4,"ngIf"],["size","large","expand","block","color","primary",3,"disabled","click",4,"ngIf"],["slidingStepItem",""],[3,"click"],["slot","end",4,"ngIf"],["slot","end","name","arrow-dropright",4,"ngIf"],["side","start"],["color","secondary",3,"disabled","click"],["name","arrow-dropleft-circle","ios","md-arrow-dropleft-circle"],["side","end"],["name","arrow-dropright-circle","ios","md-arrow-dropright-circle"],["slot","end"],["slot","end","name","arrow-dropright"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["size","large","expand","block","color","primary",3,"disabled","click"],["slot","start","name","list"],["slot","start","name","create"],["size","large","expand","block","color","warning",3,"click"],["slot","start","name","unlock"],["size","large","expand","block","color","danger",3,"click"],["slot","start","name","log-out"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-menu-toggle")(4,"ion-button"),e._UZ(5,"ion-icon",2),e.qZA()()(),e.TgZ(6,"ion-title"),e._uU(7,"Wettkampf App"),e.qZA()()(),e.TgZ(8,"ion-content",3),e.YNc(9,k,21,7,"ion-list",4),e.YNc(10,C,28,8,"ion-list",4),e.TgZ(11,"ion-list"),e.YNc(12,P,3,1,"ion-button",5),e.YNc(13,M,3,1,"ion-button",5),e.qZA()(),e.TgZ(14,"ion-footer")(15,"ion-toolbar"),e.YNc(16,w,4,0,"ion-list",4),e.YNc(17,U,4,0,"ion-list",4),e.qZA()()),2&t&&(e.Q6J("translucent",!0),e.xp6(8),e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("ngIf",i.isLocked),e.xp6(1),e.Q6J("ngIf",!i.isLocked),e.xp6(2),e.Q6J("ngIf",!i.isLoggedIn),e.xp6(1),e.Q6J("ngIf",i.isLoggedIn),e.xp6(3),e.Q6J("ngIf",i.isLocked),e.xp6(1),e.Q6J("ngIf",i.isLoggedIn))},dependencies:[l.sg,l.O5,g.JJ,g.On,r.YG,r.Sm,r.W2,r.fr,r.Gu,r.gu,r.Ie,r.u8,r.IK,r.td,r.Q$,r.q_,r.zc,r.uN,r.t9,r.n0,r.sr,r.wd,r.QI,l.uU],encapsulation:2}),n})(),q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.ez,g.u5,r.Pc,d.Bz.forChild([{path:"",component:Q}])]}),n})()}}]);