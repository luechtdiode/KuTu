(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{SFjQ:function(e,t,i){"use strict";i.r(t),i.d(t,"ClubregEditorPageModule",(function(){return p}));var n=i("ofXK"),r=i("3Pt+"),a=i("tyNb"),o=i("TEn/"),s=i("cygB"),d=i("fXoL");function b(e,t){if(1&e&&(d.Kb(0,"ion-item"),d.Kb(1,"ion-avatar",0),d.Ib(2,"img",23),d.Jb(),d.Ib(3,"ion-input",24),d.Ib(4,"ion-input",25),d.Jb()),2&e){var i=d.Ub(2);d.xb(3),d.ac("readonly",!1)("disabled",!1)("ngModel",i.registration.secret),d.xb(1),d.ac("readonly",!1)("disabled",!1)("ngModel",i.registration.verification)}}function c(e,t){if(1&e){var i=d.Lb();d.Kb(0,"ion-content"),d.Kb(1,"form",6,7),d.Sb("ngSubmit",(function(){d.ec(i);var e=d.dc(2);return d.Ub().save(e.value)}))("keyup.enter",(function(){d.ec(i);var e=d.dc(2);return d.Ub().save(e.value)})),d.Kb(3,"ion-list"),d.Kb(4,"ion-item-divider",8),d.kc(5,"Verein"),d.Jb(),d.Kb(6,"ion-item"),d.Kb(7,"ion-avatar",0),d.Ib(8,"img",9),d.Jb(),d.Ib(9,"ion-input",10),d.Ib(10,"ion-input",11),d.Jb(),d.Kb(11,"ion-item-divider",8),d.kc(12,"Verantwortliche Person"),d.Jb(),d.Kb(13,"ion-item"),d.Kb(14,"ion-avatar",0),d.Ib(15,"img",12),d.Jb(),d.Ib(16,"ion-input",13),d.Ib(17,"ion-input",14),d.Jb(),d.jc(18,b,5,6,"ion-item",4),d.Kb(19,"ion-item-divider",8),d.kc(20,"Kontakt"),d.Jb(),d.Kb(21,"ion-item"),d.Kb(22,"ion-avatar",0),d.Ib(23,"img",15),d.Jb(),d.Ib(24,"ion-input",16),d.Ib(25,"ion-input",17),d.Jb(),d.Jb(),d.Kb(26,"ion-list"),d.Kb(27,"ion-button",18,19),d.Ib(29,"ion-icon",20),d.kc(30,"Speichern"),d.Jb(),d.Jb(),d.Kb(31,"ion-list"),d.Kb(32,"ion-button",21),d.Sb("click",(function(){return d.ec(i),d.Ub().editAthletRegistrations()})),d.Ib(33,"ion-icon",22),d.kc(34,"Athlet-Anmeldungen..."),d.Jb(),d.Jb(),d.Jb(),d.Jb()}if(2&e){var n=d.dc(2),r=d.Ub();d.xb(9),d.ac("readonly",!1)("disabled",!1)("ngModel",r.registration.vereinname),d.xb(1),d.ac("readonly",!1)("disabled",!1)("ngModel",r.registration.verband),d.xb(6),d.ac("readonly",!1)("disabled",!1)("ngModel",r.registration.respVorname),d.xb(1),d.ac("readonly",!1)("disabled",!1)("ngModel",r.registration.respName),d.xb(1),d.ac("ngIf",0===r.regId),d.xb(6),d.ac("readonly",!1)("disabled",!1)("ngModel",r.registration.mail),d.xb(1),d.ac("readonly",!1)("disabled",!1)("ngModel",r.registration.mobilephone),d.xb(2),d.ac("disabled",r.waiting||!n.valid||n.untouched),d.xb(5),d.ac("disabled",r.waiting||0===r.regId)}}function l(e,t){if(1&e){var i=d.Lb();d.Kb(0,"ion-button",26,27),d.Sb("click",(function(){return d.ec(i),d.Ub().delete()})),d.Ib(2,"ion-icon",28),d.kc(3,"Registrierung l\xf6schen"),d.Jb()}if(2&e){var n=d.Ub();d.ac("disabled",n.waiting)}}var u=[{path:"",component:function(){function e(e,t,i,n,r){this.navCtrl=e,this.route=t,this.backendService=i,this.alertCtrl=n,this.zone=r,this.waiting=!1}return e.prototype.ngOnInit=function(){var e=this;this.waiting=!0,this.wkId=this.route.snapshot.paramMap.get("wkId"),this.regId=parseInt(this.route.snapshot.paramMap.get("regId")),this.backendService.getCompetitions().subscribe((function(t){e.wettkampfId=parseInt(t.find((function(t){return t.uuid===e.wkId})).id),e.regId?e.backendService.getClubRegistrations(e.wkId).subscribe((function(t){e.updateUI(t.find((function(t){return t.id===e.regId})))})):e.updateUI({mobilephone:"+417"})}))},e.prototype.editable=function(){return this.backendService.loggedIn},e.prototype.updateUI=function(e){var t=this;this.zone.run((function(){t.waiting=!1,t.wettkampf=t.backendService.competitionName,t.registration=e,t.registration.mail.length>1&&(t.backendService.currentUserName=t.registration.mail)}))},e.prototype.save=function(e){var t=this;if(0===this.regId){var i=e;i.secret!==i.verification?this.alertCtrl.create({header:"Achtung",subHeader:"Passwort-Verifikation",message:"Das Passwort stimmt nicht mit der Verifikation \xfcberein. Beide m\xfcssen genau gleich erfasst sein.",buttons:[{text:"OKAY",role:"cancel",handler:function(){}}]}).then((function(e){return e.present()})):this.backendService.createClubRegistration(this.wkId,{mail:i.mail,mobilephone:i.mobilephone,respName:i.respName,respVorname:i.respVorname,verband:i.verband,vereinname:i.vereinname,wettkampfId:i.wettkampfId||this.wettkampfId,secret:i.secret}).subscribe((function(e){t.regId=e.id,t.backendService.currentUserName=e.mail,t.editAthletRegistrations()}))}else this.backendService.saveClubRegistration(this.wkId,{id:this.registration.id,registrationTime:this.registration.registrationTime,vereinId:this.registration.vereinId,mail:e.mail,mobilephone:e.mobilephone,respName:e.respName,respVorname:e.respVorname,verband:e.verband,vereinname:e.vereinname,wettkampfId:e.wettkampfId||this.wettkampfId}).subscribe((function(e){t.navCtrl.pop()}))},e.prototype.delete=function(){var e=this;this.alertCtrl.create({header:"Achtung",subHeader:"L\xf6schen der Vereins-Registrierung und dessen Anmeldungen am Wettkampf",message:"Hiermit wird die Vereinsanmeldung am Wettkampf komplett gel\xf6scht.",buttons:[{text:"ABBRECHEN",role:"cancel",handler:function(){}},{text:"OKAY",handler:function(){e.backendService.deleteClubRegistration(e.wkId,e.regId).subscribe((function(){e.navCtrl.pop()}))}}]}).then((function(e){return e.present()}))},e.prototype.editAthletRegistrations=function(){this.navCtrl.navigateForward("reg-athletlist/"+this.backendService.competition+"/"+this.regId)},e.\u0275fac=function(t){return new(t||e)(d.Hb(o.L),d.Hb(a.a),d.Hb(s.a),d.Hb(o.a),d.Hb(d.z))},e.\u0275cmp=d.Bb({type:e,selectors:[["app-clubreg-editor"]],decls:14,vars:3,consts:[["slot","start"],["defaultHref","/"],["slot","end"],[1,"athlet"],[4,"ngIf"],["size","large","expand","block","color","danger",3,"disabled","click",4,"ngIf"],[3,"ngSubmit","keyup.enter"],["clubRegistrationform","ngForm"],["color","primary"],["src","assets/imgs/verein.png"],["placeholder","Vereinsname","type","text","name","vereinname","required","",3,"readonly","disabled","ngModel"],["placeholder","Verband","type","text","name","verband","required","",3,"readonly","disabled","ngModel"],["src","assets/imgs/chief.png"],["placeholder","Vorname","type","text","name","respVorname","required","",3,"readonly","disabled","ngModel"],["placeholder","Nachname","type","text","name","respName","required","",3,"readonly","disabled","ngModel"],["src","assets/imgs/atmail.png"],["placeholder","Mail","type","email","pattern","^[_a-z0-9-]+(\\.[_a-z0-9-]+)*@[a-z0-9-]+(\\.[a-z0-9-]+)*(\\.[a-z]{2,5})$","name","mail","required","",3,"readonly","disabled","ngModel"],["placeholder","Mobile/SMS (+4179...)","type","tel","pattern","[+]{1}[0-9]{11,14}","name","mobilephone","required","",3,"readonly","disabled","ngModel"],["size","large","expand","block","type","submit","color","success",3,"disabled"],["btnSaveNext",""],["slot","start","name","save"],["size","large","expand","block","color","secondary",3,"disabled","click"],["slot","start","name","list"],["src","assets/imgs/password.png"],["placeholder","Passwort","type","password","name","secret","required","",3,"readonly","disabled","ngModel"],["placeholder","Verification","type","password","name","verification","required","",3,"readonly","disabled","ngModel"],["size","large","expand","block","color","danger",3,"disabled","click"],["btnDelete",""],["slot","start","name","trash"]],template:function(e,t){1&e&&(d.Kb(0,"ion-header"),d.Kb(1,"ion-toolbar"),d.Kb(2,"ion-buttons",0),d.Ib(3,"ion-back-button",1),d.Jb(),d.Kb(4,"ion-title"),d.kc(5,"Vereins-Anmeldung"),d.Jb(),d.Kb(6,"ion-note",2),d.Kb(7,"div",3),d.kc(8),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.jc(9,c,35,21,"ion-content",4),d.Kb(10,"ion-footer"),d.Kb(11,"ion-toolbar"),d.Kb(12,"ion-list"),d.jc(13,l,4,1,"ion-button",5),d.Jb(),d.Jb(),d.Jb()),2&e&&(d.xb(8),d.mc("f\xfcr ",t.wettkampf,""),d.xb(1),d.ac("ngIf",t.registration),d.xb(4),d.ac("ngIf",t.regId>0))},directives:[o.m,o.H,o.g,o.d,o.e,o.G,o.y,n.m,o.k,o.v,o.j,r.j,r.e,r.f,o.q,o.p,o.c,o.o,o.P,r.i,r.d,r.g,r.h,o.f,o.n],styles:[""]}),e}()}],p=function(){function e(){}return e.\u0275mod=d.Fb({type:e}),e.\u0275inj=d.Eb({factory:function(t){return new(t||e)},imports:[[n.c,r.a,o.I,a.i.forChild(u)]]}),e}()}}]);