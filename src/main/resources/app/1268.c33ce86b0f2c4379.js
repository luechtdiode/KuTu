"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1268],{1268:(Q,p,o)=>{o.r(p),o.d(p,{CompetitionsPageModule:()=>L});var m=o(177),c=o(4341),r=o(7125),g=o(1413),h=o(6354),d=o(3294),f=o(5558),C=o(7647),v=o(7673),t=o(4020),y=o(2872),F=o(2350);function M(a,u){if(1&a){const e=t.RV6();t.j41(0,"ion-item",5),t.bIt("click",function(n){const l=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.itemTapped(n,l))}),t.j41(1,"ion-avatar",0),t.nrm(2,"img",6),t.k0s(),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"date"),t.nrm(6,"br"),t.j41(7,"small"),t.EFF(8),t.k0s()()()}if(2&a){const e=u.$implicit,i=t.XpG(2);t.R7$(4),t.Lme("",t.i5U(5,3,e.datum,"dd-MM-yyyy"),"\xa0",e.titel,""),t.R7$(4),t.JRh(i.getDetails(e))}}function j(a,u){if(1&a&&(t.j41(0,"ion-list"),t.DNE(1,M,9,6,"ion-item",4),t.k0s()),2&a){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.sFilteredWettkampfList)}}let T=(()=>{class a{navCtrl;backendService;pgmList;sFilteredWettkampfList;sMyQuery;tMyQueryStream=new g.B;sFilterTask=void 0;constructor(e,i){this.navCtrl=e,this.backendService=i,this.backendService.loadWKPrograms().subscribe(n=>{this.pgmList=n.reduce(function(l,s){return l[s.id]=s.name,l},{})}),this.backendService.competitionSubject.subscribe(n=>{this.sFilteredWettkampfList=n,this.sMyQuery="",this.tMyQueryStream.pipe((0,h.T)(s=>s?.target?.value||""),(0,d.F)(),(0,f.n)(this.runQuery(n)),(0,C.u)()).subscribe(s=>{this.sFilteredWettkampfList=s})}),this.backendService.competitions||this.backendService.getCompetitions()}ngOnInit(){}runQuery(e){const i=[...e||[]];return n=>{const l=n.trim();let s;if(s=[],i.length>0){const P=this.filter(l);s=[...i.filter(I=>P(I))]}return(0,v.of)(s)}}filter(e){const i=e.toUpperCase().split(" ");return n=>0===e.trim().length||"*"===e.trim()||0===i.length||i.filter(l=>{if(this.competitionName(n).toUpperCase().indexOf(l)>-1||this.getProgrammname(n.programmId).toUpperCase().indexOf(l)>-1||this.getDetails(n).toUpperCase().indexOf(l)>-1)return!0}).length===i.length}reloadList(e){this.tMyQueryStream.next(e)}getCompetitions(){return this.sFilteredWettkampfList}getProgrammname(e){return this.pgmList?this.pgmList[e]:""}getDetails(e){let i=this.getProgrammname(e.programmId);return e.teamrule&&"Keine Teams"!==e.teamrule&&(i=i+", Teams: "+e.teamrule),e.altersklassen?.length>0&&(i+=", Altersklassen"),e.jahrgangsklassen?.length>0&&(i+=", Jahrgangs-Altersklassen"),i}competitionName(e){return e.titel+", am "+(e.datum+"T").split("T")[0].split("-").reverse().join("-")}itemTapped(e,i){this.backendService.getDurchgaenge(i.uuid),this.navCtrl.navigateRoot("/home")}static \u0275fac=function(i){return new(i||a)(t.rXU(y.q9),t.rXU(F.m))};static \u0275cmp=t.VBU({type:a,selectors:[["app-competitions"]],standalone:!1,decls:13,vars:2,consts:[["slot","start"],["slot","icon-only","name","menu"],["placeholder","Search","showCancelButton","never",3,"ngModelChange","ionInput","ionCancel","ngModel"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["src","assets/imgs/wettkampf.png"]],template:function(i,n){1&i&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-menu-toggle")(4,"ion-button"),t.nrm(5,"ion-icon",1),t.k0s()()(),t.j41(6,"ion-title"),t.EFF(7,"Wettkampf App - "),t.j41(8,"small"),t.EFF(9,"Auswahl"),t.k0s()()(),t.j41(10,"ion-searchbar",2),t.mxI("ngModelChange",function(s){return t.DH7(n.sMyQuery,s)||(n.sMyQuery=s),s}),t.bIt("ionInput",function(s){return n.reloadList(s)})("ionCancel",function(s){return n.reloadList(s)}),t.k0s()(),t.j41(11,"ion-content"),t.DNE(12,j,2,1,"ion-list",3),t.k0s()),2&i&&(t.R7$(10),t.R50("ngModel",n.sMyQuery),t.R7$(2),t.Y8G("ngIf",n.sFilteredWettkampfList&&n.sFilteredWettkampfList.length>0))},dependencies:[m.Sq,m.bT,c.BC,c.vS,r.mC,r.Jm,r.QW,r.W9,r.eU,r.iq,r.uz,r.he,r.nf,r.cA,r.S1,r.BC,r.ai,r.Gw,m.vh],encapsulation:2})}return a})();var b=o(1313),S=o(5079);const k=[{path:"",component:T}];let L=(()=>{class a{static \u0275fac=function(i){return new(i||a)};static \u0275mod=t.$C({type:a});static \u0275inj=t.G2t({imports:[m.MD,c.YN,r.bv,b.iI.forChild(k),S.h]})}return a})()}}]);