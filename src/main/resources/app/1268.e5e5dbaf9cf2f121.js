"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1268],{1268:(W,p,o)=>{o.r(p),o.d(p,{CompetitionsPageModule:()=>I});var m=o(6396),c=o(4341),r=o(7125),d=o(1413),h=o(6354),f=o(3294),v=o(5558),C=o(7647),y=o(7673),t=o(7241),u=o(8564),F=o(2872),M=o(2350);function j(a,g){if(1&a){const e=t.RV6();t.j41(0,"ion-item",5),t.bIt("click",function(i){const l=u.eBV(e).$implicit,s=t.XpG(2);return u.Njj(s.itemTapped(i,l))}),t.j41(1,"ion-avatar",0),t.nrm(2,"img",6),t.k0s(),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"date"),t.nrm(6,"br"),t.j41(7,"small"),t.EFF(8),t.k0s()()()}if(2&a){const e=g.$implicit,n=t.XpG(2);t.R7$(4),t.Lme("",t.i5U(5,3,e.datum,"dd-MM-yyyy"),"\xa0",e.titel),t.R7$(4),t.JRh(n.getDetails(e))}}function S(a,g){if(1&a&&(t.j41(0,"ion-list"),t.DNE(1,j,9,6,"ion-item",4),t.k0s()),2&a){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.sFilteredWettkampfList)}}let T=(()=>{class a{navCtrl;backendService;pgmList;sFilteredWettkampfList;sMyQuery;tMyQueryStream=new d.B;sFilterTask=void 0;constructor(e,n){this.navCtrl=e,this.backendService=n,this.backendService.loadWKPrograms().subscribe(i=>{this.pgmList=i.reduce(function(l,s){return l[s.id]=s.name,l},{})}),this.backendService.competitionSubject.subscribe(i=>{this.sFilteredWettkampfList=i,this.sMyQuery="",this.tMyQueryStream.pipe((0,h.T)(s=>s?.target?.value||""),(0,f.F)(),(0,v.n)(this.runQuery(i)),(0,C.u)()).subscribe(s=>{this.sFilteredWettkampfList=s})}),this.backendService.competitions||this.backendService.getCompetitions()}ngOnInit(){}runQuery(e){const n=[...e||[]];return i=>{const l=i.trim();let s;if(s=[],n.length>0){const P=this.filter(l);s=[...n.filter(Q=>P(Q))]}return(0,y.of)(s)}}filter(e){const n=e.toUpperCase().split(" ");return i=>0===e.trim().length||"*"===e.trim()||0===n.length||n.filter(l=>{if(this.competitionName(i).toUpperCase().indexOf(l)>-1||this.getProgrammname(i.programmId).toUpperCase().indexOf(l)>-1||this.getDetails(i).toUpperCase().indexOf(l)>-1)return!0}).length===n.length}reloadList(e){this.tMyQueryStream.next(e)}getCompetitions(){return this.sFilteredWettkampfList}getProgrammname(e){return this.pgmList?this.pgmList[e]:""}getDetails(e){let n=this.getProgrammname(e.programmId);return e.teamrule&&"Keine Teams"!==e.teamrule&&(n=n+", Teams: "+e.teamrule),e.altersklassen?.length>0&&(n+=", Altersklassen"),e.jahrgangsklassen?.length>0&&(n+=", Jahrgangs-Altersklassen"),n}competitionName(e){return e.titel+", am "+(e.datum+"T").split("T")[0].split("-").reverse().join("-")}itemTapped(e,n){this.backendService.getDurchgaenge(n.uuid),this.navCtrl.navigateRoot("/home")}static \u0275fac=function(n){return new(n||a)(t.rXU(F.q9),t.rXU(M.m))};static \u0275cmp=t.VBU({type:a,selectors:[["app-competitions"]],standalone:!1,decls:13,vars:2,consts:[["slot","start"],["slot","icon-only","name","menu"],["placeholder","Search","showCancelButton","never",3,"ngModelChange","ionInput","ionCancel","ngModel"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["src","assets/imgs/wettkampf.png"]],template:function(n,i){1&n&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-menu-toggle")(4,"ion-button"),t.nrm(5,"ion-icon",1),t.k0s()()(),t.j41(6,"ion-title"),t.EFF(7,"Wettkampf App - "),t.j41(8,"small"),t.EFF(9,"Auswahl"),t.k0s()()(),t.j41(10,"ion-searchbar",2),t.mxI("ngModelChange",function(s){return t.DH7(i.sMyQuery,s)||(i.sMyQuery=s),s}),t.bIt("ionInput",function(s){return i.reloadList(s)})("ionCancel",function(s){return i.reloadList(s)}),t.k0s()(),t.j41(11,"ion-content"),t.DNE(12,S,2,1,"ion-list",3),t.k0s()),2&n&&(t.R7$(10),t.R50("ngModel",i.sMyQuery),t.R7$(2),t.Y8G("ngIf",i.sFilteredWettkampfList&&i.sFilteredWettkampfList.length>0))},dependencies:[m.Sq,m.bT,c.BC,c.vS,r.mC,r.Jm,r.QW,r.W9,r.eU,r.iq,r.uz,r.he,r.nf,r.cA,r.S1,r.BC,r.ai,r.Gw,m.vh],encapsulation:2})}return a})();var b=o(9355),k=o(5079);const L=[{path:"",component:T}];let I=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275mod=t.$C({type:a});static \u0275inj=u.G2t({imports:[m.MD,c.YN,r.bv,b.iI.forChild(L),k.h]})}return a})()}}]);