"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3285],{3285:(Q,g,o)=>{o.r(g),o.d(g,{CompetitionsPageModule:()=>P});var m=o(6814),c=o(95),r=o(3582),d=o(8645),f=o(7398),h=o(3997),v=o(4664),C=o(3020),T=o(2096),t=o(2029),y=o(4414),Z=o(9253);function M(a,p){if(1&a){const e=t.EpF();t.TgZ(0,"ion-item",5),t.NdJ("click",function(n){const s=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.itemTapped(n,s))}),t.TgZ(1,"ion-avatar",0),t._UZ(2,"img",6),t.qZA(),t.TgZ(3,"ion-label"),t._uU(4),t.ALo(5,"date"),t._UZ(6,"br"),t.TgZ(7,"small"),t._uU(8),t.qZA()()()}if(2&a){const e=p.$implicit,i=t.oxw(2);t.xp6(4),t.AsE("",t.xi3(5,3,e.datum,"dd-MM-yyyy"),"\xa0",e.titel,""),t.xp6(4),t.Oqu(i.getDetails(e))}}function A(a,p){if(1&a&&(t.TgZ(0,"ion-list"),t.YNc(1,M,9,6,"ion-item",4),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.sFilteredWettkampfList)}}let S=(()=>{class a{navCtrl;backendService;pgmList;sFilteredWettkampfList;sMyQuery;tMyQueryStream=new d.x;sFilterTask=void 0;constructor(e,i){this.navCtrl=e,this.backendService=i,this.backendService.loadWKPrograms().subscribe(n=>{this.pgmList=n.reduce(function(l,s){return l[s.id]=s.name,l},{})}),this.backendService.competitionSubject.subscribe(n=>{this.sFilteredWettkampfList=n,this.sMyQuery="",this.tMyQueryStream.pipe((0,f.U)(s=>s?.target?.value||""),(0,h.x)(),(0,v.w)(this.runQuery(n)),(0,C.B)()).subscribe(s=>{this.sFilteredWettkampfList=s})}),this.backendService.competitions||this.backendService.getCompetitions()}ngOnInit(){}runQuery(e){const i=[...e||[]];return n=>{const l=n.trim();let s;if(s=[],i.length>0){const u=this.filter(l);s=[...i.filter(U=>u(U))]}return(0,T.of)(s)}}filter(e){const i=e.toUpperCase().split(" ");return n=>0===e.trim().length||"*"===e.trim()||0===i.length||i.filter(l=>{if(this.competitionName(n).toUpperCase().indexOf(l)>-1||this.getProgrammname(n.programmId).toUpperCase().indexOf(l)>-1||this.getDetails(n).toUpperCase().indexOf(l)>-1)return!0}).length===i.length}reloadList(e){this.tMyQueryStream.next(e)}getCompetitions(){return this.sFilteredWettkampfList}getProgrammname(e){return this.pgmList?this.pgmList[e]:""}getDetails(e){let i=this.getProgrammname(e.programmId);return e.teamrule&&"Keine Teams"!==e.teamrule&&(i=i+", Teams: "+e.teamrule),e.altersklassen?.length>0&&(i+=", Altersklassen"),e.jahrgangsklassen?.length>0&&(i+=", Jahrgangs-Altersklassen"),i}competitionName(e){return e.titel+", am "+(e.datum+"T").split("T")[0].split("-").reverse().join("-")}itemTapped(e,i){this.backendService.getDurchgaenge(i.uuid),this.navCtrl.navigateRoot("/home")}static \u0275fac=function(i){return new(i||a)(t.Y36(y.SH),t.Y36(Z.v))};static \u0275cmp=t.Xpm({type:a,selectors:[["app-competitions"]],decls:13,vars:2,consts:[["slot","start"],["slot","icon-only","name","menu"],["placeholder","Search","showCancelButton","never",3,"ngModel","ngModelChange","ionInput","ionCancel"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["src","assets/imgs/wettkampf.png"]],template:function(i,n){1&i&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-menu-toggle")(4,"ion-button"),t._UZ(5,"ion-icon",1),t.qZA()()(),t.TgZ(6,"ion-title"),t._uU(7,"Wettkampf App - "),t.TgZ(8,"small"),t._uU(9,"Auswahl"),t.qZA()()(),t.TgZ(10,"ion-searchbar",2),t.NdJ("ngModelChange",function(s){return n.sMyQuery=s})("ionInput",function(s){return n.reloadList(s)})("ionCancel",function(s){return n.reloadList(s)}),t.qZA()(),t.TgZ(11,"ion-content"),t.YNc(12,A,2,1,"ion-list",3),t.qZA()),2&i&&(t.xp6(10),t.Q6J("ngModel",n.sMyQuery),t.xp6(2),t.Q6J("ngIf",n.sFilteredWettkampfList&&n.sFilteredWettkampfList.length>0))},dependencies:[m.sg,m.O5,c.JJ,c.On,r.BJ,r.YG,r.Sm,r.W2,r.Gu,r.gu,r.Ie,r.Q$,r.q_,r.zc,r.VI,r.wd,r.sr,r.j9,m.uU]})}return a})();var x=o(335),F=o(3573);const L=[{path:"",component:S}];let P=(()=>{class a{static \u0275fac=function(i){return new(i||a)};static \u0275mod=t.oAB({type:a});static \u0275inj=t.cJS({imports:[m.ez,c.u5,r.Pc,x.Bz.forChild(L),F.K]})}return a})()}}]);