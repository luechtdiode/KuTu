"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4685],{4685:(U,p,a)=>{a.r(p),a.d(p,{RegJudgelistPageModule:()=>N});var d=a(2200),u=a(4341),r=a(9893),h=a(8132),l=a(2615),R=a(1266),C=a(5035),b=a(4412),v=a(1413),k=a(7673),f=a(5964),j=a(6697),I=a(6354),_=a(152),J=a(3294),F=a(8141),y=a(5558),M=a(7647),S=a(2350),e=a(3664),m=a(7705);function x(i,g){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nrm(2,"br"),e.k0s()),2&i){const t=g.$implicit;e.R7$(),e.JRh(t)}}function T(i,g){if(1&i&&(e.j41(0,"ion-note",3),e.Z7z(1,x,3,1,"span",null,e.fX1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Dyx(t.getCommentLines())}}let L=(()=>{class i{judgeregistration=m.hFB.required();selectedDisciplinlist=(0,m.hFB)([]);selected=(0,m.CGW)();ngOnInit(){}getProgramList(){let t=[];return this.selectedDisciplinlist().forEach(n=>{void 0===t.find(s=>s.program==n.program)&&t.push(n)}),t}getProgrammDisciplinText(t){return t.program+"/"+t.disziplin}getProgrammText(t){return t.program}getCommentLines(){return this.judgeregistration().comment.split("\n")}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=e.VBU({type:i,selectors:[["app-reg-judge-item"]],inputs:{judgeregistration:[1,"judgeregistration"],selectedDisciplinlist:[1,"selectedDisciplinlist"]},outputs:{selected:"selected"},standalone:!1,decls:9,vars:6,consts:[[3,"click"],["slot","start"],["src","assets/imgs/chief.png"],["slot","end"]],template:function(o,n){1&o&&(e.j41(0,"ion-item",0),e.bIt("click",function(){return n.selected?n.selected.emit(n.judgeregistration()):{}}),e.j41(1,"ion-avatar",1),e.nrm(2,"img",2),e.k0s(),e.j41(3,"ion-label"),e.EFF(4),e.nrm(5,"br"),e.j41(6,"small"),e.EFF(7),e.k0s()(),e.nVh(8,T,3,0,"ion-note",3),e.k0s()),2&o&&(e.R7$(4),e.E5c("",n.judgeregistration().name,", ",n.judgeregistration().vorname," (",n.judgeregistration().geschlecht,")"),e.R7$(3),e.Lme("",n.judgeregistration().mobilephone,", ",n.judgeregistration().mail),e.R7$(),e.vxM(n.judgeregistration().comment?8:-1))},dependencies:[r.mC,r.uz,r.he,r.JI],encapsulation:2})}return i})();function P(i,g){if(1&i&&(e.j41(0,"ion-select-option",9),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&i){const t=g.$implicit;e.Y8G("value",t.uuid),e.R7$(),e.SpI(" ",t.titel+" "+e.i5U(2,2,t.datum,"dd-MM-yy"))}}function $(i,g){if(1&i){const t=e.RV6();e.j41(0,"ion-select",8),e.mxI("ngModelChange",function(n){l.eBV(t);const s=e.XpG(2);return e.DH7(s.competition,n)||(s.competition=n),l.Njj(n)}),e.Z7z(1,P,3,5,"ion-select-option",9,e.fX1),e.k0s()}if(2&i){const t=e.XpG(2);e.R50("ngModel",t.competition),e.R7$(),e.Dyx(t.getCompetitions())}}function B(i,g){if(1&i&&(e.j41(0,"ion-col")(1,"ion-item")(2,"ion-label"),e.EFF(3,"Wettkampf"),e.k0s(),e.nVh(4,$,3,1,"ion-select",7),e.k0s()()),2&i){const t=e.XpG();e.R7$(4),e.vxM(t.getCompetitions().length>0?4:-1)}}function A(i,g){if(1&i&&(e.j41(0,"ion-note",4),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.SpI(" ",t.competitionName()," ")}}function E(i,g){1&i&&(e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2,"loading ..."),e.k0s(),e.nrm(3,"ion-spinner"),e.k0s())}function V(i,g){if(1&i){const t=e.RV6();e.j41(0,"ion-item-option",15),e.bIt("click",function(){l.eBV(t);const n=e.XpG().$implicit,s=e.sdS(1),c=e.XpG(2);return l.Njj(c.delete(n,s))}),e.nrm(1,"ion-icon",13),e.EFF(2," L\xf6schen "),e.k0s()}}function X(i,g){if(1&i){const t=e.RV6();e.j41(0,"ion-item-sliding",null,0)(2,"app-reg-judge-item",10),e.bIt("click",function(){const n=l.eBV(t).$implicit,s=e.sdS(1),c=e.XpG(2);return l.Njj(c.itemTapped(n,s))}),e.k0s(),e.j41(3,"ion-item-options",11)(4,"ion-item-option",12),e.bIt("click",function(){const n=l.eBV(t).$implicit,s=e.sdS(1),c=e.XpG(2);return l.Njj(c.edit(n,s))}),e.nrm(5,"ion-icon",13),e.EFF(6),e.k0s(),e.nVh(7,V,3,0,"ion-item-option",14),e.k0s()()}if(2&i){const t=g.$implicit,o=e.XpG(2);e.R7$(2),e.Y8G("judgeregistration",t)("selectedDisciplinlist",o.wkPgms),e.R7$(4),e.SpI(" ",o.isLoggedInAsClub()?"Bearbeiten":o.isLoggedIn()?"Best\xe4tigen":"Anzeigen"," "),e.R7$(),e.vxM(o.isLoggedInAsClub()?7:-1)}}function D(i,g){if(1&i&&(e.j41(0,"ion-content")(1,"ion-list"),e.nVh(2,E,4,0,"ion-item"),e.nI1(3,"async"),e.Z7z(4,X,8,4,"ion-item-sliding",null,e.fX1),e.k0s()()),2&i){const t=e.XpG();e.R7$(2),e.vxM(e.bMT(3,1,t.busy)||!(t.competition&&t.currentRegistration&&t.sJudgeRegistrationList)?2:-1),e.R7$(2),e.Dyx(t.filteredStartList)}}function G(i,g){if(1&i){const t=e.RV6();e.j41(0,"ion-button",16),e.bIt("click",function(){l.eBV(t);const n=e.XpG();return l.Njj(n.createRegistration())}),e.nrm(1,"ion-icon",17),e.EFF(2," Neue Anmeldung... "),e.k0s()}}const Q=[{path:"",component:(()=>{class i{navCtrl=(0,l.WQX)(C.q9);route=(0,l.WQX)(R.nX);backendService=(0,l.WQX)(S.m);alertCtrl=(0,l.WQX)(r.hG);busy=new b.t(!1);currentRegistration;currentRegId;wkPgms;tMyQueryStream=new v.B;sFilterTask=void 0;sFilteredRegistrationList;sJudgeRegistrationList;sMyQuery;sSyncActions=[];constructor(){this.backendService.competitions||this.backendService.getCompetitions()}ngOnInit(){this.busy.next(!0);const t=this.route.snapshot.paramMap.get("wkId");this.currentRegId=parseInt(this.route.snapshot.paramMap.get("regId")),t?this.competition=t:this.backendService.competition&&(this.competition=this.backendService.competition)}ionViewWillEnter(){this.refreshList()}refreshList(){this.busy.next(!0),this.currentRegistration=void 0,this.backendService.getClubRegistrations(this.competition).pipe((0,f.p)(t=>!!t.find(o=>o.id===this.currentRegId)),(0,j.s)(1)).subscribe(t=>{this.currentRegistration=t.find(o=>o.id===this.currentRegId),console.log("ask Judgees-list for registration"),this.backendService.loadJudgeRegistrations(this.competition,this.currentRegId).subscribe(o=>{this.busy.next(!1),this.judgeregistrations=o,this.tMyQueryStream.pipe((0,f.p)(s=>!!s&&!!s.target),(0,I.T)(s=>s.target.value||"*"),(0,_.B)(300),(0,J.F)(),(0,F.M)(s=>this.busy.next(!0)),(0,y.n)(this.runQuery(o)),(0,M.u)()).subscribe(s=>{this.sFilteredRegistrationList=s,this.busy.next(!1)})})})}set competition(t){(!this.currentRegistration||t!==this.backendService.competition)&&this.backendService.loadJudgeProgramDisziplinList(this.competition).subscribe(o=>{this.wkPgms=o})}get competition(){return this.backendService.competition||""}getCompetitions(){return this.backendService.competitions||[]}competitionName(){return this.backendService.competitionName}runQuery(t){return o=>{const n=o.trim(),s=[];return n&&t&&t.forEach(c=>{this.filter(n)(c)&&s.push(c)}),(0,k.of)(s)}}set judgeregistrations(t){this.sJudgeRegistrationList=t,this.reloadList(this.sMyQuery)}get judgeregistrations(){return this.sJudgeRegistrationList}get filteredStartList(){return this.sFilteredRegistrationList||this.sJudgeRegistrationList||[]}reloadList(t){this.tMyQueryStream.next(t)}itemTapped(t,o){o.getOpenAmount().then(n=>{n>0?o.close():o.open("end")})}isLoggedInAsClub(){return this.backendService.loggedIn&&this.backendService.authenticatedClubId===this.currentRegId+""}isLoggedInAsAdmin(){return this.backendService.loggedIn&&!!this.backendService.authenticatedClubId}isLoggedIn(){return this.backendService.loggedIn}filter(t){const o=t.toUpperCase().split(" ");return n=>"*"===t.trim()||o.filter(s=>{if(n.name.toUpperCase().indexOf(s)>-1||n.vorname.toUpperCase().indexOf(s)>-1||n.mobilephone.toUpperCase().indexOf(s)>-1||n.mail.toUpperCase().indexOf(s)>-1||n.comment.toUpperCase().indexOf(s)>-1)return!0}).length===o.length}createRegistration(){this.navCtrl.navigateForward(`reg-judgelist/${this.backendService.competition}/${this.currentRegId}/0`)}edit(t,o){this.navCtrl.navigateForward(`reg-judgelist/${this.backendService.competition}/${this.currentRegId}/${t.id}`),o.close()}delete(t,o){o.close(),this.alertCtrl.create({header:"Achtung",subHeader:"L\xf6schen der Wertungsrichter-Anmeldung am Wettkampf",message:"Hiermit wird die Anmeldung von "+t.name+", "+t.vorname+" am Wettkampf gel\xf6scht.",buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{this.backendService.deleteJudgeRegistration(this.backendService.competition,this.currentRegId,t).subscribe(()=>{this.refreshList(),this.navCtrl.pop()})}}]}).then(s=>s.present())}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=e.VBU({type:i,selectors:[["app-reg-judgelist"]],standalone:!1,decls:18,vars:5,consts:[["slidingJudgeRegistrationItem",""],["slot","start"],["defaultHref","/"],["no-padding",""],["slot","end"],["placeholder","Search","showCancelButton","never",3,"ngModelChange","ionInput","ionCancel","ngModel"],["size","large","expand","block","color","success"],["label","Wettkampf","placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel"],["label","Wettkampf","placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModelChange","ngModel"],[3,"value"],[3,"click","judgeregistration","selectedDisciplinlist"],["side","end"],["color","primary",3,"click"],["name","arrow-forward-circle-outline","ios","md-arrow-forward-circle-outline"],["color","danger"],["color","danger",3,"click"],["size","large","expand","block","color","success",3,"click"],["slot","start","name","add"]],template:function(o,n){1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title")(5,"ion-grid",3)(6,"ion-row")(7,"ion-col")(8,"ion-label"),e.EFF(9,"Wertungsrichter-Anmeldungen"),e.k0s()(),e.nVh(10,B,5,1,"ion-col"),e.k0s()()(),e.nVh(11,A,2,1,"ion-note",4),e.k0s(),e.j41(12,"ion-searchbar",5),e.mxI("ngModelChange",function(c){return e.DH7(n.sMyQuery,c)||(n.sMyQuery=c),c}),e.bIt("ionInput",function(c){return n.reloadList(c)})("ionCancel",function(c){return n.reloadList(c)}),e.k0s()(),e.nVh(13,D,6,3,"ion-content"),e.j41(14,"ion-footer")(15,"ion-toolbar")(16,"ion-list"),e.nVh(17,G,3,0,"ion-button",6),e.k0s()()()),2&o&&(e.R7$(10),e.vxM(n.competition?-1:10),e.R7$(),e.vxM(n.competition?11:-1),e.R7$(),e.R50("ngModel",n.sMyQuery),e.R7$(),e.vxM(n.wkPgms&&n.wkPgms.length>0?13:-1),e.R7$(4),e.vxM(n.isLoggedInAsClub()?17:-1))},dependencies:[u.BC,u.vS,r.Jm,r.QW,r.hU,r.W9,r.M0,r.lO,r.eU,r.iq,r.uz,r.LU,r.CE,r.A7,r.he,r.nf,r.JI,r.ln,r.S1,r.Nm,r.Ip,r.w2,r.BC,r.ai,r.Je,r.Gw,r.el,L,d.Jj,d.vh],encapsulation:2})}return i})()}];let W=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=e.$C({type:i});static \u0275inj=l.G2t({imports:[h.iI.forChild(Q),h.iI]})}return i})(),N=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275mod=e.$C({type:i});static \u0275inj=l.G2t({imports:[d.MD,u.YN,r.bv,W]})}return i})()}}]);