(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{KCRw:function(e,t,n){"use strict";n.r(t),n.d(t,"StationPageModule",function(){return J});var i=n("ofXK"),r=n("3Pt+"),o=n("tyNb"),c=n("TEn/"),s=n("mrSG"),a=n("cygB"),u=n("Gyf/"),b=n("lJxs"),g=n("fXoL");function l(e,t){if(1&e&&(g.Kb(0,"ion-note",7),g.kc(1),g.Vb(2,"number"),g.Jb()),2&e){var n=g.Ub().$implicit;g.xb(1),g.mc(" ",g.Xb(2,1,n.wertung.endnote,"2.3-3")," ")}}function p(e,t){1&e&&(g.Kb(0,"ion-note",8),g.kc(1,"Kein Resultat"),g.Jb())}function d(e,t){if(1&e){var n=g.Lb();g.Kb(0,"ion-item",2),g.Sb("click",function(e){g.ec(n);var i=t.$implicit;return g.Ub(2).itemTapped(e,i)}),g.Kb(1,"ion-avatar",3),g.Ib(2,"img",4),g.Jb(),g.Kb(3,"ion-label"),g.kc(4),g.Kb(5,"small"),g.kc(6),g.Jb(),g.Jb(),g.jc(7,l,3,4,"ion-note",5),g.jc(8,p,2,0,"ion-note",6),g.Jb()}if(2&e){var i=t.$implicit;g.xb(4),g.mc("",i.vorname+" "+i.name," "),g.xb(2),g.lc(" ("+i.wertung.riege+")"),g.xb(1),g.ac("ngIf",void 0!==i.wertung.endnote),g.xb(1),g.ac("ngIf",void 0===i.wertung.endnote)}}function f(e,t){if(1&e&&(g.Kb(0,"ion-list"),g.jc(1,d,9,4,"ion-item",1),g.Jb()),2&e){var n=g.Ub();g.xb(1),g.ac("ngForOf",n.items)}}var h=function(){function e(e,t){this.navCtrl=e,this.backendService=t}return e.prototype.itemTapped=function(e,t){this.navCtrl.navigateForward(this.backendService.loggedIn?"wertung-editor/"+t.id:"athlet-view/"+this.backendService.competition+"/"+t.id)},e.\u0275fac=function(t){return new(t||e)(g.Hb(c.N),g.Hb(a.a))},e.\u0275cmp=g.Bb({type:e,selectors:[["riege-list"]],inputs:{items:"items"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start"],["src","assets/imgs/athlete.png"],["slot","end","class","result-value",4,"ngIf"],["slot","end","class","result-no-value",4,"ngIf"],["slot","end",1,"result-value"],["slot","end",1,"result-no-value"]],template:function(e,t){1&e&&g.jc(0,f,2,1,"ion-list",0),2&e&&g.ac("ngIf",t.items&&t.items.length>0)},directives:[i.m,c.w,i.l,c.q,c.d,c.v,c.z],pipes:[i.f],styles:[".result-value[_ngcontent-%COMP%]{color:var(--ion-color-success)}.result-no-value[_ngcontent-%COMP%], .result-value[_ngcontent-%COMP%]{font-size:large;font-weight:700;margin-top:17px;margin-left:0;padding-left:0;padding-top:0}.result-no-value[_ngcontent-%COMP%]{color:var(--ion-color-warning)}"]}),e}();function v(e,t){1&e&&(g.Kb(0,"div"),g.Kb(1,"ion-title"),g.kc(2,"Resultate"),g.Jb(),g.Jb())}function m(e,t){if(1&e&&(g.Kb(0,"div"),g.Kb(1,"ion-title"),g.kc(2,"Resultaterfassung"),g.Kb(3,"div",15),g.kc(4),g.Jb(),g.Jb(),g.Jb()),2&e){var n=g.Ub();g.xb(3),g.ac("ngClass",n.durchgangstateClass),g.xb(1),g.lc(n.durchgangstate())}}function k(e,t){if(1&e&&(g.Ib(0,"riege-list",16),g.Vb(1,"async")),2&e){var n=g.Ub();g.ac("items",g.Wb(1,1,n.getWertungen()))}}function S(e,t){if(1&e&&(g.Kb(0,"ion-note",17),g.kc(1),g.Jb()),2&e){var n=g.Ub();g.xb(1),g.nc("(",n.getSteps()[0]," bis ",n.getSteps()[n.getSteps().length-1],")")}}function y(e,t){1&e&&g.Ib(0,"ion-icon",18)}function w(e,t){if(1&e){var n=g.Lb();g.Kb(0,"ion-button",19),g.Sb("click",function(){return g.ec(n),g.Ub().finish()}),g.Ib(1,"ion-icon",20),g.kc(2," Eingaben abschliessen "),g.Jb()}if(2&e){var i=g.Ub();g.ac("disabled",!(i.geraet&&i.getSteps()))}}var x=function(){function e(e,t,n,i){var r=this;this.navCtrl=e,this.backendService=t,this.alertCtrl=n,this.zone=i,this.durchgangopen=!1,this.geraete=[],this.backendService.durchgangStarted.pipe(Object(b.a)(function(e){return e.filter(function(e){return Object(u.c)(e.durchgang)===Object(u.c)(r.backendService.durchgang)&&e.wettkampfUUID===r.backendService.competition}).length>0})).subscribe(function(e){r.durchgangopen=e})}return e.prototype.ionViewWillEnter=function(){this.geraete.length>0&&!this.backendService.captionmode&&this.backendService.activateCaptionMode()},e.prototype.ngOnInit=function(){var e=this;this.backendService.geraeteSubject.subscribe(function(t){e.backendService.captionmode&&(e.geraete=t)})},e.prototype.durchgangstate=function(){return this.backendService.isWebsocketConnected()?this.durchgangopen?"gestartet":"gesperrt":"offline"},Object.defineProperty(e.prototype,"durchgangstateClass",{get:function(){return{open:this.backendService.isWebsocketConnected()&&this.durchgangopen,closed:this.backendService.isWebsocketConnected()&&!this.durchgangopen,offline:!this.backendService.isWebsocketConnected()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"competition",{get:function(){return this.backendService.competition},set:function(e){this.stationFreezed||this.backendService.getDurchgaenge(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"durchgang",{get:function(){return this.backendService.durchgang},set:function(e){this.stationFreezed||this.backendService.getGeraete(this.competition,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"geraet",{get:function(){return this.backendService.geraet},set:function(e){this.stationFreezed||this.backendService.getSteps(this.competition,this.durchgang,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this.backendService.step},set:function(e){this.backendService.getWertungen(this.competition,this.durchgang,this.geraet,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stationFreezed",{get:function(){return this.backendService.stationFreezed},enumerable:!1,configurable:!0}),e.prototype.isLoggedIn=function(){return this.backendService.loggedIn},Object.defineProperty(e.prototype,"nextStepCaption",{get:function(){return this.isLoggedIn()?"N\xe4chste Riege":"N\xe4chstes Ger\xe4t"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prevStepCaption",{get:function(){return this.isLoggedIn()?"Vorherige Riege":"Vorheriges Ger\xe4t"},enumerable:!1,configurable:!0}),e.prototype.itemTapped=function(e){e.getOpenAmount().then(function(t){t>10||t<-10?e.close():e.open("end")})},e.prototype.nextStep=function(e){var t=this;this.backendService.nextGeraet().subscribe(function(n){t.step=n,e.close()})},e.prototype.prevStep=function(e){var t=this;this.backendService.prevGeraet().subscribe(function(n){t.step=n,e.close()})},Object.defineProperty(e.prototype,"station",{get:function(){return this.isLoggedIn()?this.step+". Riege "+this.geraetName()+", "+this.durchgang:this.step+". Ger\xe4t "+this.geraetName()+", "+this.durchgang},enumerable:!1,configurable:!0}),e.prototype.showCompleteAlert=function(){return Object(s.b)(this,void 0,void 0,function(){var e,t=this;return Object(s.d)(this,function(n){return(e=this.alertCtrl.create({header:"Achtung",message:'Nach dem Abschliessen der Station "'+this.station+'" k\xf6nnen die erfassten Wertungen nur noch im Wettkampf-B\xfcro korrigiert werden.',buttons:[{text:"Abbrechen",role:"cancel",handler:function(){}},{text:"OKAY",handler:function(){var n=e.then(function(e){return e.dismiss()});return t.zone.run(function(){t.backendService.finishStation(t.competition,t.durchgang,t.geraet,t.step).subscribe(function(e){0===e.length&&n.then(function(){t.navCtrl.pop()})})}),!1}}]})).then(function(e){return e.present()}),[2]})})},e.prototype.toastMissingResult=function(e){return Object(s.b)(this,void 0,void 0,function(){var t,n=this;return Object(s.d)(this,function(i){switch(i.label){case 0:return t=e[0].vorname.toUpperCase()+" "+e[0].name.toUpperCase()+" ("+e[0].verein+")",[4,this.alertCtrl.create({header:"Achtung",subHeader:"Fehlendes Resultat!",message:"In dieser Riege gibt es noch "+e.length+" leere Wertungen! - Bitte pr\xfcfen, ob "+t+" geturnt hat.",buttons:[{text:"Nicht geturnt",role:"edit",handler:function(){e.splice(0,1),e.length>0?n.toastMissingResult(e):n.showCompleteAlert()}},{text:"Korrigieren",role:"cancel",handler:function(){n.navCtrl.navigateForward("wertung-editor/"+e[0].id)}}]})];case 1:return i.sent().present(),[2]}})})},e.prototype.finish=function(){var e=this.backendService.wertungen.filter(function(e){return void 0===e.wertung.endnote});0!==e.length?this.toastMissingResult(e):this.showCompleteAlert()},e.prototype.getCompetitions=function(){return this.backendService.competitions},e.prototype.competitionName=function(){var e=this;if(!this.backendService.competitions)return"";var t=this.backendService.competitions.filter(function(t){return t.uuid===e.backendService.competition}).map(function(e){return e.titel+"<br>"+(e.datum+"T").split("T")[0].split("-").reverse().join("-")});return 1===t.length?t[0]:""},e.prototype.geraetName=function(){var e=this;if(!this.geraete||0===this.geraete.length)return"";var t=this.geraete.filter(function(t){return t.id===e.backendService.geraet}).map(function(e){return e.name});return 1===t.length?t[0]:""},e.prototype.getDurchgaenge=function(){return this.backendService.durchgaenge},e.prototype.getGeraete=function(){return this.geraete},e.prototype.getSteps=function(){return this.backendService.steps},e.prototype.getWertungen=function(){return this.backendService.wertungenSubject},e.\u0275fac=function(t){return new(t||e)(g.Hb(c.N),g.Hb(a.a),g.Hb(c.b),g.Hb(g.A))},e.\u0275cmp=g.Bb({type:e,selectors:[["app-station"]],decls:29,vars:14,consts:[["slot","start"],["defaultHref","/"],[4,"ngIf"],["slot","end",1,"ion-padding-end",3,"innerHtml"],[3,"items",4,"ngIf"],["slidingStepItem",""],[3,"click"],["slot","end",4,"ngIf"],["slot","end","name","arrow-dropright",4,"ngIf"],["side","start"],["color","primary",3,"disabled","click"],["name","arrow-dropleft-circle","ios","md-arrow-dropleft-circle"],["side","end"],["name","arrow-dropright-circle","ios","md-arrow-dropright-circle"],["size","large","expand","block","color","success",3,"disabled","click",4,"ngIf"],[1,"stateinfo",3,"ngClass"],[3,"items"],["slot","end"],["slot","end","name","arrow-dropright"],["size","large","expand","block","color","success",3,"disabled","click"],["slot","start","name","git-commit"]],template:function(e,t){if(1&e){var n=g.Lb();g.Kb(0,"ion-header"),g.Kb(1,"ion-toolbar"),g.Kb(2,"ion-buttons",0),g.Ib(3,"ion-back-button",1),g.Jb(),g.jc(4,v,3,0,"div",2),g.jc(5,m,5,2,"div",2),g.Ib(6,"ion-note",3),g.Jb(),g.Jb(),g.Kb(7,"ion-content"),g.jc(8,k,2,3,"riege-list",4),g.Vb(9,"async"),g.Jb(),g.Kb(10,"ion-footer"),g.Kb(11,"ion-toolbar"),g.Kb(12,"ion-list"),g.Kb(13,"ion-item-sliding",null,5),g.Kb(15,"ion-item",6),g.Sb("click",function(){g.ec(n);var e=g.dc(14);return t.itemTapped(e)}),g.Kb(16,"ion-label"),g.kc(17),g.Jb(),g.jc(18,S,2,2,"ion-note",7),g.jc(19,y,1,0,"ion-icon",8),g.Jb(),g.Kb(20,"ion-item-options",9),g.Kb(21,"ion-item-option",10),g.Sb("click",function(){g.ec(n);var e=g.dc(14);return t.prevStep(e)}),g.Ib(22,"ion-icon",11),g.kc(23),g.Jb(),g.Jb(),g.Kb(24,"ion-item-options",12),g.Kb(25,"ion-item-option",10),g.Sb("click",function(){g.ec(n);var e=g.dc(14);return t.nextStep(e)}),g.Ib(26,"ion-icon",13),g.kc(27),g.Jb(),g.Jb(),g.Jb(),g.jc(28,w,3,1,"ion-button",14),g.Jb(),g.Jb(),g.Jb()}2&e&&(g.xb(4),g.ac("ngIf",!t.isLoggedIn()),g.xb(1),g.ac("ngIf",t.isLoggedIn()),g.xb(1),g.ac("innerHtml",t.competitionName(),g.fc),g.xb(2),g.ac("ngIf",t.geraet&&t.durchgang&&t.step&&g.Wb(9,12,t.getWertungen())),g.xb(9),g.lc(t.station),g.xb(1),g.ac("ngIf",t.getSteps()&&t.getSteps().length>0),g.xb(1),g.ac("ngIf",t.geraet&&t.getSteps()),g.xb(2),g.ac("disabled",!t.geraet||!t.getSteps()),g.xb(2),g.mc(" ",t.prevStepCaption," "),g.xb(2),g.ac("disabled",!t.geraet||!t.getSteps()),g.xb(2),g.mc(" ",t.nextStepCaption," "),g.xb(1),g.ac("ngIf",t.isLoggedIn()&&t.durchgangopen))},directives:[c.n,c.J,c.h,c.e,c.f,i.m,c.z,c.k,c.l,c.w,c.u,c.q,c.v,c.t,c.s,c.o,c.I,i.k,h,c.g],pipes:[i.b],styles:[".stateinfo.closed[_ngcontent-%COMP%]{padding-left:5px;border-left:6px solid var(--ion-color-danger)}.stateinfo.open[_ngcontent-%COMP%]{padding-left:5px;border-left:6px solid var(--ion-color-success)}.stateinfo.offline[_ngcontent-%COMP%]{padding-left:5px;border-left:6px solid var(--ion-color-warning)}"]}),e}(),I=n("bDjW"),C=n("PLH8"),K=[{path:"",component:x}],J=function(){function e(){}return e.\u0275mod=g.Fb({type:e}),e.\u0275inj=g.Eb({factory:function(t){return new(t||e)},providers:[C.a],imports:[[i.c,r.a,c.K,o.i.forChild(K),I.a]]}),e}()}}]);