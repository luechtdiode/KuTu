"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5332],{5332:(I,g,c)=>{c.r(g),c.d(g,{LastTopResultsPageModule:()=>A});var r=c(9808),p=c(2382),u=c(1631),s=c(3349),m=c(9300),t=c(7587),d=c(600),h=c(2997);function T(o,l){if(1&o&&(t.TgZ(0,"ion-select-option",9),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=l.$implicit;t.Q6J("value",e.uuid),t.xp6(1),t.hij(" ",e.titel+" "+t.xi3(2,2,e.datum,"dd-MM-yy"),"")}}function f(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"ion-select",7),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw(2).competition=n}),t.YNc(1,T,3,5,"ion-select-option",8),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("ngModel",e.competition),t.xp6(1),t.Q6J("ngForOf",e.getCompetitions())}}function Z(o,l){if(1&o&&(t.TgZ(0,"ion-col"),t.TgZ(1,"ion-item"),t.TgZ(2,"ion-label"),t._uU(3,"Wettkampf"),t.qZA(),t.YNc(4,f,2,2,"ion-select",6),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.getCompetitions().length>0)}}function x(o,l){if(1&o&&(t.TgZ(0,"ion-note",10),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.competitionName()," ")}}function v(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"ion-col",11),t.NdJ("click",function(n){const R=t.CHM(e).$implicit;return t.oxw().itemTapped(n,R)}),t._UZ(1,"result-display",12),t.qZA()}if(2&o){const e=l.$implicit,i=t.oxw();t.xp6(1),t.Q6J("item",e)("title",i.getTitle(e))}}let _=(()=>{class o{constructor(e){this.backendService=e,this.items=[],this.toptop={},this.geraete=[],this.backendService.competitions||this.backendService.getCompetitions()}ngOnInit(){this.backendService.activateNonCaptionMode(this.backendService.competition).subscribe(e=>{this.geraete=e||[],this.sortItems()}),this.backendService.newLastResults.pipe((0,m.h)(e=>!!e&&!!e.lastTopResults)).subscribe(e=>{this.items=[],this.toptop={},Object.keys(e.lastTopResults).forEach(i=>{const n=e.lastTopResults[i],a=this.toptop[n.wertung.wettkampfdisziplinId];a?a.wertung.endnote<n.wertung.endnote&&(this.toptop[n.wertung.wettkampfdisziplinId]=n):this.toptop[n.wertung.wettkampfdisziplinId]=n}),Object.keys(this.toptop).forEach(i=>{this.items.push(this.toptop[i])}),this.sortItems()})}sortItems(){this.items=this.items.sort((e,i)=>{let n=e.programm.localeCompare(i.programm);return 0===n&&(n=this.geraetOrder(e.geraet)-this.geraetOrder(i.geraet)),n})}get stationFreezed(){return this.backendService.stationFreezed}set competition(e){this.stationFreezed||(this.backendService.getDurchgaenge(e),this.backendService.activateNonCaptionMode(this.backendService.competition).subscribe(i=>{this.geraete=i||[],this.sortItems()}))}get competition(){return this.backendService.competition||""}getCompetitions(){return this.backendService.competitions||[]}competitionName(){if(!this.backendService.competitions)return"";const e=this.backendService.competitions.filter(i=>i.uuid===this.backendService.competition).map(i=>i.titel+", am "+(i.datum+"T").split("T")[0].split("-").reverse().join("-"));return 1===e.length?e[0]:""}geraetOrder(e){return this.geraete?this.geraete.findIndex(n=>n.id===e):0}geraetText(e){if(!this.geraete)return"";const i=this.geraete.filter(n=>n.id===e).map(n=>n.name);return 1===i.length?i[0]:""}getTitle(e){return e.programm+" - "+this.geraetText(e.geraet)}itemTapped(e,i){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-last-top-results"]],decls:18,vars:3,consts:[["slot","start"],["slot","icon-only","name","menu"],["no-padding",""],[4,"ngIf"],["slot","end",4,"ngIf"],["class","align-self-start","size-xs","12","size-md","6","size-lg","4","size-xl","2","col-12","","col-sm-6","","col-lg-4","","col-xl-2","",3,"click",4,"ngFor","ngForOf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["slot","end"],["size-xs","12","size-md","6","size-lg","4","size-xl","2","col-12","","col-sm-6","","col-lg-4","","col-xl-2","",1,"align-self-start",3,"click"],[3,"item","title"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar"),t.TgZ(2,"ion-buttons",0),t.TgZ(3,"ion-menu-toggle"),t.TgZ(4,"ion-button"),t._UZ(5,"ion-icon",1),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"ion-title"),t.TgZ(7,"ion-grid",2),t.TgZ(8,"ion-row"),t.TgZ(9,"ion-col"),t.TgZ(10,"ion-label"),t._uU(11,"Top Resultate"),t.qZA(),t.qZA(),t.YNc(12,Z,5,1,"ion-col",3),t.qZA(),t.qZA(),t.qZA(),t.YNc(13,x,2,1,"ion-note",4),t.qZA(),t.qZA(),t.TgZ(14,"ion-content"),t.TgZ(15,"ion-grid",2),t.TgZ(16,"ion-row"),t.YNc(17,v,2,2,"ion-col",5),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(12),t.Q6J("ngIf",!i.competition),t.xp6(1),t.Q6J("ngIf",i.competition),t.xp6(4),t.Q6J("ngForOf",i.items))},directives:[s.Gu,s.sr,s.Sm,s.zc,s.YG,s.gu,s.wd,s.jY,s.Nd,s.wI,s.Q$,r.O5,s.W2,r.sg,s.Ie,s.t9,s.QI,p.JJ,p.On,s.n0,s.uN,h.G],pipes:[r.uU],styles:[""]}),o})();var b=c(5051);const k=[{path:"",component:_}];let A=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[r.ez,p.u5,s.Pc,u.Bz.forChild(k),b.K]]}),o})()}}]);