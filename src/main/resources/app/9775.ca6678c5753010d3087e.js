(self.webpackChunkresultcatcher=self.webpackChunkresultcatcher||[]).push([[9775],{9775:(e,t,i)=>{"use strict";i.r(t),i.d(t,{RegJudgelistPageModule:()=>U});var n=i(8583),o=i(665),s=i(2859),r=i(881),c=i(6215),g=i(7709),a=i(5917),l=i(5435),u=i(5257),d=i(8002),p=i(4395),h=i(7519),m=i(3342),f=i(3190),Z=i(8819),b=i(8186),A=i(600);function x(e,t){if(1&e&&(b.TgZ(0,"span"),b._uU(1),b._UZ(2,"br"),b.qZA()),2&e){const e=t.$implicit;b.xp6(1),b.Oqu(e)}}function k(e,t){if(1&e&&(b.TgZ(0,"ion-note",4),b.YNc(1,x,3,1,"span",5),b.qZA()),2&e){const e=b.oxw();b.xp6(1),b.Q6J("ngForOf",e.getCommentLines())}}let v=(()=>{class e{constructor(){this.selected=new b.vpe}ngOnInit(){}getProgramList(){var e=[];return void 0===this.selectedDisciplinlist&&(this.selectedDisciplinlist=[]),this.selectedDisciplinlist.forEach(t=>{void 0===e.find(e=>e.program==t.program)&&e.push(t)}),e}getProgrammDisciplinText(e){return e.program+"/"+e.disziplin}getProgrammText(e){return e.program}getCommentLines(){return this.judgeregistration.comment.split("\n")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-reg-judge-item"]],inputs:{judgeregistration:"judgeregistration",status:"status",selectedDisciplinlist:"selectedDisciplinlist"},outputs:{selected:"selected"},decls:9,vars:6,consts:[[3,"click"],["slot","start"],["src","assets/imgs/chief.png"],["slot","end",4,"ngIf"],["slot","end"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(b.TgZ(0,"ion-item",0),b.NdJ("click",function(){return t.selected?t.selected.emit(t.judgeregistration):{}}),b.TgZ(1,"ion-avatar",1),b._UZ(2,"img",2),b.qZA(),b.TgZ(3,"ion-label"),b._uU(4),b._UZ(5,"br"),b.TgZ(6,"small"),b._uU(7),b.qZA(),b.qZA(),b.YNc(8,k,2,1,"ion-note",3),b.qZA()),2&e&&(b.xp6(4),b.lnq("",t.judgeregistration.name,", ",t.judgeregistration.vorname," (",t.judgeregistration.geschlecht,")"),b.xp6(3),b.AsE("",t.judgeregistration.mobilephone,", ",t.judgeregistration.mail,""),b.xp6(1),b.Q6J("ngIf",t.judgeregistration.comment))},directives:[s.Ie,s.BJ,s.Q$,n.O5,s.uN,n.sg],styles:[""]}),e})();function I(e,t){if(1&e&&(b.TgZ(0,"ion-select-option",10),b._uU(1),b.ALo(2,"date"),b.qZA()),2&e){const e=t.$implicit;b.Q6J("value",e.uuid),b.xp6(1),b.hij(" ",e.titel+" "+b.xi3(2,2,e.datum,"dd-MM-yy"),"")}}function T(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"ion-select",8),b.NdJ("ngModelChange",function(t){return b.CHM(e),b.oxw(2).competition=t}),b.YNc(1,I,3,5,"ion-select-option",9),b.qZA()}if(2&e){const e=b.oxw(2);b.Q6J("ngModel",e.competition),b.xp6(1),b.Q6J("ngForOf",e.getCompetitions())}}function C(e,t){if(1&e&&(b.TgZ(0,"ion-col"),b.TgZ(1,"ion-item"),b.TgZ(2,"ion-label"),b._uU(3,"Wettkampf"),b.qZA(),b.YNc(4,T,2,2,"ion-select",7),b.qZA(),b.qZA()),2&e){const e=b.oxw();b.xp6(4),b.Q6J("ngIf",e.getCompetitions().length>0)}}function w(e,t){if(1&e&&(b.TgZ(0,"ion-note",11),b._uU(1),b.qZA()),2&e){const e=b.oxw();b.xp6(1),b.hij(" ",e.competitionName()," ")}}function q(e,t){1&e&&(b.TgZ(0,"ion-item"),b.TgZ(1,"ion-label"),b._uU(2,"loading ..."),b.qZA(),b._UZ(3,"ion-spinner"),b.qZA())}function J(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"ion-item-option",19),b.NdJ("click",function(){b.CHM(e);const t=b.oxw().$implicit,i=b.MAs(1);return b.oxw(2).delete(t,i)}),b._UZ(1,"ion-icon",17),b._uU(2," L\xf6schen "),b.qZA()}}function y(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"ion-item-sliding",null,13),b.TgZ(2,"app-reg-judge-item",14),b.NdJ("click",function(){const t=b.CHM(e).$implicit,i=b.MAs(1);return b.oxw(2).itemTapped(t,i)}),b.qZA(),b.TgZ(3,"ion-item-options",15),b.TgZ(4,"ion-item-option",16),b.NdJ("click",function(){const t=b.CHM(e).$implicit,i=b.MAs(1);return b.oxw(2).edit(t,i)}),b._UZ(5,"ion-icon",17),b._uU(6),b.qZA(),b.YNc(7,J,3,0,"ion-item-option",18),b.qZA(),b.qZA()}if(2&e){const e=t.$implicit,i=b.oxw(2);b.xp6(2),b.Q6J("judgeregistration",e)("selectedDisciplinlist",i.wkPgms),b.xp6(4),b.hij(" ",i.isLoggedInAsClub()?"Bearbeiten":i.isLoggedIn()?"Best\xe4tigen":"Anzeigen"," "),b.xp6(1),b.Q6J("ngIf",i.isLoggedInAsClub())}}function S(e,t){if(1&e&&(b.TgZ(0,"ion-content"),b.TgZ(1,"ion-list"),b.YNc(2,q,4,0,"ion-item",3),b.ALo(3,"async"),b.YNc(4,y,8,4,"ion-item-sliding",12),b.qZA(),b.qZA()),2&e){const e=b.oxw();b.xp6(2),b.Q6J("ngIf",b.lcZ(3,2,e.busy)||!(e.competition&&e.currentRegistration&&e.sJudgeRegistrationList)),b.xp6(2),b.Q6J("ngForOf",e.filteredStartList)}}function L(e,t){if(1&e){const e=b.EpF();b.TgZ(0,"ion-button",20),b.NdJ("click",function(){return b.CHM(e),b.oxw().createRegistration()}),b._UZ(1,"ion-icon",21),b._uU(2," Neue Anmeldung... "),b.qZA()}}const M=[{path:"",component:(()=>{class e{constructor(e,t,i,n){this.navCtrl=e,this.route=t,this.backendService=i,this.alertCtrl=n,this.busy=new c.X(!1),this.tMyQueryStream=new g.xQ,this.sFilterTask=void 0,this.sSyncActions=[],this.backendService.competitions||this.backendService.getCompetitions()}ngOnInit(){this.busy.next(!0);const e=this.route.snapshot.paramMap.get("wkId");this.currentRegId=parseInt(this.route.snapshot.paramMap.get("regId")),e?this.competition=e:this.backendService.competition&&(this.competition=this.backendService.competition)}ionViewWillEnter(){this.refreshList()}refreshList(){this.busy.next(!0),this.currentRegistration=void 0,this.backendService.getClubRegistrations(this.competition).pipe((0,l.h)(e=>!!e.find(e=>e.id===this.currentRegId)),(0,u.q)(1)).subscribe(e=>{this.currentRegistration=e.find(e=>e.id===this.currentRegId),console.log("ask Judgees-list for registration"),this.backendService.loadJudgeRegistrations(this.competition,this.currentRegId).subscribe(e=>{this.busy.next(!1),this.judgeregistrations=e,this.tMyQueryStream.pipe((0,l.h)(e=>!!e&&!!e.target),(0,d.U)(e=>e.target.value||"*"),(0,p.b)(300),(0,h.x)(),(0,m.b)(e=>this.busy.next(!0)),(0,f.w)(this.runQuery(e)),(0,Z.B)()).subscribe(e=>{this.sFilteredRegistrationList=e,this.busy.next(!1)})})})}set competition(e){this.currentRegistration&&e===this.backendService.competition||this.backendService.loadJudgeProgramDisziplinList(this.competition).subscribe(e=>{this.wkPgms=e})}get competition(){return this.backendService.competition||""}getCompetitions(){return this.backendService.competitions||[]}competitionName(){return this.backendService.competitionName}runQuery(e){return t=>{const i=t.trim(),n=[];return i&&e&&e.forEach(e=>{this.filter(i)(e)&&n.push(e)}),(0,a.of)(n)}}set judgeregistrations(e){this.sJudgeRegistrationList=e,this.reloadList(this.sMyQuery)}get judgeregistrations(){return this.sJudgeRegistrationList}get filteredStartList(){return this.sFilteredRegistrationList||this.sJudgeRegistrationList||[]}reloadList(e){this.tMyQueryStream.next(e)}itemTapped(e,t){t.getOpenAmount().then(e=>{e>0?t.close():t.open("end")})}isLoggedInAsClub(){return this.backendService.loggedIn&&this.backendService.authenticatedClubId===this.currentRegId+""}isLoggedInAsAdmin(){return this.backendService.loggedIn&&!!this.backendService.authenticatedClubId}isLoggedIn(){return this.backendService.loggedIn}filter(e){const t=e.toUpperCase().split(" ");return i=>"*"===e.trim()||t.filter(e=>i.name.toUpperCase().indexOf(e)>-1||i.vorname.toUpperCase().indexOf(e)>-1||i.mobilephone.toUpperCase().indexOf(e)>-1||i.mail.toUpperCase().indexOf(e)>-1||i.comment.toUpperCase().indexOf(e)>-1||void 0).length===t.length}createRegistration(){this.navCtrl.navigateForward(`reg-judgelist/${this.backendService.competition}/${this.currentRegId}/0`)}edit(e,t){this.navCtrl.navigateForward(`reg-judgelist/${this.backendService.competition}/${this.currentRegId}/${e.id}`),t.close()}delete(e,t){t.close(),this.alertCtrl.create({header:"Achtung",subHeader:"L\xf6schen der Wertungsrichter-Anmeldung am Wettkampf",message:"Hiermit wird die Anmeldung von "+e.name+", "+e.vorname+" am Wettkampf gel\xf6scht.",buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{this.backendService.deleteJudgeRegistration(this.backendService.competition,this.currentRegId,e).subscribe(()=>{this.refreshList(),this.navCtrl.pop()})}}]}).then(e=>e.present())}}return e.\u0275fac=function(t){return new(t||e)(b.Y36(s.SH),b.Y36(r.gz),b.Y36(A.v),b.Y36(s.Br))},e.\u0275cmp=b.Xpm({type:e,selectors:[["app-reg-judgelist"]],decls:18,vars:5,consts:[["slot","start"],["defaultHref","/"],["no-padding",""],[4,"ngIf"],["slot","end",4,"ngIf"],["placeholder","Search","showCancelButton","never",3,"ngModel","ngModelChange","ionInput","ionCancel"],["size","large","expand","block","color","success",3,"click",4,"ngIf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["slot","end"],[4,"ngFor","ngForOf"],["slidingJudgeRegistrationItem",""],[3,"judgeregistration","selectedDisciplinlist","click"],["side","end"],["color","primary",3,"click"],["name","arrow-dropright-circle","ios","md-arrow-dropright-circle"],["color","danger",3,"click",4,"ngIf"],["color","danger",3,"click"],["size","large","expand","block","color","success",3,"click"],["slot","start","name","add"]],template:function(e,t){1&e&&(b.TgZ(0,"ion-header"),b.TgZ(1,"ion-toolbar"),b.TgZ(2,"ion-buttons",0),b._UZ(3,"ion-back-button",1),b.qZA(),b.TgZ(4,"ion-title"),b.TgZ(5,"ion-grid",2),b.TgZ(6,"ion-row"),b.TgZ(7,"ion-col"),b.TgZ(8,"ion-label"),b._uU(9,"Wertungsrichter-Anmeldungen"),b.qZA(),b.qZA(),b.YNc(10,C,5,1,"ion-col",3),b.qZA(),b.qZA(),b.qZA(),b.YNc(11,w,2,1,"ion-note",4),b.qZA(),b.TgZ(12,"ion-searchbar",5),b.NdJ("ngModelChange",function(e){return t.sMyQuery=e})("ionInput",function(e){return t.reloadList(e)})("ionCancel",function(e){return t.reloadList(e)}),b.qZA(),b.qZA(),b.YNc(13,S,5,4,"ion-content",3),b.TgZ(14,"ion-footer"),b.TgZ(15,"ion-toolbar"),b.TgZ(16,"ion-list"),b.YNc(17,L,3,0,"ion-button",6),b.qZA(),b.qZA(),b.qZA()),2&e&&(b.xp6(10),b.Q6J("ngIf",!t.competition),b.xp6(1),b.Q6J("ngIf",t.competition),b.xp6(1),b.Q6J("ngModel",t.sMyQuery),b.xp6(1),b.Q6J("ngIf",t.wkPgms&&t.wkPgms.length>0),b.xp6(4),b.Q6J("ngIf",t.isLoggedInAsClub()))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.jY,s.Nd,s.wI,s.Q$,n.O5,s.VI,s.j9,o.JJ,o.On,s.fr,s.q_,s.Ie,s.t9,s.QI,n.sg,s.n0,s.uN,s.W2,s.PQ,s.td,v,s.IK,s.u8,s.gu,s.YG],pipes:[n.uU,n.Ov],styles:[""]}),e})()}];let Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({imports:[[r.Bz.forChild(M)],r.Bz]}),e})(),U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.oAB({type:e}),e.\u0275inj=b.cJS({imports:[[n.ez,o.u5,s.Pc,Q]]}),e})()}}]);