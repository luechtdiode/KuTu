(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{DNuw:function(e,t,n){"use strict";n.r(t),n.d(t,"RegistrationPageModule",function(){return A});var i=n("ofXK"),o=n("3Pt+"),r=n("tyNb"),c=n("TEn/"),s=n("cygB"),a=n("XNiG"),b=n("2Vo4"),u=n("LRne"),l=n("pLZG"),d=n("lJxs"),g=n("Kj3r"),p=n("/uUt"),f=n("vkgz"),m=n("eIep"),h=n("w1tV"),y=n("IzEk"),v=n("fXoL"),k=function(){function e(){this.selected=new v.o}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=v.Bb({type:e,selectors:[["clublist-item"]],inputs:{clubregistration:"clubregistration",status:"status"},outputs:{selected:"selected"},decls:10,vars:5,consts:[[3,"click"],["slot","start"],["src","assets/imgs/verein.png"],["slot","end"]],template:function(e,t){1&e&&(v.Kb(0,"ion-item",0),v.Sb("click",function(){return t.selected?t.selected.emit(t.clubregistration):{}}),v.Kb(1,"ion-avatar",1),v.Ib(2,"img",2),v.Jb(),v.Kb(3,"ion-label"),v.kc(4),v.Ib(5,"br"),v.Kb(6,"small"),v.kc(7),v.Jb(),v.Jb(),v.Kb(8,"ion-note",3),v.kc(9),v.Jb(),v.Jb()),2&e&&(v.xb(4),v.nc("",t.clubregistration.vereinname,", ",t.clubregistration.verband,""),v.xb(3),v.nc("(",t.clubregistration.respVorname," ",t.clubregistration.respName,")"),v.xb(2),v.mc(" Status ",t.status," "))},directives:[c.q,c.d,c.v,c.z],styles:[""]}),e}();function S(e,t){if(1&e&&(v.Kb(0,"ion-select-option",10),v.kc(1),v.Vb(2,"date"),v.Jb()),2&e){var n=t.$implicit;v.ac("value",n.uuid),v.xb(1),v.mc(" ",n.titel+" "+v.Xb(2,2,n.datum,"dd-MM-yy"),"")}}function x(e,t){if(1&e){var n=v.Lb();v.Kb(0,"ion-select",8),v.Sb("ngModelChange",function(e){return v.ec(n),v.Ub().competition=e}),v.jc(1,S,3,5,"ion-select-option",9),v.Jb()}if(2&e){var i=v.Ub();v.ac("ngModel",i.competition),v.xb(1),v.ac("ngForOf",i.getCompetitions())}}function I(e,t){1&e&&(v.Kb(0,"ion-item"),v.Kb(1,"ion-label"),v.kc(2,"loading ..."),v.Jb(),v.Ib(3,"ion-spinner"),v.Jb())}function C(e,t){if(1&e){var n=v.Lb();v.Kb(0,"ion-item-option",19),v.Sb("click",function(){v.ec(n),v.Ub();var e=v.dc(1);return v.Ub(2).logout(e)}),v.Ib(1,"ion-icon",16),v.kc(2," Abmelden "),v.Jb()}}function K(e,t){if(1&e){var n=v.Lb();v.Kb(0,"ion-item-option",20),v.Sb("click",function(){v.ec(n);var e=v.Ub().$implicit,t=v.dc(1);return v.Ub(2).delete(e,t)}),v.Ib(1,"ion-icon",16),v.kc(2," L\xf6schen "),v.Jb()}}function L(e,t){if(1&e){var n=v.Lb();v.Kb(0,"ion-item-sliding",null,12),v.Kb(2,"clublist-item",13),v.Sb("click",function(){v.ec(n);var e=t.$implicit,i=v.dc(1);return v.Ub(2).itemTapped(e,i)}),v.Jb(),v.Kb(3,"ion-item-options",14),v.Kb(4,"ion-item-option",15),v.Sb("click",function(){v.ec(n);var e=t.$implicit,i=v.dc(1);return v.Ub(2).login(e,i)}),v.Ib(5,"ion-icon",16),v.kc(6),v.Jb(),v.jc(7,C,3,0,"ion-item-option",17),v.jc(8,K,3,0,"ion-item-option",18),v.Jb(),v.Jb()}if(2&e){var i=t.$implicit,o=v.Ub(2);v.xb(2),v.ac("clubregistration",i)("status",o.getStatus(i)),v.xb(4),v.mc(" ",o.isLoggedIn(i)?"Bearbeiten":"Login"," "),v.xb(1),v.ac("ngIf",o.isLoggedIn(i)),v.xb(1),v.ac("ngIf",o.isLoggedIn(i))}}function w(e,t){if(1&e&&(v.Kb(0,"ion-content"),v.Kb(1,"ion-list"),v.jc(2,I,4,0,"ion-item",5),v.Vb(3,"async"),v.jc(4,L,9,5,"ion-item-sliding",11),v.Jb(),v.Jb()),2&e){var n=v.Ub();v.xb(2),v.ac("ngIf",v.Wb(3,2,n.isBusy)),v.xb(2),v.ac("ngForOf",n.filteredStartList)}}function J(e,t){if(1&e){var n=v.Lb();v.Kb(0,"ion-button",21),v.Sb("click",function(){return v.ec(n),v.Ub().createRegistration()}),v.Ib(1,"ion-icon",22),v.kc(2," Neue Anmeldung... "),v.Jb()}}function O(e,t){if(1&e){var n=v.Lb();v.Kb(0,"ion-button",23,24),v.Sb("click",function(){return v.ec(n),v.Ub().logout()}),v.Ib(2,"ion-icon",25),v.kc(3,"Vereins-Login Abmelden"),v.Jb()}if(2&e){var i=v.Ub();v.ac("disabled",i.waiting)}}var j=[{path:"",component:function(){function e(e,t,n,i){this.navCtrl=e,this.route=t,this.backendService=n,this.alertCtrl=i,this.sSyncActions=[],this.tMyQueryStream=new a.a,this.sFilterTask=void 0,this.busy=new b.a(!1),this.backendService.competitions||this.backendService.getCompetitions()}return e.prototype.ngOnInit=function(){this.busy.next(!0);var e=this.route.snapshot.paramMap.get("wkId");e?this.competition=e:this.backendService.competition&&(this.competition=this.backendService.competition)},e.prototype.ionViewWillEnter=function(){this.getSyncActions()},Object.defineProperty(e.prototype,"stationFreezed",{get:function(){return this.backendService.stationFreezed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"competition",{get:function(){return this.backendService.competition||""},set:function(e){var t=this;this.clubregistrations&&e===this.backendService.competition||(this.busy.next(!0),this.clubregistrations=[],this.backendService.getClubRegistrations(e).subscribe(function(e){t.clubregistrations=e,t.busy.next(!1),t.tMyQueryStream.pipe(Object(l.a)(function(e){return!!e&&!!e.target}),Object(d.a)(function(e){return e.target.value||"*"}),Object(g.a)(300),Object(p.a)(),Object(f.a)(function(e){return t.busy.next(!0)}),Object(m.a)(t.runQuery(e)),Object(h.a)()).subscribe(function(e){t.sFilteredRegistrationList=e,t.busy.next(!1)})}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clubregistrations",{get:function(){return this.sClubRegistrationList},set:function(e){this.sClubRegistrationList=e,this.reloadList(this.sMyQuery)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filteredStartList",{get:function(){return this.sFilteredRegistrationList||this.sClubRegistrationList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isBusy",{get:function(){return this.busy},enumerable:!1,configurable:!0}),e.prototype.getSyncActions=function(){var e=this;this.backendService.loadRegistrationSyncActions().pipe(Object(y.a)(1)).subscribe(function(t){e.sSyncActions=t})},e.prototype.getStatus=function(e){return this.sSyncActions?this.sSyncActions.find(function(t){return t.verein.id===e.id})?"Abgleich ausstehend":"Nachgef\xfchrt":"n/a"},e.prototype.runQuery=function(e){var t=this;return function(n){var i=n.trim(),o=[];return i&&e&&e.forEach(function(e){t.filter(i)(e)&&o.push(e)}),Object(u.a)(o)}},e.prototype.reloadList=function(e){this.tMyQueryStream.next(e)},e.prototype.itemTapped=function(e,t){t.getOpenAmount().then(function(e){e>0?t.close():t.open("end")})},e.prototype.isLoggedIn=function(e){return this.backendService.loggedIn&&this.backendService.authenticatedClubId===e.id+""},e.prototype.isLoggedInAsClub=function(){return this.backendService.loggedIn&&!!this.backendService.authenticatedClubId},e.prototype.logout=function(e){var t=this;e&&e.close(),this.alertCtrl.create({header:"Achtung",message:"F\xfcr sp\xe4tere Bearbeitungen an der Registrierung des Vereins am Wettkampf ist ein erneutes Login notwendig.",buttons:[{text:"ABBRECHEN",role:"cancel",handler:function(){}},{text:"OKAY",handler:function(){t.backendService.clublogout()}}]}).then(function(e){return e.present()})},e.prototype.delete=function(e,t){var n=this;t.close(),this.alertCtrl.create({header:"Achtung",subHeader:"L\xf6schen der Vereins-Registrierung und dessen Anmeldungen am Wettkampf",message:"Hiermit wird die Vereinsanmeldung am Wettkampf komplett gel\xf6scht.",buttons:[{text:"ABBRECHEN",role:"cancel",handler:function(){}},{text:"OKAY",handler:function(){n.backendService.deleteClubRegistration(n.competition,e.id)}}]}).then(function(e){return e.present()})},e.prototype.login=function(e,t){var n=this;t.close(),this.isLoggedIn(e)?this.navCtrl.navigateForward("registration/"+this.competition+"/"+e.id):this.alertCtrl.create({header:"Vereins-Login",message:"Login f\xfcr die Bearbeitung der Vereinsanmeldung am Wettkampf "+this.competitionName(),inputs:[{name:"username",label:"Benutzername",placeholder:"Benutzername",value:""+this.backendService.currentUserName,type:"text"},{name:"pw",label:"Passwort",placeholder:"Passwort",type:"password"}],buttons:[{text:"Abbrechen",role:"cancel",handler:function(){console.log("Cancel clicked")}},{text:"Login",handler:function(t){return!!(t.pw&&t.pw.trim().length>0)&&(n.backendService.clublogin(e.id,t.pw).pipe(Object(y.a)(1)).subscribe(function(){n.navCtrl.navigateForward("registration/"+n.competition+"/"+e.id)}),!0)}}]}).then(function(e){return e.present()})},e.prototype.createRegistration=function(){this.navCtrl.navigateForward("registration/"+this.competition+"/0")},e.prototype.getCompetitions=function(){return this.backendService.competitions||[]},e.prototype.competitionName=function(){return this.backendService.competitionName},e.prototype.filter=function(e){var t=e.toUpperCase().split(" ");return function(n){return"*"===e.trim()||t.filter(function(e){return n.vereinname.toUpperCase().indexOf(e)>-1||n.verband.toUpperCase().indexOf(e)>-1||n.mail.toUpperCase().indexOf(e)>-1||n.respName.toUpperCase().indexOf(e)>-1||n.respVorname.toUpperCase().indexOf(e)>-1||void 0}).length===t.length}},e.\u0275fac=function(t){return new(t||e)(v.Hb(c.N),v.Hb(r.a),v.Hb(s.a),v.Hb(c.b))},e.\u0275cmp=v.Bb({type:e,selectors:[["app-registration"]],decls:18,vars:5,consts:[["slot","start"],["slot","icon-only","name","menu"],["slot","end"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Search","showCancelButton","never",3,"ngModel","ngModelChange","ionInput","ionCancel"],[4,"ngIf"],["size","large","expand","block","color","success",3,"click",4,"ngIf"],["size","large","expand","block","color","danger",3,"disabled","click",4,"ngIf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],["slidingClubRegistrationItem",""],[3,"clubregistration","status","click"],["side","end"],["color","primary",3,"click"],["name","arrow-dropright-circle","ios","md-arrow-dropright-circle"],["color","secondary",3,"click",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],["color","secondary",3,"click"],["color","danger",3,"click"],["size","large","expand","block","color","success",3,"click"],["slot","start","name","add"],["size","large","expand","block","color","danger",3,"disabled","click"],["btnDelete",""],["slot","start","name","log-out"]],template:function(e,t){1&e&&(v.Kb(0,"ion-header"),v.Kb(1,"ion-toolbar"),v.Kb(2,"ion-buttons",0),v.Kb(3,"ion-menu-toggle"),v.Kb(4,"ion-button"),v.Ib(5,"ion-icon",1),v.Jb(),v.Jb(),v.Jb(),v.Kb(6,"ion-title"),v.Kb(7,"ion-label"),v.kc(8,"Wettkampf-Anmeldungen"),v.Jb(),v.Jb(),v.Kb(9,"ion-buttons",2),v.jc(10,x,2,2,"ion-select",3),v.Jb(),v.Jb(),v.Kb(11,"ion-searchbar",4),v.Sb("ngModelChange",function(e){return t.sMyQuery=e})("ionInput",function(e){return t.reloadList(e)})("ionCancel",function(e){return t.reloadList(e)}),v.Jb(),v.Jb(),v.jc(12,w,5,4,"ion-content",5),v.Kb(13,"ion-footer"),v.Kb(14,"ion-toolbar"),v.Kb(15,"ion-list"),v.jc(16,J,3,0,"ion-button",6),v.jc(17,O,4,1,"ion-button",7),v.Jb(),v.Jb(),v.Jb()),2&e&&(v.xb(10),v.ac("ngIf",t.getCompetitions().length>0),v.xb(1),v.ac("ngModel",t.sMyQuery),v.xb(1),v.ac("ngIf",t.competition&&t.clubregistrations),v.xb(4),v.ac("ngIf",!t.isLoggedInAsClub()),v.xb(1),v.ac("ngIf",t.isLoggedInAsClub()))},directives:[c.n,c.J,c.h,c.y,c.g,c.o,c.I,c.v,i.m,c.C,c.R,o.d,o.g,c.l,c.w,c.D,c.Q,i.l,c.E,c.k,c.q,c.F,c.u,k,c.t,c.s],pipes:[i.e,i.b],styles:[""]}),e}()}],A=function(){function e(){}return e.\u0275mod=v.Fb({type:e}),e.\u0275inj=v.Eb({factory:function(t){return new(t||e)},imports:[[i.c,o.a,c.K,r.i.forChild(j)]]}),e}()}}]);