(self.webpackChunkresultcatcher=self.webpackChunkresultcatcher||[]).push([[9845],{9845:(e,t,n)=>{"use strict";n.r(t),n.d(t,{StationPageModule:()=>q});var i=n(8583),s=n(665),r=n(2952),o=n(2859),c=n(4762),a=n(7685),g=n(8002),d=n(8186),l=n(600);function u(e,t){if(1&e&&(d.TgZ(0,"ion-note",7),d._uU(1),d.ALo(2,"number"),d.qZA()),2&e){const e=d.oxw().$implicit;d.xp6(1),d.hij(" ",d.xi3(2,1,e.wertung.endnote,"2.3-3")," ")}}function h(e,t){1&e&&(d.TgZ(0,"ion-note",8),d._uU(1,"Kein Resultat"),d.qZA())}function p(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"ion-item",2),d.NdJ("click",function(t){const n=d.CHM(e).$implicit;return d.oxw(2).itemTapped(t,n)}),d.TgZ(1,"ion-avatar",3),d._UZ(2,"img",4),d.qZA(),d.TgZ(3,"ion-label"),d._uU(4),d.TgZ(5,"small"),d._uU(6),d.qZA(),d.qZA(),d.YNc(7,u,3,4,"ion-note",5),d.YNc(8,h,2,0,"ion-note",6),d.qZA()}if(2&e){const e=t.$implicit;d.xp6(4),d.hij("",e.vorname+" "+e.name," "),d.xp6(2),d.Oqu(" ("+e.wertung.riege+")"),d.xp6(1),d.Q6J("ngIf",void 0!==e.wertung.endnote),d.xp6(1),d.Q6J("ngIf",void 0===e.wertung.endnote)}}function f(e,t){if(1&e&&(d.TgZ(0,"ion-list"),d.YNc(1,p,9,4,"ion-item",1),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngForOf",e.items)}}let m=(()=>{class e{constructor(e,t){this.navCtrl=e,this.backendService=t}itemTapped(e,t){this.navCtrl.navigateForward(this.backendService.loggedIn?"wertung-editor/"+t.id:`athlet-view/${this.backendService.competition}/${t.id}`)}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(o.SH),d.Y36(l.v))},e.\u0275cmp=d.Xpm({type:e,selectors:[["riege-list"]],inputs:{items:"items"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["slot","start"],["src","assets/imgs/athlete.png"],["slot","end","class","result-value",4,"ngIf"],["slot","end","class","result-no-value",4,"ngIf"],["slot","end",1,"result-value"],["slot","end",1,"result-no-value"]],template:function(e,t){1&e&&d.YNc(0,f,2,1,"ion-list",0),2&e&&d.Q6J("ngIf",t.items&&t.items.length>0)},directives:[i.O5,o.q_,i.sg,o.Ie,o.BJ,o.Q$,o.uN],pipes:[i.JJ],styles:[".result-value[_ngcontent-%COMP%]{color:var(--ion-color-success)}.result-no-value[_ngcontent-%COMP%], .result-value[_ngcontent-%COMP%]{font-size:large;font-weight:700;margin-top:17px;margin-left:0;padding-left:0;padding-top:0}.result-no-value[_ngcontent-%COMP%]{color:var(--ion-color-warning)}"]}),e})();function v(e,t){1&e&&(d.TgZ(0,"div"),d.TgZ(1,"ion-title"),d._uU(2,"Resultate"),d.qZA(),d.qZA())}function b(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"ion-title"),d._uU(2,"Resultaterfassung"),d.TgZ(3,"div",15),d._uU(4),d.qZA(),d.qZA(),d.qZA()),2&e){const e=d.oxw();d.xp6(3),d.Q6J("ngClass",e.durchgangstateClass),d.xp6(1),d.Oqu(e.durchgangstate())}}function S(e,t){if(1&e&&(d._UZ(0,"riege-list",16),d.ALo(1,"async")),2&e){const e=d.oxw();d.Q6J("items",d.lcZ(1,1,e.getWertungen()))}}function Z(e,t){if(1&e&&(d.TgZ(0,"ion-note",17),d._uU(1),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.AsE("(",e.getSteps()[0]," bis ",e.getSteps()[e.getSteps().length-1],")")}}function k(e,t){1&e&&d._UZ(0,"ion-icon",18)}function x(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"ion-button",19),d.NdJ("click",function(){return d.CHM(e),d.oxw().finish()}),d._UZ(1,"ion-icon",20),d._uU(2," Eingaben abschliessen "),d.qZA()}if(2&e){const e=d.oxw();d.Q6J("disabled",!(e.geraet&&e.getSteps()))}}let A=(()=>{class e{constructor(e,t,n,i){this.navCtrl=e,this.backendService=t,this.alertCtrl=n,this.zone=i,this.durchgangopen=!1,this.geraete=[],this.backendService.durchgangStarted.pipe((0,g.U)(e=>e.filter(e=>(0,a.gT)(e.durchgang)===(0,a.gT)(this.backendService.durchgang)&&e.wettkampfUUID===this.backendService.competition).length>0)).subscribe(e=>{this.durchgangopen=e})}ionViewWillEnter(){this.geraete.length>0&&!this.backendService.captionmode&&this.backendService.activateCaptionMode()}ngOnInit(){this.backendService.geraeteSubject.subscribe(e=>{this.backendService.captionmode&&(this.geraete=e)})}durchgangstate(){return this.backendService.isWebsocketConnected()?this.durchgangopen?"gestartet":"gesperrt":"offline"}get durchgangstateClass(){return{open:this.backendService.isWebsocketConnected()&&this.durchgangopen,closed:this.backendService.isWebsocketConnected()&&!this.durchgangopen,offline:!this.backendService.isWebsocketConnected()}}set competition(e){this.stationFreezed||this.backendService.getDurchgaenge(e)}get competition(){return this.backendService.competition}set durchgang(e){this.stationFreezed||this.backendService.getGeraete(this.competition,e)}get durchgang(){return this.backendService.durchgang}set geraet(e){this.stationFreezed||this.backendService.getSteps(this.competition,this.durchgang,e)}get geraet(){return this.backendService.geraet}set step(e){this.backendService.getWertungen(this.competition,this.durchgang,this.geraet,e)}get step(){return this.backendService.step}get stationFreezed(){return this.backendService.stationFreezed}isLoggedIn(){return this.backendService.loggedIn}get nextStepCaption(){return this.isLoggedIn()?"N\xe4chste Riege":"N\xe4chstes Ger\xe4t"}get prevStepCaption(){return this.isLoggedIn()?"Vorherige Riege":"Vorheriges Ger\xe4t"}itemTapped(e){e.getOpenAmount().then(t=>{t>10||t<-10?e.close():e.open("end")})}nextStep(e){this.backendService.nextGeraet().subscribe(t=>{this.step=t,e.close()})}prevStep(e){this.backendService.prevGeraet().subscribe(t=>{this.step=t,e.close()})}get station(){return this.isLoggedIn()?this.step+". Riege "+this.geraetName()+", "+this.durchgang:this.step+". Ger\xe4t "+this.geraetName()+", "+this.durchgang}showCompleteAlert(){return(0,c.mG)(this,void 0,void 0,function*(){const e=this.alertCtrl.create({header:"Achtung",message:'Nach dem Abschliessen der Station "'+this.station+'" k\xf6nnen die erfassten Wertungen nur noch im Wettkampf-B\xfcro korrigiert werden.',buttons:[{text:"Abbrechen",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{const t=e.then(e=>e.dismiss());return this.zone.run(()=>{this.backendService.finishStation(this.competition,this.durchgang,this.geraet,this.step).subscribe(e=>{0===e.length&&t.then(()=>{this.navCtrl.pop()})})}),!1}}]});e.then(e=>e.present())})}toastMissingResult(e){return(0,c.mG)(this,void 0,void 0,function*(){const t=e[0].vorname.toUpperCase()+" "+e[0].name.toUpperCase()+" ("+e[0].verein+")";(yield this.alertCtrl.create({header:"Achtung",subHeader:"Fehlendes Resultat!",message:"In dieser Riege gibt es noch "+e.length+" leere Wertungen! - Bitte pr\xfcfen, ob "+t+" geturnt hat.",buttons:[{text:"Nicht geturnt",role:"edit",handler:()=>{e.splice(0,1),e.length>0?this.toastMissingResult(e):this.showCompleteAlert()}},{text:"Korrigieren",role:"cancel",handler:()=>{this.navCtrl.navigateForward("wertung-editor/"+e[0].id)}}]})).present()})}finish(){const e=this.backendService.wertungen.filter(e=>void 0===e.wertung.endnote);0!==e.length?this.toastMissingResult(e):this.showCompleteAlert()}getCompetitions(){return this.backendService.competitions}competitionName(){if(!this.backendService.competitions)return"";const e=this.backendService.competitions.filter(e=>e.uuid===this.backendService.competition).map(e=>e.titel+"<br>"+(e.datum+"T").split("T")[0].split("-").reverse().join("-"));return 1===e.length?e[0]:""}geraetName(){if(!this.geraete||0===this.geraete.length)return"";const e=this.geraete.filter(e=>e.id===this.backendService.geraet).map(e=>e.name);return 1===e.length?e[0]:""}getDurchgaenge(){return this.backendService.durchgaenge}getGeraete(){return this.geraete}getSteps(){return this.backendService.steps}getWertungen(){return this.backendService.wertungenSubject}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(o.SH),d.Y36(l.v),d.Y36(o.Br),d.Y36(d.R0b))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-station"]],decls:29,vars:14,consts:[["slot","start"],["defaultHref","/"],[4,"ngIf"],["slot","end",1,"ion-padding-end",3,"innerHtml"],[3,"items",4,"ngIf"],["slidingStepItem",""],[3,"click"],["slot","end",4,"ngIf"],["slot","end","name","arrow-dropright",4,"ngIf"],["side","start"],["color","primary",3,"disabled","click"],["name","arrow-dropleft-circle","ios","md-arrow-dropleft-circle"],["side","end"],["name","arrow-dropright-circle","ios","md-arrow-dropright-circle"],["size","large","expand","block","color","success",3,"disabled","click",4,"ngIf"],[1,"stateinfo",3,"ngClass"],[3,"items"],["slot","end"],["slot","end","name","arrow-dropright"],["size","large","expand","block","color","success",3,"disabled","click"],["slot","start","name","git-commit"]],template:function(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar"),d.TgZ(2,"ion-buttons",0),d._UZ(3,"ion-back-button",1),d.qZA(),d.YNc(4,v,3,0,"div",2),d.YNc(5,b,5,2,"div",2),d._UZ(6,"ion-note",3),d.qZA(),d.qZA(),d.TgZ(7,"ion-content"),d.YNc(8,S,2,3,"riege-list",4),d.ALo(9,"async"),d.qZA(),d.TgZ(10,"ion-footer"),d.TgZ(11,"ion-toolbar"),d.TgZ(12,"ion-list"),d.TgZ(13,"ion-item-sliding",null,5),d.TgZ(15,"ion-item",6),d.NdJ("click",function(){d.CHM(e);const n=d.MAs(14);return t.itemTapped(n)}),d.TgZ(16,"ion-label"),d._uU(17),d.qZA(),d.YNc(18,Z,2,2,"ion-note",7),d.YNc(19,k,1,0,"ion-icon",8),d.qZA(),d.TgZ(20,"ion-item-options",9),d.TgZ(21,"ion-item-option",10),d.NdJ("click",function(){d.CHM(e);const n=d.MAs(14);return t.prevStep(n)}),d._UZ(22,"ion-icon",11),d._uU(23),d.qZA(),d.qZA(),d.TgZ(24,"ion-item-options",12),d.TgZ(25,"ion-item-option",10),d.NdJ("click",function(){d.CHM(e);const n=d.MAs(14);return t.nextStep(n)}),d._UZ(26,"ion-icon",13),d._uU(27),d.qZA(),d.qZA(),d.qZA(),d.YNc(28,x,3,1,"ion-button",14),d.qZA(),d.qZA(),d.qZA()}2&e&&(d.xp6(4),d.Q6J("ngIf",!t.isLoggedIn()),d.xp6(1),d.Q6J("ngIf",t.isLoggedIn()),d.xp6(1),d.Q6J("innerHtml",t.competitionName(),d.oJD),d.xp6(2),d.Q6J("ngIf",t.geraet&&t.durchgang&&t.step&&d.lcZ(9,12,t.getWertungen())),d.xp6(9),d.Oqu(t.station),d.xp6(1),d.Q6J("ngIf",t.getSteps()&&t.getSteps().length>0),d.xp6(1),d.Q6J("ngIf",t.geraet&&t.getSteps()),d.xp6(2),d.Q6J("disabled",!t.geraet||!t.getSteps()),d.xp6(2),d.hij(" ",t.prevStepCaption," "),d.xp6(2),d.Q6J("disabled",!t.geraet||!t.getSteps()),d.xp6(2),d.hij(" ",t.nextStepCaption," "),d.xp6(1),d.Q6J("ngIf",t.isLoggedIn()&&t.durchgangopen))},directives:[o.Gu,o.sr,o.Sm,o.oU,o.cs,i.O5,o.uN,o.W2,o.fr,o.q_,o.td,o.Ie,o.Q$,o.IK,o.u8,o.gu,o.wd,i.mk,m,o.YG],pipes:[i.Ov],styles:[".stateinfo.closed[_ngcontent-%COMP%]{padding-left:5px;border-left:6px solid var(--ion-color-danger)}.stateinfo.open[_ngcontent-%COMP%]{padding-left:5px;border-left:6px solid var(--ion-color-success)}.stateinfo.offline[_ngcontent-%COMP%]{padding-left:5px;border-left:6px solid var(--ion-color-warning)}"]}),e})();var C=n(5051),w=n(4329);const T=[{path:"",component:A}];let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({providers:[w.N1],imports:[[i.ez,s.u5,o.Pc,r.Bz.forChild(T),C.K]]}),e})()}}]);