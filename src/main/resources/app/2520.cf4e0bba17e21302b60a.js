(self.webpackChunkresultcatcher=self.webpackChunkresultcatcher||[]).push([[2520],{2520:(e,t,i)=>{"use strict";i.r(t),i.d(t,{LastResultsPageModule:()=>k});var n=i(8583),o=i(665),s=i(881),r=i(2859),c=i(5435),l=i(8186),a=i(600),g=i(2997);function u(e,t){if(1&e&&(l.TgZ(0,"ion-select-option",9),l._uU(1),l.ALo(2,"date"),l.qZA()),2&e){const e=t.$implicit;l.Q6J("value",e.uuid),l.xp6(1),l.hij(" ",e.titel+" "+l.xi3(2,2,e.datum,"dd-MM-yy"),"")}}function p(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"ion-select",7),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw(2).competition=t}),l.YNc(1,u,3,5,"ion-select-option",8),l.qZA()}if(2&e){const e=l.oxw(2);l.Q6J("ngModel",e.competition),l.xp6(1),l.Q6J("ngForOf",e.getCompetitions())}}function m(e,t){if(1&e&&(l.TgZ(0,"ion-col"),l.TgZ(1,"ion-item"),l.TgZ(2,"ion-label"),l._uU(3,"Wettkampf"),l.qZA(),l.YNc(4,p,2,2,"ion-select",6),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(4),l.Q6J("ngIf",e.getCompetitions().length>0)}}function d(e,t){if(1&e&&(l.TgZ(0,"ion-note",10),l._uU(1),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.hij(" ",e.competitionName()," ")}}const h=function(e){return{"gradient-border":e}};function f(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"ion-col",11),l.NdJ("click",function(t){const i=l.CHM(e).$implicit;return l.oxw().itemTapped(t,i)}),l.TgZ(1,"div",12),l._UZ(2,"result-display",13),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit,i=l.oxw();l.xp6(1),l.Q6J("ngClass",l.VKq(3,h,i.isNew(e))),l.xp6(1),l.Q6J("item",e)("title",i.getTitle(e))}}let Z=(()=>{class e{constructor(e,t){this.navCtrl=e,this.backendService=t,this.items=[],this.geraete=[],this.backendService.competitions||this.backendService.getCompetitions()}ngOnInit(){this.backendService.activateNonCaptionMode(this.backendService.competition).subscribe(e=>{this.geraete=e||[],this.sortItems()}),this.backendService.newLastResults.pipe((0,c.h)(e=>!!e&&!!e.results)).subscribe(e=>{this.lastItems=this.items.map(e=>e.id*this.geraete.length+e.geraet),this.items=[],Object.keys(e.results).forEach(t=>{this.items.push(e.results[t])}),this.sortItems()})}sortItems(){this.items=this.items.sort((e,t)=>{let i=e.programm.localeCompare(t.programm);return 0===i&&(i=this.geraetOrder(e.geraet)-this.geraetOrder(t.geraet)),i}).filter(e=>void 0!==e.wertung.endnote)}isNew(e){return 0===this.lastItems.filter(t=>t===e.id*this.geraete.length+e.geraet).length}get stationFreezed(){return this.backendService.stationFreezed}set competition(e){this.stationFreezed||(this.backendService.getDurchgaenge(e),this.backendService.activateNonCaptionMode(this.backendService.competition).subscribe(e=>{this.geraete=e||[],this.sortItems()}))}get competition(){return this.backendService.competition||""}getCompetitions(){return this.backendService.competitions||[]}competitionName(){if(!this.backendService.competitions)return"";const e=this.backendService.competitions.filter(e=>e.uuid===this.backendService.competition).map(e=>e.titel+", am "+(e.datum+"T").split("T")[0].split("-").reverse().join("-"));return 1===e.length?e[0]:""}geraetOrder(e){return this.geraete?this.geraete.findIndex(t=>t.id===e):0}geraetText(e){if(!this.geraete)return"";const t=this.geraete.filter(t=>t.id===e).map(e=>e.name);return 1===t.length?t[0]:""}getTitle(e){return e.programm+" - "+this.geraetText(e.geraet)}itemTapped(e,t){}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(r.SH),l.Y36(a.v))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-last-results"]],decls:18,vars:3,consts:[["slot","start"],["slot","icon-only","name","menu"],["no-padding",""],[4,"ngIf"],["slot","end",4,"ngIf"],["class","align-self-start","size-xs","12","size-md","6","size-lg","4","size-xl","2","col-12","","col-sm-6","","col-lg-4","","col-xl-2","",3,"click",4,"ngFor","ngForOf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["slot","end"],["size-xs","12","size-md","6","size-lg","4","size-xl","2","col-12","","col-sm-6","","col-lg-4","","col-xl-2","",1,"align-self-start",3,"click"],[3,"ngClass"],[3,"item","title"]],template:function(e,t){1&e&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-buttons",0),l.TgZ(3,"ion-menu-toggle"),l.TgZ(4,"ion-button"),l._UZ(5,"ion-icon",1),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"ion-title"),l.TgZ(7,"ion-grid",2),l.TgZ(8,"ion-row"),l.TgZ(9,"ion-col"),l.TgZ(10,"ion-label"),l._uU(11,"Aktuelle Resultate"),l.qZA(),l.qZA(),l.YNc(12,m,5,1,"ion-col",3),l.qZA(),l.qZA(),l.qZA(),l.YNc(13,d,2,1,"ion-note",4),l.qZA(),l.qZA(),l.TgZ(14,"ion-content"),l.TgZ(15,"ion-grid",2),l.TgZ(16,"ion-row"),l.YNc(17,f,3,5,"ion-col",5),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(12),l.Q6J("ngIf",!t.competition),l.xp6(1),l.Q6J("ngIf",t.competition),l.xp6(4),l.Q6J("ngForOf",t.items))},directives:[r.Gu,r.sr,r.Sm,r.zc,r.YG,r.gu,r.wd,r.jY,r.Nd,r.wI,r.Q$,n.O5,r.W2,n.sg,r.Ie,r.t9,r.QI,o.JJ,o.On,r.n0,r.uN,n.mk,g.G],pipes:[n.uU],styles:[""]}),e})();var b=i(5051);const T=[{path:"",component:Z}];let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[n.ez,o.u5,r.Pc,s.Bz.forChild(T),b.K]]}),e})()}}]);