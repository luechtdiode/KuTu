(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{dX8N:function(t,e,n){"use strict";n.r(e),n.d(e,"AthletViewPageModule",function(){return v});var i=n("ofXK"),r=n("3Pt+"),o=n("tyNb"),s=n("TEn/"),c=n("cygB"),a=n("pLZG"),u=n("lJxs"),b=n("fXoL"),l=n("H2Ii");function p(t,e){if(1&t&&(b.Lb(0,"ion-note",5),b.lc(1),b.Kb()),2&t){var n=b.Vb();b.yb(1),b.nc(" ",n.competitionName()," ")}}var f=function(t){return{"gradient-border":t}};function m(t,e){if(1&t&&(b.Lb(0,"ion-col",6),b.Lb(1,"div",7),b.Jb(2,"result-display",8),b.Kb(),b.Kb()),2&t){var n=e.$implicit,i=b.Vb();b.yb(1),b.bc("ngClass",b.cc(3,f,i.isNew(n))),b.yb(1),b.bc("item",n)("title",i.getTitle(n))}}var d=function(){function t(t,e,n){this.navCtrl=t,this.route=e,this.backendService=n,this.items=[],this.lastItems=[],this.geraete=[]}return t.prototype.makeItemHash=function(t){return t.id*this.geraete.length*200+100*t.geraet+(t.wertung.endnote||-1)},t.prototype.ngOnInit=function(){var t=this,e=parseInt(this.route.snapshot.paramMap.get("athletId")),n=this.route.snapshot.paramMap.get("wkId");this.backendService.loadAthletWertungen(n,e).pipe(Object(a.a)(function(t){return!!t&&t.length>0})).subscribe(function(n){t.items=n,t.sortItems(e)}),this.backendService.geraeteSubject.subscribe(function(e){t.backendService.captionmode||(t.geraete=e)}),this.backendService.newLastResults.pipe(Object(a.a)(function(t){return!!t}),Object(u.a)(function(t){return t.results})).subscribe(function(e){t.lastItems=t.items.map(function(e){return t.makeItemHash(e)}),t.items=t.items.map(function(t){var n=e[t.wertung.wettkampfdisziplinId];return n&&n.id===t.id?n:t})})},t.prototype.sortItems=function(t){var e=this;this.items=this.items.sort(function(t,n){var i=t.programm.localeCompare(n.programm);return 0===i&&(i=e.geraetOrder(t.geraet)-e.geraetOrder(n.geraet)),i})},t.prototype.isNew=function(t){var e=this.makeItemHash(t);return 0===this.lastItems.filter(function(t){return t===e}).length},Object.defineProperty(t.prototype,"stationFreezed",{get:function(){return this.backendService.stationFreezed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"competition",{get:function(){return this.backendService.competition||""},enumerable:!1,configurable:!0}),t.prototype.getCompetitions=function(){return this.backendService.competitions||[]},t.prototype.competitionName=function(){var t=this;if(!this.backendService.competitions)return"";var e=this.backendService.competitions.filter(function(e){return e.uuid===t.backendService.competition}).map(function(t){return t.titel+", am "+(t.datum+"T").split("T")[0].split("-").reverse().join("-")});return 1===e.length?e[0]:""},t.prototype.geraetOrder=function(t){return this.geraete?this.geraete.findIndex(function(e){return e.id===t}):0},t.prototype.geraetText=function(t){if(!this.geraete)return"";var e=this.geraete.filter(function(e){return e.id===t}).map(function(t){return t.name});return 1===e.length?e[0]:""},t.prototype.getTitle=function(t){return t.programm+" - "+this.geraetText(t.geraet)},t.\u0275fac=function(e){return new(e||t)(b.Ib(s.N),b.Ib(o.a),b.Ib(c.a))},t.\u0275cmp=b.Cb({type:t,selectors:[["app-athlet-view"]],decls:15,vars:2,consts:[["slot","start"],["defaultHref","/"],["no-padding",""],["slot","end",4,"ngIf"],["class","align-self-start","size-xs","12","size-md","6","size-lg","4","size-xl","2","col-12","","col-sm-6","","col-lg-4","","col-xl-2","",4,"ngFor","ngForOf"],["slot","end"],["size-xs","12","size-md","6","size-lg","4","size-xl","2","col-12","","col-sm-6","","col-lg-4","","col-xl-2","",1,"align-self-start"],[3,"ngClass"],[3,"item","title"]],template:function(t,e){1&t&&(b.Lb(0,"ion-header"),b.Lb(1,"ion-toolbar"),b.Lb(2,"ion-buttons",0),b.Jb(3,"ion-back-button",1),b.Kb(),b.Lb(4,"ion-title"),b.Lb(5,"ion-grid",2),b.Lb(6,"ion-row"),b.Lb(7,"ion-col"),b.Lb(8,"ion-label"),b.lc(9,"Aktuelle Resultate"),b.Kb(),b.Kb(),b.Kb(),b.Kb(),b.Kb(),b.kc(10,p,2,1,"ion-note",3),b.Kb(),b.Kb(),b.Lb(11,"ion-content"),b.Lb(12,"ion-grid",2),b.Lb(13,"ion-row"),b.kc(14,m,3,5,"ion-col",4),b.Kb(),b.Kb(),b.Kb()),2&t&&(b.yb(10),b.bc("ngIf",e.competition),b.yb(4),b.bc("ngForOf",e.items))},directives:[s.n,s.J,s.h,s.e,s.f,s.I,s.m,s.B,s.j,s.v,i.m,s.k,i.l,s.z,i.k,l.a],styles:[""]}),t}(),g=n("bDjW"),h=[{path:"",component:d}],v=function(){function t(){}return t.\u0275mod=b.Gb({type:t}),t.\u0275inj=b.Fb({factory:function(e){return new(e||t)},imports:[[i.c,r.a,s.K,o.i.forChild(h),g.a]]}),t}()}}]);