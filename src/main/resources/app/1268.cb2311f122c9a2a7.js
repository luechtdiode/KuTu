"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1268],{1268:(M,p,i)=>{i.r(p),i.d(p,{CompetitionsPageModule:()=>I});var d=i(2200),u=i(4341),o=i(9893),m=i(2615),g=i(2350),h=i(5035),c=i(1413),y=i(6354),C=i(3294),f=i(5558),P=i(7647),F=i(7673),t=i(3664);function T(a,v){if(1&a){const e=t.RV6();t.j41(0,"ion-item",3),t.bIt("click",function(s){const l=m.eBV(e).$implicit,r=t.XpG(2);return m.Njj(r.itemTapped(s,l))}),t.j41(1,"ion-avatar",0),t.nrm(2,"img",4),t.k0s(),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"date"),t.nrm(6,"br"),t.j41(7,"small"),t.EFF(8),t.k0s()()()}if(2&a){const e=v.$implicit,n=t.XpG(2);t.R7$(4),t.Lme("",t.i5U(5,3,e.datum,"dd-MM-yyyy"),"\xa0",e.titel),t.R7$(4),t.JRh(n.getDetails(e))}}function L(a,v){if(1&a&&(t.j41(0,"ion-list"),t.Z7z(1,T,9,6,"ion-item",null,t.fX1),t.k0s()),2&a){const e=t.XpG();t.R7$(),t.Dyx(e.sFilteredWettkampfList)}}let E=(()=>{class a{navCtrl=(0,m.WQX)(h.q9);backendService=(0,m.WQX)(g.m);pgmList;sFilteredWettkampfList;sMyQuery;tMyQueryStream=new c.B;sFilterTask=void 0;constructor(){this.backendService.loadWKPrograms().subscribe(e=>{this.pgmList=e.reduce(function(n,s){return n[s.id]=s.name,n},{})}),this.backendService.competitionSubject.subscribe(e=>{this.sFilteredWettkampfList=e,this.sMyQuery="",this.tMyQueryStream.pipe((0,y.T)(s=>s?.target?.value||""),(0,C.F)(),(0,f.n)(this.runQuery(e)),(0,P.u)()).subscribe(s=>{this.sFilteredWettkampfList=s})}),this.backendService.competitions||this.backendService.getCompetitions()}ngOnInit(){}runQuery(e){const n=[...e||[]];return s=>{const l=s.trim();let r;if(r=[],n.length>0){const O=this.filter(l);r=[...n.filter(R=>O(R))]}return(0,F.of)(r)}}filter(e){const n=e.toUpperCase().split(" ");return s=>0===e.trim().length||"*"===e.trim()||0===n.length||n.filter(l=>{if(this.competitionName(s).toUpperCase().indexOf(l)>-1||this.getProgrammname(s.programmId).toUpperCase().indexOf(l)>-1||this.getDetails(s).toUpperCase().indexOf(l)>-1)return!0}).length===n.length}reloadList(e){this.tMyQueryStream.next(e)}getCompetitions(){return this.sFilteredWettkampfList}getProgrammname(e){return this.pgmList?this.pgmList[e]:""}getDetails(e){let n=this.getProgrammname(e.programmId);return e.teamrule&&"Keine Teams"!==e.teamrule&&(n=n+", Teams: "+e.teamrule),e.altersklassen?.length>0&&(n+=", Altersklassen"),e.jahrgangsklassen?.length>0&&(n+=", Jahrgangs-Altersklassen"),n}competitionName(e){return e.titel+", am "+(e.datum+"T").split("T")[0].split("-").reverse().join("-")}itemTapped(e,n){this.backendService.getDurchgaenge(n.uuid),this.navCtrl.navigateRoot("/home")}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=t.VBU({type:a,selectors:[["app-competitions"]],standalone:!1,decls:13,vars:2,consts:[["slot","start"],["slot","icon-only","name","menu"],["placeholder","Search","showCancelButton","never",3,"ngModelChange","ionInput","ionCancel","ngModel"],[3,"click"],["src","assets/imgs/wettkampf.png"]],template:function(n,s){1&n&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-menu-toggle")(4,"ion-button"),t.nrm(5,"ion-icon",1),t.k0s()()(),t.j41(6,"ion-title"),t.EFF(7,"Wettkampf App - "),t.j41(8,"small"),t.EFF(9,"Auswahl"),t.k0s()()(),t.j41(10,"ion-searchbar",2),t.mxI("ngModelChange",function(r){return t.DH7(s.sMyQuery,r)||(s.sMyQuery=r),r}),t.bIt("ionInput",function(r){return s.reloadList(r)})("ionCancel",function(r){return s.reloadList(r)}),t.k0s()(),t.j41(11,"ion-content"),t.nVh(12,L,3,0,"ion-list"),t.k0s()),2&n&&(t.R7$(10),t.R50("ngModel",s.sMyQuery),t.R7$(2),t.vxM(s.sFilteredWettkampfList&&s.sFilteredWettkampfList.length>0?12:-1))},dependencies:[u.BC,u.vS,o.mC,o.Jm,o.QW,o.W9,o.eU,o.iq,o.uz,o.he,o.nf,o.cA,o.S1,o.BC,o.ai,o.Gw,d.vh],encapsulation:2})}return a})();var j=i(8132),D=i(5079);const W=[{path:"",component:E}];let I=(()=>{class a{static \u0275fac=function(n){return new(n||a)};static \u0275mod=t.$C({type:a});static \u0275inj=m.G2t({imports:[d.MD,u.YN,o.bv,j.iI.forChild(W),D.h]})}return a})()},5079:(M,p,i)=>{i.d(p,{h:()=>h});var d=i(2200),u=i(4341),o=i(9893),m=i(3664),g=i(2615);let h=(()=>{class c{static \u0275fac=function(f){return new(f||c)};static \u0275mod=m.$C({type:c});static \u0275inj=g.G2t({imports:[d.MD,u.YN,o.bv]})}return c})()}}]);