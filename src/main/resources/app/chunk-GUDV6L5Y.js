import{h as se}from"./chunk-T4CFNL5Z.js";import{$a as te,B as a,Ba as R,Bb as ae,C as s,D as p,E as L,Fa as H,G as f,H as c,Ha as J,Ja as q,Ka as z,Na as G,O as m,P as F,Qa as X,R as P,Ra as Y,T as W,Ta as Z,U as Q,V as w,Y as A,Ya as $,Za as ee,_ as N,a as _,ba as j,c as C,ca as B,d as y,ea as D,eb as ie,ga as E,h as I,i as v,j as M,kb as ne,lb as oe,m as b,o as S,p as k,qa as O,sa as U,t as l,u,ub as re,v as T,va as V,w as x,x as d,z as g,za as K}from"./chunk-SCHL4OOB.js";import"./chunk-RTI2IBQE.js";import"./chunk-YPCCWTCR.js";import"./chunk-IXGCB5RR.js";import"./chunk-LOHYXAXQ.js";import"./chunk-N7UIYTQY.js";import"./chunk-HC6MZPB3.js";import"./chunk-J5OMF6R4.js";import"./chunk-KWW2H4SN.js";import"./chunk-7HA5TF5T.js";import"./chunk-ADN7P72M.js";import"./chunk-426OJ4HC.js";import"./chunk-RPQZFOYD.js";import"./chunk-GIGBYVJT.js";import"./chunk-MM5QLNJM.js";import"./chunk-H3GX5QFY.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-YPW7SQSE.js";import"./chunk-MCRJI3T3.js";import"./chunk-PL2JVG7G.js";import"./chunk-ACERUE7O.js";import"./chunk-2R6CW7ES.js";function ue(o,h){if(o&1){let e=L();a(0,"ion-item",5),f("click",function(i){let r=S(e).$implicit,n=c(2);return k(n.itemTapped(i,r))}),a(1,"ion-avatar",0),p(2,"img",6),s(),a(3,"ion-label"),m(4),A(5,"date"),p(6,"br"),a(7,"small"),m(8),s()()()}if(o&2){let e=h.$implicit,t=c(2);l(4),P("",N(5,3,e.datum,"dd-MM-yyyy"),"\xA0",e.titel,""),l(4),F(t.getDetails(e))}}function de(o,h){if(o&1&&(a(0,"ion-list"),d(1,ue,9,6,"ion-item",4),s()),o&2){let e=c();l(),g("ngForOf",e.sFilteredWettkampfList)}}var le=(()=>{class o{navCtrl;backendService;pgmList;sFilteredWettkampfList;sMyQuery;tMyQueryStream=new _;sFilterTask=void 0;constructor(e,t){this.navCtrl=e,this.backendService=t,this.backendService.loadWKPrograms().subscribe(i=>{this.pgmList=i.reduce(function(r,n){return r[n.id]=n.name,r},{})}),this.backendService.competitionSubject.subscribe(i=>{this.sFilteredWettkampfList=i,this.sMyQuery="",this.tMyQueryStream.pipe(y(n=>n?.target?.value||""),I(),M(this.runQuery(i)),v()).subscribe(n=>{this.sFilteredWettkampfList=n})}),this.backendService.competitions||this.backendService.getCompetitions()}ngOnInit(){}runQuery(e){let t=[...e||[]];return i=>{let r=i.trim(),n;if(n=[],t.length>0){let me=this.filter(r);n=[...t.filter(pe=>me(pe))]}return C(n)}}filter(e){let t=e.toUpperCase().split(" ");return i=>e.trim().length===0||e.trim()==="*"||t.length===0||t.filter(r=>{if(this.competitionName(i).toUpperCase().indexOf(r)>-1||this.getProgrammname(i.programmId).toUpperCase().indexOf(r)>-1||this.getDetails(i).toUpperCase().indexOf(r)>-1)return!0}).length===t.length}reloadList(e){this.tMyQueryStream.next(e)}getCompetitions(){return this.sFilteredWettkampfList}getProgrammname(e){return this.pgmList?this.pgmList[e]:""}getDetails(e){let t=this.getProgrammname(e.programmId);return e.teamrule&&e.teamrule!=="Keine Teams"&&(t=t+", Teams: "+e.teamrule),e.altersklassen?.length>0&&(t=t+", Altersklassen"),e.jahrgangsklassen?.length>0&&(t=t+", Jahrgangs-Altersklassen"),t}competitionName(e){return e.titel+", am "+(e.datum+"T").split("T")[0].split("-").reverse().join("-")}itemTapped(e,t){this.backendService.getDurchgaenge(t.uuid),this.navCtrl.navigateRoot("/home")}static \u0275fac=function(t){return new(t||o)(u(R),u(ae))};static \u0275cmp=T({type:o,selectors:[["app-competitions"]],standalone:!1,decls:13,vars:2,consts:[["slot","start"],["slot","icon-only","name","menu"],["placeholder","Search","showCancelButton","never",3,"ngModelChange","ionInput","ionCancel","ngModel"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["src","assets/imgs/wettkampf.png"]],template:function(t,i){t&1&&(a(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-menu-toggle")(4,"ion-button"),p(5,"ion-icon",1),s()()(),a(6,"ion-title"),m(7,"Wettkampf App - "),a(8,"small"),m(9,"Auswahl"),s()()(),a(10,"ion-searchbar",2),w("ngModelChange",function(n){return Q(i.sMyQuery,n)||(i.sMyQuery=n),n}),f("ionInput",function(n){return i.reloadList(n)})("ionCancel",function(n){return i.reloadList(n)}),s()(),a(11,"ion-content"),d(12,de,2,1,"ion-list",3),s()),t&2&&(l(10),W("ngModel",i.sMyQuery),l(2),g("ngIf",i.sFilteredWettkampfList&&i.sFilteredWettkampfList.length>0))},dependencies:[j,B,U,V,J,q,z,G,X,Y,Z,$,ee,te,ie,ne,oe,H,D],encapsulation:2})}return o})();var ge=[{path:"",component:le}],xe=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=x({type:o});static \u0275inj=b({imports:[E,K,re,O.forChild(ge),se]})}return o})();export{xe as CompetitionsPageModule};
