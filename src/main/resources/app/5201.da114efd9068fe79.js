"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5201],{5201:(T,g,a)=>{a.r(g),a.d(g,{AthletViewPageModule:()=>z});var h=a(9808),p=a(2382),d=a(1631),o=a(3349),u=a(9300),f=a(4004),t=a(7587),v=a(600),I=a(2997);function w(s,l){if(1&s&&(t.TgZ(0,"ion-note",5),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.hij(" ",e.competitionName()," ")}}const A=function(s){return{"gradient-border":s}};function x(s,l){if(1&s&&(t.TgZ(0,"ion-col",6)(1,"div",7),t._UZ(2,"result-display",8),t.qZA()()),2&s){const e=l.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,A,i.isNew(e))),t.xp6(1),t.Q6J("item",e)("title",i.getTitle(e))}}let b=(()=>{class s{constructor(e,i,r){this.navCtrl=e,this.route=i,this.backendService=r,this.items=[],this.lastItems=[],this.geraete=[]}makeItemHash(e){return e.id*this.geraete.length*200+100*e.geraet+(e.wertung.endnote||-1)}ngOnInit(){const e=parseInt(this.route.snapshot.paramMap.get("athletId")),i=this.route.snapshot.paramMap.get("wkId");this.backendService.loadAthletWertungen(i,e).pipe((0,u.h)(n=>!!n&&n.length>0)).subscribe(n=>{this.items=n,this.sortItems(e)}),this.backendService.geraeteSubject.subscribe(n=>{this.backendService.captionmode||(this.geraete=n)}),this.backendService.newLastResults.pipe((0,u.h)(n=>!!n),(0,f.U)(n=>n.results)).subscribe(n=>{this.lastItems=this.items.map(c=>this.makeItemHash(c)),this.items=this.items.map(c=>{const m=n[c.wertung.wettkampfdisziplinId];return m&&m.id===c.id?m:c})})}sortItems(e){this.items=this.items.sort((i,r)=>{let n=i.programm.localeCompare(r.programm);return 0===n&&(n=this.geraetOrder(i.geraet)-this.geraetOrder(r.geraet)),n})}isNew(e){const i=this.makeItemHash(e);return 0===this.lastItems.filter(r=>r===i).length}get stationFreezed(){return this.backendService.stationFreezed}get competition(){return this.backendService.competition||""}getCompetitions(){return this.backendService.competitions||[]}competitionName(){if(!this.backendService.competitions)return"";const e=this.backendService.competitions.filter(i=>i.uuid===this.backendService.competition).map(i=>i.titel+", am "+(i.datum+"T").split("T")[0].split("-").reverse().join("-"));return 1===e.length?e[0]:""}geraetOrder(e){return this.geraete?this.geraete.findIndex(r=>r.id===e):0}geraetText(e){if(!this.geraete)return"";const i=this.geraete.filter(r=>r.id===e).map(r=>r.name);return 1===i.length?i[0]:""}getTitle(e){return e.programm+" - "+this.geraetText(e.geraet)}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(o.SH),t.Y36(d.gz),t.Y36(v.v))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-athlet-view"]],decls:15,vars:2,consts:[["slot","start"],["defaultHref","/"],["no-padding",""],["slot","end",4,"ngIf"],["class","align-self-start","size-xs","12","size-md","6","size-lg","4","size-xl","2","col-12","","col-sm-6","","col-lg-4","","col-xl-2","",4,"ngFor","ngForOf"],["slot","end"],["size-xs","12","size-md","6","size-lg","4","size-xl","2","col-12","","col-sm-6","","col-lg-4","","col-xl-2","",1,"align-self-start"],[3,"ngClass"],[3,"item","title"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t._UZ(3,"ion-back-button",1),t.qZA(),t.TgZ(4,"ion-title")(5,"ion-grid",2)(6,"ion-row")(7,"ion-col")(8,"ion-label"),t._uU(9,"Aktuelle Resultate"),t.qZA()()()()(),t.YNc(10,w,2,1,"ion-note",3),t.qZA()(),t.TgZ(11,"ion-content")(12,"ion-grid",2)(13,"ion-row"),t.YNc(14,x,3,5,"ion-col",4),t.qZA()()()),2&e&&(t.xp6(10),t.Q6J("ngIf",i.competition),t.xp6(4),t.Q6J("ngForOf",i.items))},directives:[o.Gu,o.sr,o.Sm,o.oU,o.cs,o.wd,o.jY,o.Nd,o.wI,o.Q$,h.O5,o.uN,o.W2,h.sg,h.mk,I.G],styles:[""]}),s})();var S=a(5051);const k=[{path:"",component:b}];let z=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[h.ez,p.u5,o.Pc,d.Bz.forChild(k),S.K]]}),s})()}}]);