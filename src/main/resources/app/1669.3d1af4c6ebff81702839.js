(self.webpackChunkresultcatcher=self.webpackChunkresultcatcher||[]).push([[1669],{1669:(t,e,i)=>{"use strict";i.r(e),i.d(e,{SearchAthletPageModule:()=>U});var n=i(8583),o=i(665),r=i(881),s=i(2267),c=i(7709),l=i(6215),a=i(5917),g=i(5435),p=i(8002),u=i(4395),m=i(7519),h=i(8819),d=i(3190),Z=i(8186),f=i(600);let b=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["startlist-item"]],inputs:{programm:"programm",teilnehmer:"teilnehmer"},outputs:{selected:"selected"},decls:16,vars:4,consts:[[3,"click"],["slot","start"],["src","assets/imgs/athlete.png"],["slot","end"]],template:function(t,e){1&t&&(Z.TgZ(0,"ion-item",0),Z.NdJ("click",function(){return e.selected?e.selected.emit(e.teilnehmer):{}}),Z.TgZ(1,"ion-avatar",1),Z._UZ(2,"img",2),Z.qZA(),Z.TgZ(3,"ion-label"),Z._uU(4),Z.TgZ(5,"small"),Z._uU(6),Z.qZA(),Z._UZ(7,"br"),Z.TgZ(8,"small"),Z.TgZ(9,"em"),Z._uU(10),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(11,"ion-note",3),Z._uU(12," Startger\xe4t:"),Z._UZ(13,"br"),Z.TgZ(14,"b"),Z._uU(15),Z.qZA(),Z.qZA(),Z.qZA()),2&t&&(Z.xp6(4),Z.hij("",e.teilnehmer.athlet,"\xa0"),Z.xp6(2),Z.Oqu(e.teilnehmer.verein+", "+e.programm.programm),Z.xp6(4),Z.Oqu(e.teilnehmer.durchgang),Z.xp6(5),Z.Oqu(e.teilnehmer.start))},directives:[s.Ie,s.BJ,s.Q$,s.uN],styles:["ion-note[_ngcontent-%COMP%]{text-align:end}"]}),t})();function v(t,e){if(1&t&&(Z.TgZ(0,"ion-select-option",9),Z._uU(1),Z.ALo(2,"date"),Z.qZA()),2&t){const t=e.$implicit;Z.Q6J("value",t.uuid),Z.xp6(1),Z.hij(" ",t.titel+" "+Z.xi3(2,2,t.datum,"dd-MM-yy"),"")}}function A(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"ion-select",7),Z.NdJ("ngModelChange",function(e){return Z.CHM(t),Z.oxw(2).competition=e}),Z.YNc(1,v,3,5,"ion-select-option",8),Z.qZA()}if(2&t){const t=Z.oxw(2);Z.Q6J("ngModel",t.competition),Z.xp6(1),Z.Q6J("ngForOf",t.getCompetitions())}}function x(t,e){if(1&t&&(Z.TgZ(0,"ion-col"),Z.TgZ(1,"ion-item"),Z.TgZ(2,"ion-label"),Z._uU(3,"Wettkampf"),Z.qZA(),Z.YNc(4,A,2,2,"ion-select",6),Z.qZA(),Z.qZA()),2&t){const t=Z.oxw();Z.xp6(4),Z.Q6J("ngIf",t.getCompetitions().length>0)}}function T(t,e){if(1&t&&(Z.TgZ(0,"ion-note",10),Z._uU(1),Z.qZA()),2&t){const t=Z.oxw();Z.xp6(1),Z.hij(" ",t.competitionName()," ")}}function q(t,e){1&t&&(Z.TgZ(0,"ion-item"),Z.TgZ(1,"ion-label"),Z._uU(2,"loading ..."),Z.qZA(),Z._UZ(3,"ion-spinner"),Z.qZA())}function k(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"ion-item-sliding",null,12),Z.TgZ(2,"startlist-item",13),Z.NdJ("click",function(){const e=Z.CHM(t).$implicit,i=Z.MAs(1);return Z.oxw(3).itemTapped(e,i)}),Z.qZA(),Z.TgZ(3,"ion-item-options",14),Z.TgZ(4,"ion-item-option",15),Z.NdJ("click",function(){const e=Z.CHM(t).$implicit,i=Z.MAs(1);return Z.oxw(3).followAthlet(e,i)}),Z._UZ(5,"ion-icon",16),Z._uU(6),Z.qZA(),Z.TgZ(7,"ion-item-option",17),Z.NdJ("click",function(){const e=Z.CHM(t).$implicit,i=Z.MAs(1);return Z.oxw(3).followRiege(e,i)}),Z._UZ(8,"ion-icon",16),Z._uU(9," Riege verfolgen "),Z.qZA(),Z.qZA(),Z.qZA()}if(2&t){const t=e.$implicit,i=Z.oxw().$implicit;Z.xp6(2),Z.Q6J("teilnehmer",t)("programm",i),Z.xp6(4),Z.hij(" ",t.athlet," verfolgen ")}}function y(t,e){if(1&t&&(Z.TgZ(0,"div"),Z.TgZ(1,"ion-item-divider"),Z._uU(2),Z.qZA(),Z.YNc(3,k,10,3,"ion-item-sliding",11),Z.qZA()),2&t){const t=e.$implicit;Z.xp6(2),Z.Oqu(t.programm),Z.xp6(1),Z.Q6J("ngForOf",t.teilnehmer)}}function S(t,e){if(1&t&&(Z.TgZ(0,"ion-content"),Z.TgZ(1,"ion-list"),Z.YNc(2,q,4,0,"ion-item",3),Z.ALo(3,"async"),Z.YNc(4,y,4,2,"div",11),Z.qZA(),Z.qZA()),2&t){const t=Z.oxw();Z.xp6(2),Z.Q6J("ngIf",Z.lcZ(3,2,t.isBusy)),Z.xp6(2),Z.Q6J("ngForOf",t.filteredStartList.programme)}}let w=(()=>{class t{constructor(t,e,i){this.navCtrl=t,this.route=e,this.backendService=i,this.tMyQueryStream=new c.xQ,this.sFilterTask=void 0,this.busy=new l.X(!1),this.backendService.competitions||this.backendService.getCompetitions()}ngOnInit(){this.busy.next(!0);const t=this.route.snapshot.paramMap.get("wkId");t&&(this.competition=t)}get stationFreezed(){return this.backendService.stationFreezed}set competition(t){this.startlist&&t===this.backendService.competition||(this.busy.next(!0),this.startlist={},this.backendService.getDurchgaenge(t),this.backendService.loadStartlist(void 0).subscribe(t=>{this.startlist=t,this.busy.next(!1);const e=this.tMyQueryStream.pipe((0,g.h)(t=>!!t&&!!t.target&&!!t.target.value),(0,p.U)(t=>t.target.value),(0,u.b)(1e3),(0,m.x)(),(0,h.B)());e.subscribe(t=>{this.busy.next(!0)}),e.pipe((0,d.w)(this.runQuery(t))).subscribe(t=>{this.sFilteredStartList=t,this.busy.next(!1)})}))}get competition(){return this.backendService.competition||""}set startlist(t){this.sStartList=t,this.reloadList(this.sMyQuery)}get startlist(){return this.sStartList}get filteredStartList(){return this.sFilteredStartList||{programme:[]}}get isBusy(){return this.busy}runQuery(t){return e=>{const i=e.trim();let n;return n={programme:[]},i&&t&&t.programme.forEach(e=>{const o=this.filter(i),r=e.teilnehmer.filter(t=>o(t,e.programm));r.length>0&&(n=Object.assign({},t,{programme:[...n.programme,{programm:e.programm,teilnehmer:r}]}))}),(0,a.of)(n)}}reloadList(t){this.tMyQueryStream.next(t)}itemTapped(t,e){e.getOpenAmount().then(t=>{t>0?e.close():e.open("end")})}followAthlet(t,e){e.close(),this.navCtrl.navigateForward(`athlet-view/${this.backendService.competition}/${t.athletid}`)}followRiege(t,e){e.close(),this.backendService.getGeraete(this.backendService.competition,t.durchgang).subscribe(e=>{this.backendService.getSteps(this.backendService.competition,t.durchgang,e.find(e=>e.name===t.start).id).subscribe(t=>{this.navCtrl.navigateForward("station")})})}getCompetitions(){return this.backendService.competitions||[]}competitionName(){if(!this.backendService.competitions)return"";const t=this.backendService.competitions.filter(t=>t.uuid===this.backendService.competition).map(t=>t.titel+", am "+(t.datum+"T").split("T")[0].split("-").reverse().join("-"));return 1===t.length?(this.startlist||(this.competition=this.backendService.competition),t[0]):""}filter(t){const e=t.toUpperCase().split(" ");return(t,i)=>e.filter(e=>t.athletid+""===e||t.athlet.toUpperCase().indexOf(e)>-1||t.verein.toUpperCase().indexOf(e)>-1||t.start.toUpperCase().indexOf(e)>-1||t.verein.toUpperCase().indexOf(e)>-1||i.indexOf(e)>-1||void 0).length===e.length}}return t.\u0275fac=function(e){return new(e||t)(Z.Y36(s.SH),Z.Y36(r.gz),Z.Y36(f.v))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-search-athlet"]],decls:16,vars:4,consts:[["slot","start"],["slot","icon-only","name","menu"],["no-padding",""],[4,"ngIf"],["slot","end",4,"ngIf"],["placeholder","Search","showCancelButton","never",3,"ngModel","ngModelChange","ionInput","ionCancel"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["slot","end"],[4,"ngFor","ngForOf"],["slidingAthletItem",""],[3,"teilnehmer","programm","click"],["side","end"],["color","primary",3,"click"],["name","arrow-dropright-circle","ios","md-arrow-dropright-circle"],["color","secondary",3,"click"]],template:function(t,e){1&t&&(Z.TgZ(0,"ion-header"),Z.TgZ(1,"ion-toolbar"),Z.TgZ(2,"ion-buttons",0),Z.TgZ(3,"ion-menu-toggle"),Z.TgZ(4,"ion-button"),Z._UZ(5,"ion-icon",1),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(6,"ion-title"),Z.TgZ(7,"ion-grid",2),Z.TgZ(8,"ion-row"),Z.TgZ(9,"ion-col"),Z.TgZ(10,"ion-label"),Z._uU(11,"Suche Turner/-in"),Z.qZA(),Z.qZA(),Z.YNc(12,x,5,1,"ion-col",3),Z.qZA(),Z.qZA(),Z.qZA(),Z.YNc(13,T,2,1,"ion-note",4),Z.qZA(),Z.TgZ(14,"ion-searchbar",5),Z.NdJ("ngModelChange",function(t){return e.sMyQuery=t})("ionInput",function(t){return e.reloadList(t)})("ionCancel",function(t){return e.reloadList(t)}),Z.qZA(),Z.qZA(),Z.YNc(15,S,5,4,"ion-content",3)),2&t&&(Z.xp6(12),Z.Q6J("ngIf",!e.competition),Z.xp6(1),Z.Q6J("ngIf",e.competition),Z.xp6(1),Z.Q6J("ngModel",e.sMyQuery),Z.xp6(1),Z.Q6J("ngIf",e.competition&&e.startlist&&e.startlist.programme))},directives:[s.Gu,s.sr,s.Sm,s.zc,s.YG,s.gu,s.wd,s.jY,s.Nd,s.wI,s.Q$,n.O5,s.VI,s.j9,o.JJ,o.On,s.Ie,s.t9,s.QI,n.sg,s.n0,s.uN,s.W2,s.q_,s.PQ,s.rH,s.td,b,s.IK,s.u8],pipes:[n.uU,n.Ov],styles:[""]}),t})();var C=i(5051);const M=[{path:"",component:w}];let U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Z.oAB({type:t}),t.\u0275inj=Z.cJS({imports:[[n.ez,o.u5,s.Pc,r.Bz.forChild(M),C.K]]}),t})()}}]);