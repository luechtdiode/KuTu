(self.webpackChunkresultcatcher=self.webpackChunkresultcatcher||[]).push([[7272],{7272:(e,t,n)=>{"use strict";n.r(t),n.d(t,{HomePageModule:()=>C});var i=n(8583),o=n(665),c=n(2859),r=n(2952),s=n(7685),g=n(8002),a=n(8186),l=n(600);function u(e,t){if(1&e&&(a.TgZ(0,"ion-label"),a._uU(1),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.AsE(" ",e.durchgang,", ",e.geraetName()," ")}}function d(e,t){if(1&e&&(a.TgZ(0,"ion-note",15),a._uU(1),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.hij(" ","Riege "+e.step," ")}}function p(e,t){1&e&&a._UZ(0,"ion-icon",16)}function h(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-list"),a.TgZ(1,"ion-item"),a.TgZ(2,"ion-label"),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"ion-item"),a.YNc(5,u,2,2,"ion-label",4),a.qZA(),a.TgZ(6,"ion-item-sliding",null,6),a.TgZ(8,"ion-item",7),a.NdJ("click",function(){a.CHM(e);const t=a.MAs(7);return a.oxw().itemTapped(t)}),a.TgZ(9,"ion-label"),a._uU(10),a.qZA(),a.YNc(11,d,2,1,"ion-note",8),a.YNc(12,p,1,0,"ion-icon",9),a.qZA(),a.TgZ(13,"ion-item-options",10),a.TgZ(14,"ion-item-option",11),a.NdJ("click",function(){a.CHM(e);const t=a.MAs(7);return a.oxw().prevStep(t)}),a._UZ(15,"ion-icon",12),a._uU(16," Vorherige Riege "),a.qZA(),a.qZA(),a.TgZ(17,"ion-item-options",13),a.TgZ(18,"ion-item-option",11),a.NdJ("click",function(){a.CHM(e);const t=a.MAs(7);return a.oxw().nextStep(t)}),a._UZ(19,"ion-icon",14),a._uU(20," N\xe4chste Riege "),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(3),a.Oqu(e.competitionName()),a.xp6(2),a.Q6J("ngIf",e.durchgang&&e.geraet),a.xp6(5),a.Oqu(e.geraet&&e.getSteps()?"Riege ("+e.getSteps()[0]+" bis "+e.getSteps()[e.getSteps().length-1]+")":"Keine Daten"),a.xp6(1),a.Q6J("ngIf",e.geraet&&e.getSteps()&&e.getSteps().length>0),a.xp6(1),a.Q6J("ngIf",e.geraet&&e.getSteps()),a.xp6(2),a.Q6J("disabled",!e.geraet||!e.getSteps()),a.xp6(4),a.Q6J("disabled",!e.geraet||!e.getSteps())}}function Z(e,t){if(1&e&&(a.TgZ(0,"ion-select-option",20),a._uU(1),a.ALo(2,"date"),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e.uuid),a.xp6(1),a.hij(" ",e.titel+" "+a.xi3(2,2,e.datum,"dd-MM-yy"),"")}}function f(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-select",18),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw(2).competition=t}),a.YNc(1,Z,3,5,"ion-select-option",19),a.qZA()}if(2&e){const e=a.oxw(2);a.Q6J("ngModel",e.competition),a.xp6(1),a.Q6J("ngForOf",e.getCompetitions())}}function m(e,t){if(1&e&&(a.TgZ(0,"ion-select-option",20),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e),a.xp6(1),a.Oqu(e)}}function b(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-select",18),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw(2).durchgang=t}),a.YNc(1,m,2,2,"ion-select-option",19),a.qZA()}if(2&e){const e=a.oxw(2);a.Q6J("ngModel",e.durchgang),a.xp6(1),a.Q6J("ngForOf",e.getDurchgaenge())}}function k(e,t){if(1&e&&(a.TgZ(0,"ion-select-option",20),a._uU(1),a.qZA()),2&e){const e=t.$implicit;a.Q6J("value",e.id),a.xp6(1),a.Oqu(e.name)}}function S(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-select",18),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw(2).geraet=t}),a.YNc(1,k,2,2,"ion-select-option",19),a.qZA()}if(2&e){const e=a.oxw(2);a.Q6J("ngModel",e.geraet),a.xp6(1),a.Q6J("ngForOf",e.getGeraete())}}function A(e,t){if(1&e&&(a.TgZ(0,"ion-note",15),a._uU(1),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.hij(" ","Riege "+e.step," ")}}function x(e,t){1&e&&a._UZ(0,"ion-icon",16)}function T(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-list"),a.TgZ(1,"ion-item"),a.TgZ(2,"ion-label"),a._uU(3,"Wettkampf"),a.qZA(),a.YNc(4,f,2,2,"ion-select",17),a.qZA(),a.TgZ(5,"ion-item"),a.TgZ(6,"ion-label"),a._uU(7,"Durchgang"),a.qZA(),a.YNc(8,b,2,2,"ion-select",17),a.qZA(),a.TgZ(9,"ion-item"),a.TgZ(10,"ion-label"),a._uU(11,"Ger\xe4t"),a.qZA(),a.YNc(12,S,2,2,"ion-select",17),a.qZA(),a.TgZ(13,"ion-item-sliding",null,6),a.TgZ(15,"ion-item",7),a.NdJ("click",function(){a.CHM(e);const t=a.MAs(14);return a.oxw().itemTapped(t)}),a.TgZ(16,"ion-label"),a._uU(17),a.qZA(),a.YNc(18,A,2,1,"ion-note",8),a.YNc(19,x,1,0,"ion-icon",9),a.qZA(),a.TgZ(20,"ion-item-options",10),a.TgZ(21,"ion-item-option",11),a.NdJ("click",function(){a.CHM(e);const t=a.MAs(14);return a.oxw().prevStep(t)}),a._UZ(22,"ion-icon",12),a._uU(23," Vorherige Riege "),a.qZA(),a.qZA(),a.TgZ(24,"ion-item-options",13),a.TgZ(25,"ion-item-option",11),a.NdJ("click",function(){a.CHM(e);const t=a.MAs(14);return a.oxw().nextStep(t)}),a._UZ(26,"ion-icon",14),a._uU(27," N\xe4chste Riege "),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(4),a.Q6J("ngIf",e.getCompetitions()),a.xp6(4),a.Q6J("ngIf",e.competition&&e.getDurchgaenge()&&e.getDurchgaenge().length>0),a.xp6(4),a.Q6J("ngIf",e.durchgang&&e.getGeraete()&&e.getGeraete().length>0),a.xp6(5),a.Oqu(e.geraet&&e.getSteps()?"Riege ("+e.getSteps()[0]+" bis "+e.getSteps()[e.getSteps().length-1]+")":"Keine Daten"),a.xp6(1),a.Q6J("ngIf",e.geraet&&e.getSteps()&&e.getSteps().length>0),a.xp6(1),a.Q6J("ngIf",e.geraet&&e.getSteps()),a.xp6(2),a.Q6J("disabled",!e.geraet||!e.getSteps()),a.xp6(4),a.Q6J("disabled",!e.geraet||!e.getSteps())}}function v(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-button",21),a.NdJ("click",function(){return a.CHM(e),a.oxw().navToStation()}),a._UZ(1,"ion-icon",22),a._uU(2," Resultate "),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("disabled",!(e.geraet&&e.getSteps()))}}function q(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-button",21),a.NdJ("click",function(){return a.CHM(e),a.oxw().navToStation()}),a._UZ(1,"ion-icon",23),a._uU(2," Resultate "),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("disabled",!(e.geraet&&e.getSteps()))}}function J(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-list"),a.TgZ(1,"ion-button",24),a.NdJ("click",function(){return a.CHM(e),a.oxw().unlock()}),a._UZ(2,"ion-icon",25),a._uU(3,"Einstellung zur\xfccksetzen "),a.qZA(),a.qZA()}}function N(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"ion-list"),a.TgZ(1,"ion-button",26),a.NdJ("click",function(){return a.CHM(e),a.oxw().logout()}),a._UZ(2,"ion-icon",27),a._uU(3,"Abmelden "),a.qZA(),a.qZA()}}let w=(()=>{class e{constructor(e,t,n){this.navCtrl=e,this.backendService=t,this.alertCtrl=n,this.durchgangopen=!1,this.backendService.getCompetitions(),this.backendService.durchgangStarted.pipe((0,g.U)(e=>e.filter(e=>(0,s.gT)(e.durchgang)===(0,s.gT)(this.backendService.durchgang)&&e.wettkampfUUID===this.backendService.competition).length>0)).subscribe(e=>{this.durchgangstate=e?"gestartet":"gesperrt",this.durchgangopen=e})}ngOnInit(){this.backendService.competition&&this.backendService.getDurchgaenge(this.backendService.competition)}get isLocked(){return this.backendService.stationFreezed}get isOpenAndActive(){return this.durchgangopen&&this.backendService.isWebsocketConnected()}get isLoggedIn(){return this.backendService.loggedIn}set competition(e){this.isLocked||this.backendService.getDurchgaenge(e)}get competition(){return this.backendService.competition||""}set durchgang(e){this.isLocked||this.backendService.getGeraete(this.competition,e)}get durchgang(){return this.backendService.durchgang||""}set geraet(e){this.isLocked||this.backendService.getSteps(this.competition,this.durchgang,e)}get geraet(){return this.backendService.geraet||-1}set step(e){this.backendService.getWertungen(this.competition,this.durchgang,this.geraet,e)}get step(){return this.backendService.step||-1}itemTapped(e){e.getOpenAmount().then(t=>{t>10||t<-10?e.close():e.open("end")})}nextStep(e){this.step=this.backendService.nextStep(),e.close()}prevStep(e){this.step=this.backendService.prevStep(),e.close()}getCompetitions(){return this.backendService.competitions}competitionName(){if(!this.backendService.competitions)return"";const e=this.backendService.competitions.filter(e=>e.uuid===this.backendService.competition).map(e=>e.titel+", am "+(e.datum+"T").split("T")[0].split("-").reverse().join("-"));return 1===e.length?e[0]:""}geraetName(){if(!this.backendService.geraete)return"";const e=this.backendService.geraete.filter(e=>e.id===this.backendService.geraet).map(e=>e.name);return 1===e.length?e[0]:""}getDurchgaenge(){return this.backendService.durchgaenge}getGeraete(){return this.backendService.geraete}getSteps(){return!this.backendService.steps&&this.backendService.geraet&&this.backendService.getSteps(this.competition,this.durchgang,this.geraet),this.backendService.steps}navToStation(){this.navCtrl.navigateForward("station")}unlock(){const e=this.competitionName()+"/"+this.durchgang+"/"+this.geraetName();this.alertCtrl.create({header:"Info",message:'Die Fixierung auf die Station "'+e+'" wird aufgehoben.<br>Du kannst dann die Station frei einstellen.',buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{this.backendService.unlock()}}]}).then(e=>e.present())}logout(){this.alertCtrl.create({header:"Achtung",subHeader:"Nach dem Abmelden k\xf6nnen keine weiteren Resultate mehr erfasst werden.",message:"F\xfcr die Erfassung weiterer Resultate wird eine Neuanmeldung erforderlich.",buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{this.backendService.logout()}}]}).then(e=>e.present())}finish(){const e=this.geraetName()+"/Riege #"+this.step,t=this.alertCtrl.create({header:"Achtung",message:'Nach dem Abschliessen der Station "'+e+'" k\xf6nnen die erfassten Wertungen nur noch im Wettkampf-B\xfcro korrigiert werden.',buttons:[{text:"ABBRECHEN",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{const e=t.then(e=>e.dismiss());return this.backendService.finishStation(this.competition,this.durchgang,this.geraet,this.step).subscribe(t=>{0===t.length&&e.then(()=>{this.navCtrl.pop()})}),!1}}]});t.then(e=>e.present())}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(c.SH),a.Y36(l.v),a.Y36(c.Br))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-page-home"]],decls:18,vars:8,consts:[[3,"translucent"],["slot","start"],["slot","icon-only","name","menu"],[3,"fullscreen"],[4,"ngIf"],["size","large","expand","block","color","primary",3,"disabled","click",4,"ngIf"],["slidingStepItem",""],[3,"click"],["slot","end",4,"ngIf"],["slot","end","name","arrow-dropright",4,"ngIf"],["side","start"],["color","secondary",3,"disabled","click"],["name","arrow-dropleft-circle","ios","md-arrow-dropleft-circle"],["side","end"],["name","arrow-dropright-circle","ios","md-arrow-dropright-circle"],["slot","end"],["slot","end","name","arrow-dropright"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["size","large","expand","block","color","primary",3,"disabled","click"],["slot","start","name","list"],["slot","start","name","create"],["size","large","expand","block","color","warning",3,"click"],["slot","start","name","unlock"],["size","large","expand","block","color","danger",3,"click"],["slot","start","name","log-out"]],template:function(e,t){1&e&&(a.TgZ(0,"ion-header",0),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-buttons",1),a.TgZ(3,"ion-menu-toggle"),a.TgZ(4,"ion-button"),a._UZ(5,"ion-icon",2),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"ion-title"),a._uU(7,"Wettkampf App"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"ion-content",3),a.YNc(9,h,21,7,"ion-list",4),a.YNc(10,T,28,8,"ion-list",4),a.TgZ(11,"ion-list"),a.YNc(12,v,3,1,"ion-button",5),a.YNc(13,q,3,1,"ion-button",5),a.qZA(),a.qZA(),a.TgZ(14,"ion-footer"),a.TgZ(15,"ion-toolbar"),a.YNc(16,J,4,0,"ion-list",4),a.YNc(17,N,4,0,"ion-list",4),a.qZA(),a.qZA()),2&e&&(a.Q6J("translucent",!0),a.xp6(8),a.Q6J("fullscreen",!0),a.xp6(1),a.Q6J("ngIf",t.isLocked),a.xp6(1),a.Q6J("ngIf",!t.isLocked),a.xp6(2),a.Q6J("ngIf",!t.isLoggedIn),a.xp6(1),a.Q6J("ngIf",t.isLoggedIn),a.xp6(3),a.Q6J("ngIf",t.isLocked),a.xp6(1),a.Q6J("ngIf",t.isLoggedIn))},directives:[c.Gu,c.sr,c.Sm,c.zc,c.YG,c.gu,c.wd,c.W2,i.O5,c.q_,c.fr,c.Ie,c.Q$,c.td,c.IK,c.u8,c.uN,c.t9,c.QI,o.JJ,o.On,i.sg,c.n0],pipes:[i.uU],encapsulation:2}),e})(),C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({providers:[],imports:[[i.ez,o.u5,c.Pc,r.Bz.forChild([{path:"",component:w}])]]}),e})()}}]);