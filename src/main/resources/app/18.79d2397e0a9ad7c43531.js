(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"08HZ":function(e,t,n){"use strict";n.r(t),n.d(t,"RegJudgelistPageModule",(function(){return A}));var i=n("ofXK"),o=n("3Pt+"),r=n("TEn/"),c=n("tyNb"),s=n("2Vo4"),a=n("XNiG"),u=n("LRne"),b=n("pLZG"),l=n("IzEk"),g=n("lJxs"),d=n("Kj3r"),p=n("/uUt"),f=n("vkgz"),m=n("eIep"),h=n("w1tV"),v=(n("ppBR"),n("cygB")),k=n("fXoL");function y(e,t){if(1&e&&(k.Kb(0,"ion-note",4),k.kc(1),k.Jb()),2&e){var n=k.Ub();k.xb(1),k.mc(" ",n.judgeregistration.comment," ")}}var I=function(){function e(){this.selected=new k.n}return e.prototype.ngOnInit=function(){},e.prototype.getProgramList=function(){var e=[];return void 0===this.selectedDisciplinlist&&(this.selectedDisciplinlist=[]),this.selectedDisciplinlist.forEach((function(t){void 0===e.find((function(e){return e.program==t.program}))&&e.push(t)})),e},e.prototype.getProgrammDisciplinText=function(e){return e.program+"/"+e.disziplin},e.prototype.getProgrammText=function(e){return e.program},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=k.Bb({type:e,selectors:[["app-reg-judge-item"]],inputs:{judgeregistration:"judgeregistration",status:"status",selectedDisciplinlist:"selectedDisciplinlist"},outputs:{selected:"selected"},decls:9,vars:6,consts:[[3,"click"],["slot","start"],["src","assets/imgs/chief.png"],["slot","end",4,"ngIf"],["slot","end"]],template:function(e,t){1&e&&(k.Kb(0,"ion-item",0),k.Sb("click",(function(){return t.selected?t.selected.emit(t.judgeregistration):{}})),k.Kb(1,"ion-avatar",1),k.Ib(2,"img",2),k.Jb(),k.Kb(3,"ion-label"),k.kc(4),k.Ib(5,"br"),k.Kb(6,"small"),k.kc(7),k.Jb(),k.Jb(),k.jc(8,y,2,1,"ion-note",3),k.Jb()),2&e&&(k.xb(4),k.oc("",t.judgeregistration.name,", ",t.judgeregistration.vorname," (",t.judgeregistration.geschlecht,")"),k.xb(3),k.nc("",t.judgeregistration.mobilephone,", ",t.judgeregistration.mail,""),k.xb(1),k.ac("ngIf",t.judgeregistration.comment))},directives:[r.p,r.c,r.u,i.m,r.y],styles:[""]}),e}();function J(e,t){if(1&e&&(k.Kb(0,"ion-select-option",10),k.kc(1),k.Vb(2,"date"),k.Jb()),2&e){var n=t.$implicit;k.ac("value",n.uuid),k.xb(1),k.mc(" ",n.titel+" "+k.Xb(2,2,n.datum,"dd-MM-yy"),"")}}function j(e,t){if(1&e){var n=k.Lb();k.Kb(0,"ion-select",8),k.Sb("ngModelChange",(function(e){return k.ec(n),k.Ub(2).competition=e})),k.jc(1,J,3,5,"ion-select-option",9),k.Jb()}if(2&e){var i=k.Ub(2);k.ac("ngModel",i.competition),k.xb(1),k.ac("ngForOf",i.getCompetitions())}}function x(e,t){if(1&e&&(k.Kb(0,"ion-col"),k.Kb(1,"ion-item"),k.Kb(2,"ion-label"),k.kc(3,"Wettkampf"),k.Jb(),k.jc(4,j,2,2,"ion-select",7),k.Jb(),k.Jb()),2&e){var n=k.Ub();k.xb(4),k.ac("ngIf",n.getCompetitions().length>0)}}function K(e,t){if(1&e&&(k.Kb(0,"ion-note",11),k.kc(1),k.Jb()),2&e){var n=k.Ub();k.xb(1),k.mc(" ",n.competitionName()," ")}}function C(e,t){1&e&&(k.Kb(0,"ion-item"),k.Kb(1,"ion-label"),k.kc(2,"loading ..."),k.Jb(),k.Ib(3,"ion-spinner"),k.Jb())}function S(e,t){if(1&e){var n=k.Lb();k.Kb(0,"ion-item-option",19),k.Sb("click",(function(){k.ec(n);var e=k.Ub().$implicit,t=k.dc(1);return k.Ub(2).delete(e,t)})),k.Ib(1,"ion-icon",17),k.kc(2," L\xf6schen "),k.Jb()}}function L(e,t){if(1&e){var n=k.Lb();k.Kb(0,"ion-item-sliding",null,13),k.Kb(2,"app-reg-judge-item",14),k.Sb("click",(function(){k.ec(n);var e=t.$implicit,i=k.dc(1);return k.Ub(2).itemTapped(e,i)})),k.Jb(),k.Kb(3,"ion-item-options",15),k.Kb(4,"ion-item-option",16),k.Sb("click",(function(){k.ec(n);var e=t.$implicit,i=k.dc(1);return k.Ub(2).edit(e,i)})),k.Ib(5,"ion-icon",17),k.kc(6),k.Jb(),k.jc(7,S,3,0,"ion-item-option",18),k.Jb(),k.Jb()}if(2&e){var i=t.$implicit,o=k.Ub(2);k.xb(2),k.ac("judgeregistration",i)("selectedDisciplinlist",o.wkPgms),k.xb(4),k.mc(" ",o.isLoggedInAsClub()?"Bearbeiten":o.isLoggedIn()?"Best\xe4tigen":"Anzeigen"," "),k.xb(1),k.ac("ngIf",o.isLoggedInAsClub())}}function w(e,t){if(1&e&&(k.Kb(0,"ion-content"),k.Kb(1,"ion-list"),k.jc(2,C,4,0,"ion-item",3),k.Vb(3,"async"),k.jc(4,L,8,4,"ion-item-sliding",12),k.Jb(),k.Jb()),2&e){var n=k.Ub();k.xb(2),k.ac("ngIf",k.Wb(3,2,n.isBusy)||!(n.competition&&n.currentRegistration&&n.sJudgeRegistrationList)),k.xb(2),k.ac("ngForOf",n.filteredStartList)}}function O(e,t){if(1&e){var n=k.Lb();k.Kb(0,"ion-button",20),k.Sb("click",(function(){return k.ec(n),k.Ub().createRegistration()})),k.Ib(1,"ion-icon",21),k.kc(2," Neue Anmeldung... "),k.Jb()}}var R=[{path:"",component:function(){function e(e,t,n,i){this.navCtrl=e,this.route=t,this.backendService=n,this.alertCtrl=i,this.busy=new s.a(!1),this.tMyQueryStream=new a.a,this.sFilterTask=void 0,this.sSyncActions=[],this.backendService.competitions||this.backendService.getCompetitions()}return e.prototype.ngOnInit=function(){this.busy.next(!0);var e=this.route.snapshot.paramMap.get("wkId");this.currentRegId=parseInt(this.route.snapshot.paramMap.get("regId")),e?this.competition=e:this.backendService.competition&&(this.competition=this.backendService.competition)},e.prototype.ionViewWillEnter=function(){this.refreshList()},e.prototype.refreshList=function(){var e=this;this.busy.next(!0),this.currentRegistration=void 0,this.backendService.getClubRegistrations(this.competition).pipe(Object(b.a)((function(t){return!!t.find((function(t){return t.id===e.currentRegId}))})),Object(l.a)(1)).subscribe((function(t){e.currentRegistration=t.find((function(t){return t.id===e.currentRegId})),console.log("ask Judgees-list for registration"),e.backendService.loadJudgeRegistrations(e.competition,e.currentRegId).subscribe((function(t){e.busy.next(!1),e.judgeregistrations=t,e.tMyQueryStream.pipe(Object(b.a)((function(e){return!!e&&!!e.target})),Object(g.a)((function(e){return e.target.value||"*"})),Object(d.a)(300),Object(p.a)(),Object(f.a)((function(t){return e.busy.next(!0)})),Object(m.a)(e.runQuery(t)),Object(h.a)()).subscribe((function(t){e.sFilteredRegistrationList=t,e.busy.next(!1)}))}))}))},Object.defineProperty(e.prototype,"competition",{get:function(){return this.backendService.competition||""},set:function(e){var t=this;this.currentRegistration&&e===this.backendService.competition||this.backendService.loadJudgeProgramDisziplinList(this.competition).subscribe((function(e){t.wkPgms=e}))},enumerable:!1,configurable:!0}),e.prototype.getCompetitions=function(){return this.backendService.competitions||[]},e.prototype.competitionName=function(){return this.backendService.competitionName},e.prototype.runQuery=function(e){var t=this;return function(n){var i=n.trim(),o=[];return i&&e&&e.forEach((function(e){t.filter(i)(e)&&o.push(e)})),Object(u.a)(o)}},Object.defineProperty(e.prototype,"judgeregistrations",{get:function(){return this.sJudgeRegistrationList},set:function(e){this.sJudgeRegistrationList=e,this.reloadList(this.sMyQuery)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filteredStartList",{get:function(){return this.sFilteredRegistrationList||this.sJudgeRegistrationList||[]},enumerable:!1,configurable:!0}),e.prototype.reloadList=function(e){this.tMyQueryStream.next(e)},e.prototype.itemTapped=function(e,t){t.getOpenAmount().then((function(e){e>0?t.close():t.open("end")}))},e.prototype.isLoggedInAsClub=function(){return this.backendService.loggedIn&&this.backendService.authenticatedClubId===this.currentRegId+""},e.prototype.isLoggedInAsAdmin=function(){return this.backendService.loggedIn&&!!this.backendService.authenticatedClubId},e.prototype.filter=function(e){var t=e.toUpperCase().split(" ");return function(n){return"*"===e.trim()||t.filter((function(e){return n.name.toUpperCase().indexOf(e)>-1||n.vorname.toUpperCase().indexOf(e)>-1||n.mobilephone.toUpperCase().indexOf(e)>-1||n.mail.toUpperCase().indexOf(e)>-1||n.comment.toUpperCase().indexOf(e)>-1||void 0})).length===t.length}},e.prototype.createRegistration=function(){this.navCtrl.navigateForward("reg-judgelist/"+this.backendService.competition+"/"+this.currentRegId+"/0")},e.prototype.edit=function(e,t){this.navCtrl.navigateForward("reg-judgelist/"+this.backendService.competition+"/"+this.currentRegId+"/"+e.id),t.close()},e.prototype.delete=function(e,t){var n=this;t.close(),this.alertCtrl.create({header:"Achtung",subHeader:"L\xf6schen der Wertungsrichter-Anmeldung am Wettkampf",message:"Hiermit wird die Anmeldung von "+e.name+", "+e.vorname+" am Wettkampf gel\xf6scht.",buttons:[{text:"ABBRECHEN",role:"cancel",handler:function(){}},{text:"OKAY",handler:function(){n.backendService.deleteJudgeRegistration(n.backendService.competition,n.currentRegId,e).subscribe((function(){n.refreshList(),n.navCtrl.pop()}))}}]}).then((function(e){return e.present()}))},e.\u0275fac=function(t){return new(t||e)(k.Hb(r.M),k.Hb(c.a),k.Hb(v.a),k.Hb(r.a))},e.\u0275cmp=k.Bb({type:e,selectors:[["app-reg-judgelist"]],decls:18,vars:5,consts:[["slot","start"],["defaultHref","/"],["no-padding",""],[4,"ngIf"],["slot","end",4,"ngIf"],["placeholder","Search","showCancelButton","never",3,"ngModel","ngModelChange","ionInput","ionCancel"],["size","large","expand","block","color","success",3,"click",4,"ngIf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange",4,"ngIf"],["placeholder","Bitte ausw\xe4hlen","okText","Okay","cancelText","Abbrechen",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["slot","end"],[4,"ngFor","ngForOf"],["slidingJudgeRegistrationItem",""],[3,"judgeregistration","selectedDisciplinlist","click"],["side","end"],["color","primary",3,"click"],["name","arrow-dropright-circle","ios","md-arrow-dropright-circle"],["color","danger",3,"click",4,"ngIf"],["color","danger",3,"click"],["size","large","expand","block","color","success",3,"click"],["slot","start","name","add"]],template:function(e,t){1&e&&(k.Kb(0,"ion-header"),k.Kb(1,"ion-toolbar"),k.Kb(2,"ion-buttons",0),k.Ib(3,"ion-back-button",1),k.Jb(),k.Kb(4,"ion-title"),k.Kb(5,"ion-grid",2),k.Kb(6,"ion-row"),k.Kb(7,"ion-col"),k.Kb(8,"ion-label"),k.kc(9,"Wertungsrichter-Anmeldungen"),k.Jb(),k.Jb(),k.jc(10,x,5,1,"ion-col",3),k.Jb(),k.Jb(),k.Jb(),k.jc(11,K,2,1,"ion-note",4),k.Jb(),k.Kb(12,"ion-searchbar",5),k.Sb("ngModelChange",(function(e){return t.sMyQuery=e}))("ionInput",(function(e){return t.reloadList(e)}))("ionCancel",(function(e){return t.reloadList(e)})),k.Jb(),k.Jb(),k.jc(13,w,5,4,"ion-content",3),k.Kb(14,"ion-footer"),k.Kb(15,"ion-toolbar"),k.Kb(16,"ion-list"),k.jc(17,O,3,0,"ion-button",6),k.Jb(),k.Jb(),k.Jb()),2&e&&(k.xb(10),k.ac("ngIf",!t.competition),k.xb(1),k.ac("ngIf",t.competition),k.xb(1),k.ac("ngModel",t.sMyQuery),k.xb(1),k.ac("ngIf",t.wkPgms&&t.wkPgms.length>0),k.xb(4),k.ac("ngIf",t.isLoggedInAsClub()))},directives:[r.m,r.I,r.g,r.d,r.e,r.H,r.l,r.A,r.i,r.u,i.m,r.B,r.Q,o.d,o.g,r.k,r.v,r.p,r.C,r.P,i.l,r.D,r.y,r.j,r.E,r.t,I,r.s,r.r,r.n,r.f],pipes:[i.e,i.b],styles:[""]}),e}()}],M=function(){function e(){}return e.\u0275mod=k.Fb({type:e}),e.\u0275inj=k.Eb({factory:function(t){return new(t||e)},imports:[[c.i.forChild(R)],c.i]}),e}(),A=function(){function e(){}return e.\u0275mod=k.Fb({type:e}),e.\u0275inj=k.Eb({factory:function(t){return new(t||e)},imports:[[i.c,o.a,r.J,M]]}),e}()}}]);