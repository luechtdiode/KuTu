"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[379],{379:(C,h,r)=>{r.r(h),r.d(h,{StationPageModule:()=>B});var g=r(2200),v=r(4341),f=r(8132),s=r(9893),p=r(467),a=r(2615),e=r(3664),k=r(5035),b=r(2350),u=r(3537),_=r(6354),S=r(8103),R=r(7705);function F(i,l){if(1&i&&(e.j41(0,"ion-note",3),e.EFF(1),e.nI1(2,"number"),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,t.wertung.endnote,"2.3-3")," ")}}function M(i,l){1&i&&(e.j41(0,"ion-note",4),e.EFF(1,"Kein Resultat"),e.k0s())}function I(i,l){if(1&i){const t=e.RV6();e.j41(0,"ion-item",0),e.bIt("click",function(o){const c=a.eBV(t).$implicit,m=e.XpG(2);return a.Njj(m.itemTapped(o,c))}),e.j41(1,"ion-avatar",1),e.nrm(2,"img",2),e.k0s(),e.j41(3,"ion-label"),e.EFF(4),e.j41(5,"small"),e.EFF(6),e.k0s()(),e.nVh(7,F,3,4,"ion-note",3),e.nVh(8,M,2,0,"ion-note",4),e.k0s()}if(2&i){const t=l.$implicit;e.R7$(4),e.SpI("",t.vorname+" "+t.name," "),e.R7$(2),e.JRh(" ("+t.wertung.riege+")"),e.R7$(),e.vxM(void 0!==t.wertung.endnote?7:-1),e.R7$(),e.vxM(void 0===t.wertung.endnote?8:-1)}}function G(i,l){if(1&i&&(e.j41(0,"ion-list"),e.Z7z(1,I,9,4,"ion-item",null,e.fX1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Dyx(t.items())}}let j=(()=>{class i{navCtrl=(0,a.WQX)(k.q9);backendService=(0,a.WQX)(b.m);constructor(){}items=(0,R.hFB)(void 0);itemTapped(t,n){this.navCtrl.navigateForward(this.backendService.loggedIn?"wertung-editor/"+n.id:`athlet-view/${this.backendService.competition}/${n.id}`)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=e.VBU({type:i,selectors:[["riege-list"]],inputs:{items:[1,"items"]},standalone:!1,decls:1,vars:1,consts:[[3,"click"],["slot","start"],["src","assets/imgs/athlete.png"],["slot","end",1,"result-value"],["slot","end",1,"result-no-value"]],template:function(n,o){1&n&&e.nVh(0,G,3,0,"ion-list"),2&n&&e.vxM(o.items()&&o.items().length>0?0:-1)},dependencies:[s.mC,s.uz,s.he,s.nf,s.JI,g.QX],styles:[".result-value[_ngcontent-%COMP%]{font-size:large;font-weight:700;margin-top:17px;margin-left:0;padding-left:0;padding-top:0;color:var(--ion-color-success)}.result-no-value[_ngcontent-%COMP%]{font-size:large;font-weight:700;margin-top:17px;margin-left:0;padding-left:0;padding-top:0;color:var(--ion-color-warning)}"]})}return i})();function T(i,l){1&i&&(e.j41(0,"div")(1,"ion-title"),e.EFF(2,"Resultate"),e.k0s()())}function P(i,l){if(1&i&&(e.j41(0,"div")(1,"ion-title"),e.EFF(2,"Resultaterfassung"),e.j41(3,"div",13),e.EFF(4),e.k0s()()()),2&i){const t=e.XpG();e.R7$(3),e.Y8G("ngClass",t.durchgangstateClass),e.R7$(),e.JRh(t.durchgangstate())}}function E(i,l){if(1&i&&(e.nrm(0,"riege-list",4),e.nI1(1,"async")),2&i){const t=e.XpG();e.Y8G("items",e.bMT(1,1,t.getWertungen()))}}function $(i,l){1&i&&e.nrm(0,"ion-icon",7)}function x(i,l){if(1&i){const t=e.RV6();e.j41(0,"ion-button",14),e.bIt("click",function(){a.eBV(t);const o=e.XpG();return a.Njj(o.finish())}),e.nrm(1,"ion-icon",15),e.EFF(2," Eingaben abschliessen "),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("disabled",!(t.geraet&&t.getSteps()))}}let W=(()=>{class i{navCtrl=(0,a.WQX)(k.q9);backendService=(0,a.WQX)(b.m);alertCtrl=(0,a.WQX)(s.hG);zone=(0,a.WQX)(e.SKi);durchgangopen=!1;geraete=[];constructor(){this.backendService.durchgangStarted.pipe((0,_.T)(t=>t.filter(n=>(0,u.MB)(n.durchgang)===(0,u.MB)(this.backendService.durchgang)&&n.wettkampfUUID===this.backendService.competition).length>0)).subscribe(t=>{this.durchgangopen=t})}ionViewWillEnter(){this.geraete.length>0&&!this.backendService.captionmode&&this.backendService.activateCaptionMode()}ngOnInit(){this.backendService.geraeteSubject.subscribe(t=>{this.backendService.captionmode&&(this.geraete=t)})}durchgangstate(){return this.backendService.isWebsocketConnected()?this.durchgangopen?"gestartet":"gesperrt":"offline"}get durchgangstateClass(){return{open:this.backendService.isWebsocketConnected()&&this.durchgangopen,closed:this.backendService.isWebsocketConnected()&&!this.durchgangopen,offline:!this.backendService.isWebsocketConnected()}}set competition(t){this.stationFreezed||this.backendService.getDurchgaenge(t)}get competition(){return this.backendService.competition}set durchgang(t){this.stationFreezed||this.backendService.getGeraete(this.competition,t)}get durchgang(){return this.backendService.durchgang}set geraet(t){this.stationFreezed||this.backendService.getSteps(this.competition,this.durchgang,t)}get geraet(){return this.backendService.geraet}set step(t){this.backendService.getWertungen(this.competition,this.durchgang,this.geraet,t)}get step(){return this.backendService.step}get stationFreezed(){return this.backendService.stationFreezed}isLoggedIn(){return this.backendService.loggedIn}get nextStepCaption(){return this.isLoggedIn()?"N\xe4chste Riege":"N\xe4chstes Ger\xe4t"}get prevStepCaption(){return this.isLoggedIn()?"Vorherige Riege":"Vorheriges Ger\xe4t"}itemTapped(t){t.getOpenAmount().then(n=>{n>10||n<-10?t.close():t.open("end")})}nextStep(t){this.backendService.nextGeraet().subscribe(n=>{this.step=n,t.close()})}prevStep(t){this.backendService.prevGeraet().subscribe(n=>{this.step=n,t.close()})}get station(){return this.isLoggedIn()?this.geraetName()+" - "+this.step+". Riege von "+this.getSteps()?.length+", "+this.durchgang:this.geraetName()+" - "+this.step+". Ger\xe4t von "+this.getGeraete()?.length+", "+this.durchgang}get previousGearImage(){return this.isLoggedIn()?void 0:S.ec[this.backendService.getPrevGeraet()]||void 0}get nextGearImage(){return this.isLoggedIn()?void 0:S.ec[this.backendService.getNextGeraet()]||void 0}get gearImage(){return S.ec[this.backendService.geraet]||void 0}showCompleteAlert(){var t=this;return(0,p.A)(function*(){const n=t.alertCtrl.create({header:"Achtung",message:'Nach dem Abschliessen der Station "'+t.station+'" k\xf6nnen die erfassten Wertungen nur noch im Wettkampf-B\xfcro korrigiert werden.',buttons:[{text:"Abbrechen",role:"cancel",handler:()=>{}},{text:"OKAY",handler:()=>{const o=n.then(c=>c.dismiss());return t.zone.run(()=>{t.backendService.finishStation(t.competition,t.durchgang,t.geraet,t.step).subscribe(c=>{0===c.length&&o.then(()=>{t.navCtrl.pop()})})}),!1}}]});n.then(o=>o.present())})()}toastMissingResult(t){var n=this;return(0,p.A)(function*(){const o=t[0].vorname.toUpperCase()+" "+t[0].name.toUpperCase()+" ("+t[0].verein+")";(yield n.alertCtrl.create({header:"Achtung",subHeader:"Fehlendes Resultat!",message:"In dieser Riege gibt es noch "+t.length+" leere Wertungen! - Bitte pr\xfcfen, ob "+o+" geturnt hat.",buttons:[{text:"Abbrechen",role:"cancel",handler:()=>{}},{text:o+" hat nicht geturnt",role:"edit",handler:()=>{t.splice(0,1),t.length>0?n.toastMissingResult(t):n.showCompleteAlert()}},{text:"Korrigieren",role:"edit",handler:()=>{n.navCtrl.navigateForward("wertung-editor/"+t[0].id)}}]})).present()})()}finish(){const t=this.backendService.wertungen.filter(n=>void 0===n.wertung.endnote);0!==t.length?this.toastMissingResult(t):this.showCompleteAlert()}getCompetitions(){return this.backendService.competitions}competitionName(){if(!this.backendService.competitions)return"";const t=this.backendService.competitions.filter(n=>n.uuid===this.backendService.competition).map(n=>n.titel+"<br>"+(n.datum+"T").split("T")[0].split("-").reverse().join("-"));return 1===t.length?t[0]:""}geraetName(){if(!this.geraete||0===this.geraete.length)return"";const t=this.geraete.filter(n=>n.id===this.backendService.geraet).map(n=>n.name);return 1===t.length?t[0]:""}getDurchgaenge(){return this.backendService.durchgaenge}getGeraete(){return this.geraete||[]}getSteps(){return this.backendService.steps}getWertungen(){return this.backendService.wertungenSubject}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=e.VBU({type:i,selectors:[["app-station"]],standalone:!1,decls:29,vars:19,consts:[["slidingStepItem",""],["slot","start"],["defaultHref","/"],["slot","end",1,"ion-padding-end",3,"innerHtml"],[3,"items"],[3,"click"],["slot","start",3,"src"],["slot","end","name","arrow-forward-circle-outline"],["side","start"],["color","primary",3,"click","disabled"],[3,"src"],["side","end"],["size","large","expand","block","color","success",3,"disabled"],[1,"stateinfo",3,"ngClass"],["size","large","expand","block","color","success",3,"click","disabled"],["slot","start","name","git-commit"]],template:function(n,o){if(1&n){const c=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.nVh(4,T,3,0,"div"),e.nVh(5,P,5,2,"div"),e.nrm(6,"ion-note",3),e.k0s()(),e.j41(7,"ion-content"),e.nVh(8,E,2,3,"riege-list",4),e.nI1(9,"async"),e.k0s(),e.j41(10,"ion-footer")(11,"ion-toolbar")(12,"ion-list")(13,"ion-item-sliding",null,0)(15,"ion-item",5),e.bIt("click",function(){a.eBV(c);const d=e.sdS(14);return a.Njj(o.itemTapped(d))}),e.nrm(16,"ion-icon",6),e.j41(17,"ion-label"),e.EFF(18),e.k0s(),e.nVh(19,$,1,0,"ion-icon",7),e.k0s(),e.j41(20,"ion-item-options",8)(21,"ion-item-option",9),e.bIt("click",function(){a.eBV(c);const d=e.sdS(14);return a.Njj(o.prevStep(d))}),e.nrm(22,"ion-icon",10),e.EFF(23),e.k0s()(),e.j41(24,"ion-item-options",11)(25,"ion-item-option",9),e.bIt("click",function(){a.eBV(c);const d=e.sdS(14);return a.Njj(o.nextStep(d))}),e.nrm(26,"ion-icon",10),e.EFF(27),e.k0s()()(),e.nVh(28,x,3,1,"ion-button",12),e.k0s()()()}2&n&&(e.R7$(4),e.vxM(o.isLoggedIn()?-1:4),e.R7$(),e.vxM(o.isLoggedIn()?5:-1),e.R7$(),e.Y8G("innerHtml",o.competitionName(),e.npT),e.R7$(2),e.vxM(o.geraet&&o.durchgang&&o.step&&e.bMT(9,17,o.getWertungen())?8:-1),e.R7$(8),e.Y8G("src",e.VkB("assets/imgs/",o.gearImage)),e.R7$(2),e.JRh(o.station),e.R7$(),e.vxM(o.geraet&&o.getSteps()?19:-1),e.R7$(2),e.Y8G("disabled",!o.geraet||!o.getSteps()),e.R7$(),e.Y8G("src",e.VkB("assets/imgs/",o.previousGearImage)),e.R7$(),e.SpI(" ",o.prevStepCaption," "),e.R7$(2),e.Y8G("disabled",!o.geraet||!o.getSteps()),e.R7$(),e.Y8G("src",e.VkB("assets/imgs/",o.nextGearImage)),e.R7$(),e.SpI(" ",o.nextStepCaption," "),e.R7$(),e.vxM(o.isLoggedIn()&&o.durchgangopen?28:-1))},dependencies:[g.YU,s.Jm,s.QW,s.W9,s.M0,s.eU,s.iq,s.uz,s.LU,s.CE,s.A7,s.he,s.nf,s.JI,s.BC,s.ai,s.el,j,g.Jj],styles:[".stateinfo.closed[_ngcontent-%COMP%]{padding-left:5px;border-left:6px solid var(--ion-color-danger)}.stateinfo.open[_ngcontent-%COMP%]{padding-left:5px;border-left:6px solid var(--ion-color-success)}.stateinfo.offline[_ngcontent-%COMP%]{padding-left:5px;border-left:6px solid var(--ion-color-warning)}ion-icon[_ngcontent-%COMP%]{color:var(--ion-card-color);font-size:35px;border-color:var(--ion-item-border-color);border-width:2px;border-style:solid;border-radius:4px;margin-right:16px}"]})}return i})();var V=r(5079);const L=[{path:"",component:W}];let B=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=e.$C({type:i});static \u0275inj=a.G2t({imports:[g.MD,v.YN,s.bv,f.iI.forChild(L),V.h]})}return i})()},5079:(C,h,r)=>{r.d(h,{h:()=>a});var g=r(2200),v=r(4341),f=r(9893),s=r(3664),p=r(2615);let a=(()=>{class e{static \u0275fac=function(u){return new(u||e)};static \u0275mod=s.$C({type:e});static \u0275inj=p.G2t({imports:[g.MD,v.YN,f.bv]})}return e})()}}]);