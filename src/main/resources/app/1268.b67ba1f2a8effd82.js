"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1268],{1268:(v,p,i)=>{i.r(p),i.d(p,{CompetitionsPageModule:()=>I});var m=i(177),u=i(4341),a=i(4742),g=i(1413),d=i(6354),c=i(3294),M=i(5558),h=i(7647),f=i(7673),t=i(4438),y=i(2872),F=i(2350);function P(r,C){if(1&r){const e=t.RV6();t.j41(0,"ion-item",5),t.bIt("click",function(s){const l=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.itemTapped(s,l))}),t.j41(1,"ion-avatar",0),t.nrm(2,"img",6),t.k0s(),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"date"),t.nrm(6,"br"),t.j41(7,"small"),t.EFF(8),t.k0s()()()}if(2&r){const e=C.$implicit,n=t.XpG(2);t.R7$(4),t.Lme("",t.i5U(5,3,e.datum,"dd-MM-yyyy"),"\xa0",e.titel,""),t.R7$(4),t.JRh(n.getDetails(e))}}function T(r,C){if(1&r&&(t.j41(0,"ion-list"),t.DNE(1,P,9,6,"ion-item",4),t.k0s()),2&r){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.sFilteredWettkampfList)}}let L=(()=>{class r{navCtrl;backendService;pgmList;sFilteredWettkampfList;sMyQuery;tMyQueryStream=new g.B;sFilterTask=void 0;constructor(e,n){this.navCtrl=e,this.backendService=n,this.backendService.loadWKPrograms().subscribe(s=>{this.pgmList=s.reduce(function(l,o){return l[o.id]=o.name,l},{})}),this.backendService.competitionSubject.subscribe(s=>{this.sFilteredWettkampfList=s,this.sMyQuery="",this.tMyQueryStream.pipe((0,d.T)(o=>o?.target?.value||""),(0,c.F)(),(0,M.n)(this.runQuery(s)),(0,h.u)()).subscribe(o=>{this.sFilteredWettkampfList=o})}),this.backendService.competitions||this.backendService.getCompetitions()}ngOnInit(){}runQuery(e){const n=[...e||[]];return s=>{const l=s.trim();let o;if(o=[],n.length>0){const S=this.filter(l);o=[...n.filter(W=>S(W))]}return(0,f.of)(o)}}filter(e){const n=e.toUpperCase().split(" ");return s=>0===e.trim().length||"*"===e.trim()||0===n.length||n.filter(l=>{if(this.competitionName(s).toUpperCase().indexOf(l)>-1||this.getProgrammname(s.programmId).toUpperCase().indexOf(l)>-1||this.getDetails(s).toUpperCase().indexOf(l)>-1)return!0}).length===n.length}reloadList(e){this.tMyQueryStream.next(e)}getCompetitions(){return this.sFilteredWettkampfList}getProgrammname(e){return this.pgmList?this.pgmList[e]:""}getDetails(e){let n=this.getProgrammname(e.programmId);return e.teamrule&&"Keine Teams"!==e.teamrule&&(n=n+", Teams: "+e.teamrule),e.altersklassen?.length>0&&(n+=", Altersklassen"),e.jahrgangsklassen?.length>0&&(n+=", Jahrgangs-Altersklassen"),n}competitionName(e){return e.titel+", am "+(e.datum+"T").split("T")[0].split("-").reverse().join("-")}itemTapped(e,n){this.backendService.getDurchgaenge(n.uuid),this.navCtrl.navigateRoot("/home")}static \u0275fac=function(n){return new(n||r)(t.rXU(y.q9),t.rXU(F.m))};static \u0275cmp=t.VBU({type:r,selectors:[["app-competitions"]],standalone:!1,decls:13,vars:2,consts:[["slot","start"],["slot","icon-only","name","menu"],["placeholder","Search","showCancelButton","never",3,"ngModelChange","ionInput","ionCancel","ngModel"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["src","assets/imgs/wettkampf.png"]],template:function(n,s){1&n&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-menu-toggle")(4,"ion-button"),t.nrm(5,"ion-icon",1),t.k0s()()(),t.j41(6,"ion-title"),t.EFF(7,"Wettkampf App - "),t.j41(8,"small"),t.EFF(9,"Auswahl"),t.k0s()()(),t.j41(10,"ion-searchbar",2),t.mxI("ngModelChange",function(o){return t.DH7(s.sMyQuery,o)||(s.sMyQuery=o),o}),t.bIt("ionInput",function(o){return s.reloadList(o)})("ionCancel",function(o){return s.reloadList(o)}),t.k0s()(),t.j41(11,"ion-content"),t.DNE(12,T,2,1,"ion-list",3),t.k0s()),2&n&&(t.R7$(10),t.R50("ngModel",s.sMyQuery),t.R7$(2),t.Y8G("ngIf",s.sFilteredWettkampfList&&s.sFilteredWettkampfList.length>0))},dependencies:[m.Sq,m.bT,u.BC,u.vS,a.mC,a.Jm,a.QW,a.W9,a.eU,a.iq,a.uz,a.he,a.nf,a.cA,a.S1,a.BC,a.ai,a.Gw,m.vh],encapsulation:2})}return r})();var j=i(305),E=i(5079);const D=[{path:"",component:L}];let I=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275mod=t.$C({type:r});static \u0275inj=t.G2t({imports:[m.MD,u.YN,a.bv,j.iI.forChild(D),E.h]})}return r})()},5079:(v,p,i)=>{i.d(p,{h:()=>d});var m=i(177),u=i(4341),a=i(4742),g=i(4438);let d=(()=>{class c{static \u0275fac=function(f){return new(f||c)};static \u0275mod=g.$C({type:c});static \u0275inj=g.G2t({imports:[m.MD,u.YN,a.bv]})}return c})()}}]);