<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/" />
    </ion-buttons>
    <ion-title>
      <ion-grid no-padding>
        <ion-row>
          <ion-col>
            <ion-label>Aktuelle Resultate</ion-label>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-title>
    <ion-buttons slot="end">
      @if (isShareAvailable()) {
        <ion-button slot="end" (click)="share()">
          <ion-icon name="share" />
        </ion-button>
      }
    </ion-buttons>
  </ion-toolbar>
  <ion-grid no-padding>
    <ion-row>
      @if (competition) {
        <ion-col>
          <ion-note>
            {{competitionName()}}
          </ion-note>
          <ion-label>
            <div style="font-size: 16pt;">{{athlet.vorname + ' ' + athlet.name}}</div>
            <div style="font-size: 10pt;">{{athlet.verein}}</div>
          </ion-label>
        </ion-col>
      }
    </ion-row>
  </ion-grid>
</ion-header>

<ion-content>
  @if (hasMedia) {
    <ion-list>
      <ion-item>
          <iframe width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay"
            [attr.src]="scPlayerSource"></iframe>

        <audio controls>
          <source [attr.src]="mediaSource" type="audio/mp3">
          <source [attr.src]="mediaSource" type="audio/ogg">
          <source [attr.src]="mediaSource" type="audio/wav">
        </audio>
      </ion-item>
    </ion-list>
  }

  <ion-grid no-padding>
    @if (getColumnSpec() === 6) {
      <ion-row>
        @for (w of items; track w) {
          <ion-col class="align-self-start"
            size-xs="12" size-md="6" size-lg="4" [attr.size-xl]="getMaxColumnSpec()"
            >
            <div [ngClass]="{'gradient-border':isNew(w)}">
              <result-display [item]="w" [title]="getTitle(w)" [groupedBy]="groupBy.ATHLET" />
            </div>
          </ion-col>
        }
      </ion-row>
    }
    @if (getColumnSpec() !== 6) {
      <ion-row>
        @for (w of items; track w) {
          <ion-col class="align-self-start"
            size-xs="12" size-md="6" size-lg="3" [attr.size-xl]="getMaxColumnSpec()"
            >
            <div [ngClass]="{'gradient-border':isNew(w)}">
              <result-display [item]="w" [title]="getTitle(w)" [groupedBy]="groupBy.ATHLET" />
            </div>
          </ion-col>
        }
      </ion-row>
    }
    <ion-row>
      <ion-col class="align-self-start"
        size-xs="12" size-md="12" size-lg="12" size-xl="12">
        <result-display [item]="total" [title]="getTitle(undefined)" [groupedBy]="groupBy.ATHLET" />
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
